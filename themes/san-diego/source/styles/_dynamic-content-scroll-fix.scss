// Simplified dynamic content scrollbar handling
@use 'variables';

.blog .blog-content.has-dynamic-content {
  display: flex;
  flex-direction: column;
  position: relative;
  min-height: 100vh;
  height: 100%;
  overflow-x: hidden !important;
  overflow-y: auto !important;

  .dynamic-scroll-host {
    flex: 1 1 auto;
    min-height: 0;
    height: auto !important;
    max-height: none !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    position: relative;
    opacity: 1 !important;

    &::-webkit-scrollbar {
      width: 6px;
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background-color: rgb(0 0 0 / 20%);
      border-radius: 3px;

      @media (prefers-color-scheme: dark) {
        background-color: rgb(255 255 255 / 20%);
      }
    }

    .post-wrapper,
    .substack-post,
    .project-wrapper {
      overflow: visible !important;
      max-height: none !important;
      padding-bottom: 2rem;

      img {
        max-width: 100%;
        height: auto;
      }
    }
  }

  .content-inner-wrapper.dynamic-scroll-host {
    height: auto !important;
    min-height: 0 !important;
    max-height: none !important;
  }
}

.device-desktop .blog .blog-content.has-dynamic-content .content-inner-wrapper.dynamic-scroll-host,
.device-tablet .blog .blog-content.has-dynamic-content .content-inner-wrapper.dynamic-scroll-host {
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
}

@media (max-width: variables.$mobile-breakpoint) {
  .blog .blog-content.has-dynamic-content {
    min-height: auto;

    .dynamic-scroll-host {
      overflow: visible;
      height: auto;
      max-height: none;

      .post-wrapper,
      .project-wrapper,
      .substack-post {
        overflow: visible !important;
        height: auto !important;
        max-height: none !important;
        padding-bottom: 1rem !important;
        margin-bottom: 0 !important;
      }
    }

    .dynamic-back-button {
      position: absolute !important;
      top: 16px !important;
      left: 16px !important;
      margin: 0 !important;
      display: block !important;
      width: fit-content !important;
    }
  }

  .blog .blog-content .content-inner-wrapper {
    border-radius: 12px !important;
  }
}
