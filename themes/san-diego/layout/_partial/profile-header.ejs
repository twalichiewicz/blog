<%
    const contactLinks = (site && site.data && site.data.contact_links) || [];
    const mobileStatsIcon = `
        <svg class="mobile-button-icon mobile-button-icon--medal" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M7 2v8.43c0 .35.18.68.49.86l4.18 2.51-.99 2.34-3.41.29 2.59 2.24-.78 3.33L12 20.23 14.93 22l-.78-3.33 2.59-2.24-3.41-.29-.99-2.34 4.18-2.51c.31-.18.49-.51.49-.86V2H7zm4 1h2v9.23l-1 .6-1-.6V3z"/>
        </svg>
    `;
    const mobileContactIcon = `
        <svg class="mobile-button-icon mobile-button-icon--contact" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/>
        </svg>
    `;
    const mobileCloseIcon = `
        <svg class="mobile-button-icon mobile-button-icon--close" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M6.4 5.3L5.3 6.4 10.9 12 5.3 17.6l1.1 1.1L12 13.1l5.6 5.6 1.1-1.1L13.1 12l5.6-5.6-1.1-1.1L12 10.9 6.4 5.3z"/>
        </svg>
    `;
    const mobileImpactIcon = `
        <span class="mobile-button-icon-stack" aria-hidden="true">
            ${mobileStatsIcon}
            ${mobileCloseIcon}
        </span>
    `;
    const mobileContactStackIcon = `
        <span class="mobile-button-icon-stack" aria-hidden="true">
            ${mobileContactIcon}
            ${mobileCloseIcon}
        </span>
    `;
%>
<div class="profile-header" data-expanded="false">
    <div class="profile-photo-wrapper">
        <img src="/img/profilePhoto.jpeg" alt="Thomas Walichiewicz - Designer, Developer, Thinker" class="profile-photo">
    </div>
    <div class="profile-info">
        <h1 class="profile-name">
            <span class="desktop-only">Thomas<br/>Walichiewicz</span>
        </h1>
        <!-- Mobile compact header section -->
        <div class="mobile-compact-header mobile-only">
            <div class="mobile-compact-info">
                <div class="mobile-profile-photo">
                    <img src="/img/profilePhoto.jpeg" alt="Thomas Walichiewicz - Designer, Developer, Thinker" class="profile-photo">
                </div>
                <div class="mobile-profile-text">
                    <p class="profile-name mobile-compact-name">Thomas Walichiewicz</p>
                    <p class="profile-byline mobile-compact-byline">Building <a href="https://www.tryworkspaceos.com" target="_blank"><b>WorkspaceOS</b></a> @ <a href="https://www.triglavis.com" target="_blank"><b>Triglavis</b></a></p>
                </div>
            </div>
            <!-- Mobile buttons container -->
            <div class="mobile-buttons-container">
                <!-- Impact Report button -->
                <%- include('../../source/components/core/button/button', {
                    icon: mobileImpactIcon,
                    iconOnly: true,
                    ariaLabel: 'View stats',
                    ariaPressed: false,
                    variant: 'default',
                    size: 'md',
                    className: 'mobile-impact-button mobile-action-toggle',
                    attributes: {
                        onclick: 'openImpactModal()',
                        'data-label-default': 'View stats',
                        'data-label-active': 'Close stats'
                    },
                    dataComponent: false // Don't auto-initialize since we have onclick
                }) %>
                <div class="mobile-contact-menu-wrapper">
                    <% if (contactLinks.length) { %>
                        <div class="mobile-contact-menu" aria-hidden="true">
                            <% contactLinks.forEach((link) => {
                                const isExternal = Boolean(link.external);
                            %>
                                <a
                                    class="btn btn--default btn--md btn--icon-only btn--ripple mobile-contact-option"
                                    href="<%= link.href %>"
                                    aria-label="<%= link.aria_label || link.label %>"
                                    tabindex="-1"
                                    <% if (isExternal) { %>target="_blank" rel="noopener"<% } %>
                                >
                                    <span class="btn__icon" aria-hidden="true">
                                        <%- include('_partial/contact-icon', { icon: link.id, size: 20 }) %>
                                    </span>
                                </a>
                            <% }) %>
                        </div>
                    <% } %>
                    <!-- Mobile contact button -->
                    <%- include('../../source/components/core/button/button', {
                        icon: mobileContactStackIcon,
                        iconOnly: true,
                        ariaLabel: 'Contact Thomas',
                        ariaPressed: false,
                        ariaExpanded: false,
                        variant: 'default',
                        size: 'md',
                        className: 'mobile-contact-button mobile-action-toggle',
                        attributes: {
                            onclick: 'openContactModal(event)',
                            'data-label-default': 'Contact Thomas',
                            'data-label-active': 'Close contact'
                        },
                        dataComponent: false // Don't auto-initialize since we have onclick
                    }) %>
                </div>
            </div>
        </div>
        <!-- Desktop/tablet content (always visible) -->
        <div class="desktop-content mobile-hide no-external-indicators">
            <p class="profile-bio">Building <a href="https://www.tryworkspaceos.com" target="_blank"><b>WorkspaceOS</b></a> @ <a href="https://www.triglavis.com" target="_blank"><b>Triglavis</b></a><br/><br/>Designer, researcher, and relentless problem solver. Leading design at startups and established companies. Building thoughtful digital experiences.</p>
            <div class="profile-stats-container">
                <div class="profile-stats" onclick="openImpactModal()" role="button" tabindex="0" aria-label="View stats">
                    <div class="stat">
                        <span class="number">12</span>
                        <span class="label">Years pro</span>
                    </div>
                    <div class="stat">
                        <span class="number">30+</span>
                        <span class="label">Projects led</span>
                    </div>
                    <div class="stat">
                        <span class="number">40,000,000+</span>
                        <span class="label">Users impacted</span>
                    </div>
                </div>
                <div class="impact-report-chin">
                    <button class="impact-report-btn" onclick="openImpactModal(event)" aria-label="View full stats">Stats</button>
                </div>
            </div>
        </div>
    </div>
</div>
<% if (contactLinks.length) { %>
    <div class="desktop-contact-chin mobile-hide">
        <div class="contact-chin-inner">
            <% contactLinks.forEach((link) => {
                const isExternal = Boolean(link.external);
                const classNames = ['contact-chin-btn'];
                if (isExternal && link.no_external_indicator) {
                    classNames.push('no-external-indicators');
                }
                if (link.modifier) {
                    classNames.push(`contact-chin-btn--${link.modifier}`);
                }
            %>
                <a
                    href="<%= link.href %>"
                    class="<%= classNames.join(' ') %>"
                    aria-label="<%= link.aria_label || link.label %>"
                    data-label="<%= link.label %>"
                    <% if (isExternal) { %>target="_blank" rel="noopener"<% } %>
                >
                    <span class="contact-icon" aria-hidden="true">
                        <%- partial('_partial/contact-icon', { icon: link.id }) %>
                    </span>
                </a>
            <% }) %>
        </div>
    </div>
<% } %>
