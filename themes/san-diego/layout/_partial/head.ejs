<head>
  <title><% if (page.layout === 'blog') { %>Newest at the Top - Design in Everything<% } else if (page.layout === 'project_gallery') { %><%= page.title %> | <%= page.company %> - Design in Everything<% } else if (page.layout === 'about') { %>About - Design in Everything<% } else if (page.title && page.layout === 'post') { %><%= page.title %> | Design in Everything<% } else { %>Design in Everything - by Thomas Walichiewicz<% } %></title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'><%= theme.favicon_emoji %></text></svg>">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="rgb(245, 240, 235)" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="rgb(0, 0, 0)" />
  <link rel="stylesheet" href="<%- url_for('styles/styles.css') %>">
  <% if (page.layout === 'project') { %>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/two.js/0.8.10/two.min.js"></script>
  <script src="<%- url_for('js/propel-visualizations.js') %>"></script>
  <script src="<%- url_for('js/project-components.js') %>"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (document.querySelector('.propel-case-study')) {
        new PropelVisualizations();
      }
    });
  </script>
  <% } %>
  <script>
    if (typeof window.themeInitialized === 'undefined') {
      const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', savedTheme);
      window.themeInitialized = true;
    }
  </script>
  <!-- Core Libraries -->
  <!-- <script src="<%- url_for('js/lib/moment.min.js') %>"></script> -->

  <!-- Import Map -->
  <script type="importmap">
  {
    "imports": {
      "canvas-confetti": "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/+esm",
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
      "three/examples/": "https://unpkg.com/three@0.160.0/examples/"
    }
  }
  </script>

  <script type="module" src="<%- url_for('js/main.js') %>"></script>
  <script type="module" src="<%- url_for('js/components/HomeVisuals.js') %>"></script>
  <script type="module" src="<%- url_for('js/mobile-tabs.js') %>"></script>
  <script type="module" src="<%- url_for('js/carousel.js') %>"></script>
  <script type="module" src="<%- url_for('js/desktop-widgets.js') %>"></script>
  <script type="module" src="<%- url_for('js/animations.js') %>"></script>
  <script src="<%- url_for('js/project-tabs.js') %>"></script>
  <script src="<%- url_for('js/project-summary.js') %>"></script>
  <script src="<%- url_for('js/scroll.js') %>"></script>
  <script src="<%- url_for('js/sound-effects.js') %>"></script>
</head>