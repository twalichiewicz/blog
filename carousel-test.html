<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Carousel Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 2rem;
            background: #f5f5f7;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .test-section {
            margin-bottom: 4rem;
        }
        
        .test-section h2 {
            margin-bottom: 1rem;
        }
        
        /* Test image styles */
        .test-image {
            width: 100%;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: bold;
            color: white;
            border-radius: 12px;
        }
        
        .test-image-1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .test-image-2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .test-image-3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .test-image-4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .test-image-5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    </style>
    
    <!-- Include carousel styles -->
    <link rel="stylesheet" href="themes/san-diego/source/styles/styles.css">
</head>
<body>
    <div class="container">
        <h1>Modern Carousel Component Test</h1>
        
        <!-- Test 1: Basic Image Carousel -->
        <div class="test-section">
            <h2>Test 1: Basic Image Carousel</h2>
            <div class="carousel" data-test="basic">
                <div class="carousel-container">
                    <div class="carousel-track">
                        <div class="carousel-slide active">
                            <div class="test-image test-image-1">Slide 1</div>
                        </div>
                        <div class="carousel-slide">
                            <div class="test-image test-image-2">Slide 2</div>
                        </div>
                        <div class="carousel-slide">
                            <div class="test-image test-image-3">Slide 3</div>
                        </div>
                        <div class="carousel-slide">
                            <div class="test-image test-image-4">Slide 4</div>
                        </div>
                        <div class="carousel-slide">
                            <div class="test-image test-image-5">Slide 5</div>
                        </div>
                    </div>
                </div>
                <button class="carousel-button prev" aria-label="Previous slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 18l-6-6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="carousel-button next" aria-label="Next slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="carousel-indicators">
                    <button class="indicator active" aria-label="Go to slide 1"></button>
                    <button class="indicator" aria-label="Go to slide 2"></button>
                    <button class="indicator" aria-label="Go to slide 3"></button>
                    <button class="indicator" aria-label="Go to slide 4"></button>
                    <button class="indicator" aria-label="Go to slide 5"></button>
                </div>
            </div>
        </div>
        
        <!-- Test 2: Single Slide -->
        <div class="test-section">
            <h2>Test 2: Single Slide (No Navigation)</h2>
            <div class="carousel" data-test="single">
                <div class="carousel-container">
                    <div class="carousel-track">
                        <div class="carousel-slide active">
                            <div class="test-image test-image-1">Single Slide</div>
                        </div>
                    </div>
                </div>
                <button class="carousel-button prev" aria-label="Previous slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 18l-6-6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="carousel-button next" aria-label="Next slide">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="carousel-indicators">
                    <button class="indicator active" aria-label="Go to slide 1"></button>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>Test Results</h2>
            <div id="test-results">
                <p>JavaScript loading...</p>
            </div>
        </div>
    </div>
    
    <!-- Include carousel JavaScript -->
    <script type="module">
        // Import modern carousel
        import './themes/san-diego/source/js/carousel.js';
        
        // Wait for initialization
        setTimeout(() => {
            const results = document.getElementById('test-results');
            const tests = [];
            
            // Test 1: Check if carousels are initialized
            const carousels = document.querySelectorAll('.carousel');
            tests.push(`✓ Found ${carousels.length} carousels`);
            
            // Test 2: Check if carousels have initialized class
            const initialized = document.querySelectorAll('.carousel-initialized');
            tests.push(`${initialized.length === carousels.length ? '✓' : '✗'} All carousels initialized`);
            
            // Test 3: Check navigation functionality
            const firstCarousel = window.ModernCarousel.getInstance(carousels[0]);
            if (firstCarousel) {
                tests.push('✓ Modern carousel instance accessible');
                
                // Test navigation
                const startIndex = firstCarousel.state.currentIndex;
                firstCarousel.next();
                const afterNext = firstCarousel.state.currentIndex;
                tests.push(`${afterNext === startIndex + 1 ? '✓' : '✗'} Next navigation works`);
                
                firstCarousel.prev();
                const afterPrev = firstCarousel.state.currentIndex;
                tests.push(`${afterPrev === startIndex ? '✓' : '✗'} Previous navigation works`);
            } else {
                tests.push('✗ Could not access carousel instance');
            }
            
            // Test 4: Check touch gesture support
            const hasGestures = carousels[0].classList.contains('carousel-modern');
            tests.push(`${hasGestures ? '✓' : '✗'} Modern features applied`);
            
            // Display results
            results.innerHTML = '<ul>' + tests.map(test => `<li>${test}</li>`).join('') + '</ul>';
            
            // Log for debugging
            console.log('Carousel test results:', tests);
        }, 1000);
    </script>
</body>
</html>