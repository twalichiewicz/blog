export default class Component{constructor(t,e={}){if(!(t&&t instanceof HTMLElement))throw new Error("Component requires a valid HTML element");this.element=t,this.options={...this.constructor.defaults,...e},this.state={},this._events=[],this._uid=this.constructor._generateUID(),this.constructor.instances.set(this.element,this),this.init()}static defaults={};static instances=new WeakMap;static _uidCounter=0;static _generateUID(){return"component-"+ ++this._uidCounter}static getInstance(t){return this.instances.get(t)||null}init(){this.setupDOM(),this.bindEvents(),this.afterInit()}setupDOM(){this.element.dataset.componentId=this._uid}bindEvents(){}afterInit(){}addEventListener(t,e,s,n={}){t.addEventListener(e,s,n),this._events.push({target:t,event:e,handler:s,options:n})}setState(t){const e={...this.state};this.state={...this.state,...t},this.onStateChange(e,this.state)}onStateChange(t,e){}setOptions(t){const e={...this.options};this.options={...this.options,...t},this.onOptionsChange(e,this.options)}onOptionsChange(t,e){}emit(t,e={}){const s=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0});this.element.dispatchEvent(s)}destroy(){this.beforeDestroy(),this._events.forEach(({target:t,event:e,handler:s,options:n})=>{t.removeEventListener(e,s,n)}),this._events=[],this.constructor.instances.delete(this.element),delete this.element.dataset.componentId,this.afterDestroy()}beforeDestroy(){}afterDestroy(){}matches(t,e){return t.matches(e)}find(t){return this.element.querySelector(t)}findAll(t){return this.element.querySelectorAll(t)}addClass(t,...e){t.classList.add(...e)}removeClass(t,...e){t.classList.remove(...e)}toggleClass(t,e,s){return t.classList.toggle(e,s)}hasClass(t,e){return t.classList.contains(e)}setAttribute(t,e,s){t.setAttribute(e,s)}removeAttribute(t,e){t.removeAttribute(e)}getAttribute(t,e){return t.getAttribute(e)}}"undefined"!=typeof window&&(window.Component=Component);