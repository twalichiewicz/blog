class CursorStateManager{constructor(t){this.container=t,this.originalCursor=null,this.init()}init(){this.container.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.container.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.initDragTracking(),this.observeLoadingStates()}handleMouseDown(t){const e=t.target;this.isClickable(e)&&(this.originalCursor=getComputedStyle(e).cursor,e.style.cursor="var(--cursor-active)",e.classList.add("cursor-active"))}handleMouseUp(t){this.container.querySelectorAll(".cursor-active").forEach(t=>{t.classList.remove("cursor-active"),t.style.cursor=""})}isClickable(t){return["BUTTON","A"].includes(t.tagName)||["button","link","tab"].includes(t.getAttribute("role"))||t.classList.contains("clickable")||t.hasAttribute("onclick")}initDragTracking(){this.container.querySelectorAll('.draggable, [draggable="true"]').forEach(t=>{t.addEventListener("dragstart",()=>{t.classList.add("dragging")}),t.addEventListener("dragend",()=>{t.classList.remove("dragging")})})}observeLoadingStates(){const t=new MutationObserver(t=>{t.forEach(t=>{if("attributes"===t.type&&"data-loading"===t.attributeName){const e=t.target;"true"===e.getAttribute("data-loading")?e.classList.add("cursor-loading"):e.classList.remove("cursor-loading")}})});this.container.querySelectorAll("[data-loading]").forEach(e=>{t.observe(e,{attributes:!0,attributeFilter:["data-loading"]})})}setCursor(t,e){const r=["default","interactive","active","grab","grabbing","loading","disabled"];r.includes(e)&&(r.forEach(e=>{t.classList.remove(`cursor-${e}`)}),t.classList.add(`cursor-${e}`))}async withLoadingCursor(t,e){this.setCursor(t,"loading"),t.setAttribute("data-loading","true");try{return await e()}finally{t.setAttribute("data-loading","false"),this.setCursor(t,"interactive")}}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('.advanced-prototype, [data-cursor-states="true"]').forEach(t=>{new CursorStateManager(t)})}),window.CursorStateManager=CursorStateManager,window.temporaryCursor=function(t,e,r=1e3){const a=new CursorStateManager(t.closest(".advanced-prototype"));a.setCursor(t,e),setTimeout(()=>{a.setCursor(t,"interactive")},r)};