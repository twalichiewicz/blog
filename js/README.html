<h1 id="JavaScript-Architecture"><a href="#JavaScript-Architecture" class="headerlink" title="JavaScript Architecture"></a>JavaScript Architecture</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>This directory contains all client-side JavaScript for the blog. Files are organized by functionality and loaded as needed.</p><h2 id="File-Structure"><a href="#File-Structure" class="headerlink" title="File Structure"></a>File Structure</h2><h3 id="Core-Files"><a href="#Core-Files" class="headerlink" title="Core Files"></a>Core Files</h3><ul><li><code>main.js</code> - Main entry point, initializes core functionality</li><li><code>blog.js</code> - Blog-specific functionality (dynamic content loading, back button)</li><li><code>home.js</code> - Homepage-specific initialization</li><li><code>device-detection.js</code> - Detects device type and adjusts UI</li></ul><h3 id="Navigation-Scrolling"><a href="#Navigation-Scrolling" class="headerlink" title="Navigation &amp; Scrolling"></a>Navigation &amp; Scrolling</h3><ul><li><code>anchor-links-simple.js</code> - Handles in-page anchor link navigation</li><li><code>scroll.js</code> - General scroll functionality</li><li><code>mobile-tabs.js</code> - Tab switching for mobile devices</li></ul><h3 id="UI-Components"><a href="#UI-Components" class="headerlink" title="UI Components"></a>UI Components</h3><ul><li><code>carousel.js</code> - Image carousel functionality</li><li><code>project-tabs.js</code> - Project page tab navigation</li><li><code>project-summary.js</code> - Project summary display logic</li><li><code>search.js</code> - Search functionality</li></ul><h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><ul><li><code>components/</code> - Reusable component modules</li><li><code>utils/</code> - Utility functions (animations, colors, etc.)</li></ul><h2 id="Known-Issues"><a href="#Known-Issues" class="headerlink" title="Known Issues"></a>Known Issues</h2><h3 id="1-Multiple-Scroll-Handlers"><a href="#1-Multiple-Scroll-Handlers" class="headerlink" title="1. Multiple Scroll Handlers"></a>1. Multiple Scroll Handlers</h3><p>Several files implement similar scroll logic:</p><ul><li><code>scroll.js</code> - General scroll to top&#x2F;section</li><li><code>blog.js</code> - Blog post scroll functionality</li><li><code>anchor-links-simple.js</code> - Anchor link scrolling</li></ul><p><strong>Impact</strong>: Potential conflicts and duplicate code<br><strong>TODO</strong>: Consolidate into single scroll utility</p><h3 id="2-Global-Variable-Dependencies"><a href="#2-Global-Variable-Dependencies" class="headerlink" title="2. Global Variable Dependencies"></a>2. Global Variable Dependencies</h3><p>Many scripts rely on global variables:</p><ul><li><code>window.mobileTabs</code></li><li><code>window.scrollToFullStory</code></li><li><code>window.initializeAnchorLinks</code></li></ul><p><strong>Impact</strong>: Load order dependencies, potential race conditions<br><strong>TODO</strong>: Implement proper module system</p><h3 id="3-Event-Listener-Management"><a href="#3-Event-Listener-Management" class="headerlink" title="3. Event Listener Management"></a>3. Event Listener Management</h3><p>No centralized event delegation system, leading to:</p><ul><li>Multiple listeners on same elements</li><li>Memory leaks from unremoved listeners</li><li>Conflicts between handlers</li></ul><p><strong>TODO</strong>: Implement event delegation pattern</p><h2 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h2><h3 id="Adding-New-Features"><a href="#Adding-New-Features" class="headerlink" title="Adding New Features"></a>Adding New Features</h3><ol><li>Check if similar functionality exists</li><li>Use existing utilities where possible</li><li>Document global dependencies</li><li>Add error handling</li><li>Test on mobile and desktop</li></ol><h3 id="Event-Handling"><a href="#Event-Handling" class="headerlink" title="Event Handling"></a>Event Handling</h3><pre><code class="language-javascript">// Good: Remove old handlers
if (element._handler) {
  element.removeEventListener(&#39;click&#39;, element._handler);
}
element._handler = newHandler;
element.addEventListener(&#39;click&#39;, newHandler);

// Better: Use event delegation
document.addEventListener(&#39;click&#39;, (e) =&gt; {
  if (e.target.matches(&#39;.my-selector&#39;)) {
    // Handle click
  }
});
</code></pre><h3 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h3><pre><code class="language-javascript">// Always check elements exist
const element = document.querySelector(&#39;.my-element&#39;);
if (!element) {
  console.warn(&#39;Element not found: .my-element&#39;);
  return;
}
</code></pre><h2 id="Loading-Order"><a href="#Loading-Order" class="headerlink" title="Loading Order"></a>Loading Order</h2><ol><li><code>device-detection.js</code> - Must load first</li><li><code>main.js</code> - Core initialization</li><li>Component scripts - As needed per page</li><li>Page-specific scripts - Last</li></ol><h2 id="Performance-Notes"><a href="#Performance-Notes" class="headerlink" title="Performance Notes"></a>Performance Notes</h2><ul><li>Scripts are minified in production</li><li>Consider lazy loading for feature-specific code</li><li>Avoid synchronous operations in event handlers</li><li>Use <code>requestAnimationFrame</code> for animations</li></ul>