export class CarouselState{constructor(t){this.currentIndex=0,this.slideCount=t,this.isTransitioning=!1,this.spotlightActive=!1,this.spotlightIndex=0,this.listeners=new Map}on(t,i){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(i),()=>this.listeners.get(t).delete(i)}emit(t,i){this.listeners.has(t)&&this.listeners.get(t).forEach(t=>t(i))}setIndex(t,i={}){if(t<0||t>=this.slideCount||this.isTransitioning)return!1;const s=this.currentIndex;return this.currentIndex=t,i.silent||this.emit("indexChange",{previousIndex:s,currentIndex:t}),!0}next(){const t=(this.currentIndex+1)%this.slideCount;return this.setIndex(t)}prev(){const t=(this.currentIndex-1+this.slideCount)%this.slideCount;return this.setIndex(t)}setTransitioning(t){this.isTransitioning=t,this.emit("transitionStateChange",{isTransitioning:t})}openSpotlight(t=this.currentIndex){this.spotlightActive=!0,this.spotlightIndex=t,this.emit("spotlightOpen",{index:t})}closeSpotlight(){this.spotlightActive=!1,this.emit("spotlightClose",{})}setSpotlightIndex(t){if(t<0||t>=this.slideCount)return!1;const i=this.spotlightIndex;return this.spotlightIndex=t,this.emit("spotlightIndexChange",{previousIndex:i,currentIndex:t}),!0}}