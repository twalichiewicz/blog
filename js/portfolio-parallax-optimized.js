!function(){"use strict";const e={mouseX:0,mouseY:0,targetX:0,targetY:0,rafId:null,isAnimating:!1,activeItems:new Set,lastUpdate:0};let t=null,o=[];function r(){t=document.querySelector(".portfolio-featured-grid"),t&&(o=Array.from(document.querySelectorAll(".portfolio-item-wrapper")),o.length&&(o.forEach(e=>{const o=e.querySelector(".portfolio-item--featured"),r=e.querySelector(".image-wrapper");e.querySelector(".notebook")||t&&t.classList.contains("notebook-carousel-mobile")||(o&&(o.style.willChange="transform",o.style.transform="translateZ(0)"),r&&(r.style.willChange="transform",r.style.transform="translateZ(0)"),e._refs={portfolioItem:o,imageWrapper:r,bounds:null})}),t.addEventListener("mousemove",a,{passive:!0}),t.addEventListener("mouseleave",n,{passive:!0}),t.addEventListener("touchmove",s,{passive:!0}),t.addEventListener("touchend",n,{passive:!0}),e.isAnimating||(e.isAnimating=!0,i())))}function a(t){const r=performance.now();r-e.lastUpdate<16||(e.targetX=t.clientX,e.targetY=t.clientY,e.lastUpdate=r,function(t){const r=t.target.closest(".portfolio-item-wrapper");o.forEach(t=>{t._refs&&t._refs.portfolioItem&&(t===r?(e.activeItems.add(t),t._refs.portfolioItem.classList.add("parallax-active"),t._refs.bounds=t.getBoundingClientRect()):(e.activeItems.delete(t),t._refs.portfolioItem.classList.remove("parallax-active")))})}(t))}function s(e){if(e.touches.length>0){const t=e.touches[0];a({clientX:t.clientX,clientY:t.clientY,target:document.elementFromPoint(t.clientX,t.clientY)})}}function n(){e.activeItems.clear(),o.forEach(e=>{e._refs.portfolioItem&&e._refs.portfolioItem.classList.remove("parallax-active")})}function i(){e.mouseX+=.1*(e.targetX-e.mouseX),e.mouseY+=.1*(e.targetY-e.mouseY),e.activeItems.forEach(t=>{if(!t._refs||!t._refs.bounds||!t._refs.portfolioItem)return;const o=t._refs.bounds,r=o.left+o.width/2,a=o.top+o.height/2,s=(e.mouseX-r)/(o.width/2),n=(e.mouseY-a)/(o.height/2),i=Math.max(-1,Math.min(1,s)),l=Math.max(-1,Math.min(1,n)),f=12*l,m=-12*i;if(t._refs.portfolioItem){const e=`perspective(1000px) rotateX(${f}deg) rotateY(${m}deg) translateZ(0)`;t._refs.portfolioItem.style.transform=e}if(t._refs.imageWrapper){const e=10*l,o=30+20*Math.abs(i*l),r=.2+.1*Math.abs(i*l);t._refs.imageWrapper.style.boxShadow=`\n          0 ${e}px ${o}px rgba(0, 0, 0, ${r}),\n          0 ${.5*e}px ${.5*o}px rgba(0, 0, 0, ${.5*r})\n        `}}),o.forEach(t=>{if(!e.activeItems.has(t)&&t._refs.portfolioItem){const e=t._refs.portfolioItem.style.transform;e&&"translateZ(0)"!==e&&(t._refs.portfolioItem.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0)",t._refs.imageWrapper&&(t._refs.imageWrapper.style.boxShadow=""))}}),e.rafId=requestAnimationFrame(i)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r(),window.addEventListener("portfolio-loaded",()=>{e.rafId&&(cancelAnimationFrame(e.rafId),e.rafId=null),e.activeItems.clear(),r()}),window.addEventListener("beforeunload",()=>{e.rafId&&cancelAnimationFrame(e.rafId)})}();