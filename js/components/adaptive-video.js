class AdaptiveVideoManager{constructor(){this.videos=new Map,this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){document.querySelectorAll("video[data-base-path]").forEach(e=>this.setupAdaptiveVideo(e))}setupAdaptiveVideo(e){const t=e.getAttribute("data-base-path"),i=e.closest(".portfolio-item");if(!i||!t)return;const o=i.getAttribute("data-grid-size"),s=this.getAspectRatioForGridSize(o);this.updateVideoSources(e,t,s),this.videos.set(e,{basePath:t,gridSize:o,aspectRatio:s,portfolioItem:i})}getAspectRatioForGridSize(e){const t={"1x1":"square","2x2":"square","1x2":"tall","3x1":"wide",default:"compatible"};return t[e]||t.default}updateVideoSources(e,t,i){e.querySelectorAll("source").forEach(e=>e.remove()),this.getSourcePaths(t,i).forEach(({src:t,type:i})=>{const o=document.createElement("source");o.src=t,o.type=i,e.appendChild(o)}),e.load()}getSourcePaths(e,t){const i=[];return"compatible"!==t&&i.push({src:`${e}-${t}.webm`,type:"video/webm"},{src:`${e}-${t}.mp4`,type:"video/mp4"}),i.push({src:`${e}-compatible.webm`,type:"video/webm"},{src:`${e}-compatible.mp4`,type:"video/mp4"},{src:`${e}-simple.mp4`,type:"video/mp4"}),i}updateVideoForNewGridSize(e,t){const i=this.videos.get(e);if(!i)return;const o=this.getAspectRatioForGridSize(t);o!==i.aspectRatio&&(this.updateVideoSources(e,i.basePath,o),i.gridSize=t,i.aspectRatio=o)}refresh(){this.videos.clear(),this.setup()}}export default AdaptiveVideoManager;"undefined"!=typeof window&&(window.AdaptiveVideoManager=AdaptiveVideoManager);