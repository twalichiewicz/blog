<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><head><title>Design in Everything - by Thomas Walichiewicz</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><meta name="description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta name="author" content="Thomas Walichiewicz"><meta name="keywords" content="design, portfolio, blog, developer"><link rel="canonical" href="https://twalichiewicz.github.io/js/physics-simulation.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="dns-prefetch" href="https://static.cloudflareinsights.com"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://unpkg.com" crossorigin><link rel="icon" type="image/png" href="/favicon.png"><link rel="apple-touch-icon" href="/favicon.png"><meta name="color-scheme" content="light dark"><meta name="theme-color" media="(prefers-color-scheme: light)" content="rgb(245, 240, 235)"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="rgb(0, 0, 0)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta property="og:type" content="website"><meta property="og:url" content="https://twalichiewicz.github.io/js/physics-simulation.html"><meta property="og:title" content="Thomas Walichiewicz"><meta property="og:description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta property="og:image" content="https://twalichiewicz.github.io/favicon.png"><meta property="og:site_name" content="Thomas Walichiewicz"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://twalichiewicz.github.io/js/physics-simulation.html"><meta name="twitter:title" content="Thomas Walichiewicz"><meta name="twitter:description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta name="twitter:image" content="https://twalichiewicz.github.io/favicon.png"><meta http-equiv="X-Content-Type-Options" content="nosniff"><meta http-equiv="X-Frame-Options" content="SAMEORIGIN"><meta name="referrer" content="strict-origin-when-cross-origin"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://unpkg.com https://cdnjs.cloudflare.com https://static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; img-src 'self' data: https:; font-src 'self' https://cdn.jsdelivr.net; connect-src 'self' https:; media-src 'self'; object-src 'none'; frame-src 'self' https://www.youtube.com https://www.youtube-nocookie.com https://player.vimeo.com; frame-ancestors 'none'; base-uri 'self'; form-action 'self';"><meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow"><link rel="preload" href="/styles/styles.b3d80180.css" as="style"><link rel="stylesheet" href="/styles/styles.b3d80180.css"><style>body:not(.loaded){overflow:hidden}</style><script type="importmap">{
    "imports": {
      "canvas-confetti": "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/+esm",
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
      "three/examples/": "https://unpkg.com/three@0.160.0/examples/"
    }
  }</script><script src="/js/san-diego-namespace.71bb8632.js"></script><script type="module" src="/js/main.1514f216.js"></script><script type="module" src="/js/components/HomeVisuals.2dc02d09.js"></script><script type="module" src="/js/mobile-tabs.9ab05473.js"></script><script type="module" src="/js/carousel.9c675bb9.js"></script><script type="module" src="/js/utils/animations.e3031815.js"></script><script src="/js/project-tabs.6cf158d8.js"></script><script src="/js/project-summary.9976d10c.js"></script><script type="module" src="/js/scroll.d8555030.js"></script><script src="/js/sound-effects.34fe355d.js"></script><script src="/js/screen-wipe-transition.7525f143.js"></script><script src="/js/external-links.07551391.js"></script><script src="/js/project-demo.241c663b.js"></script><script src="/js/project-demo-walkthrough.62a4464b.js"></script><script src="/js/byline-modal.74488a1a.js"></script><script src="/js/portfolio-parallax-optimized.0078931c.js"></script><script src="/js/portfolio-filters.6c245d76.js"></script><script src="/js/portfolio-filters-dropdown.93fd0e8d.js"></script><script src="/js/portfolio-notebook-carousel-state.3a41bf50.js"></script><script src="/js/notebook-skeleton-loader.0f21d14d.js"></script><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://twalichiewicz.github.io/#website",
        "url": "https://twalichiewicz.github.io",
        "name": "Thomas Walichiewicz",
        "description": "Thomas Walichiewicz - Designer, Developer, Thinker",
        "publisher": {
          "@id": "https://twalichiewicz.github.io/#person"
        }
      },
      {
        "@type": "Person",
        "@id": "https://twalichiewicz.github.io/#person",
        "name": "Thomas Walichiewicz",
        "url": "https://twalichiewicz.github.io",
        "sameAs": [
          
          
          
        ],
        "jobTitle": "Designer & Developer",
        "description": "Designer, researcher, and relentless problem solver"
      }
    ]
  }</script><link rel="alternate" type="application/rss+xml" title="Thomas Walichiewicz" href="/rss2.xml"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 8.0.0"></head></head><body><a href="#main-content" class="skip-nav-link">Skip to main content</a><style>.skip-nav-link{position:absolute;top:-40px;left:0;background:var(--text-color,#000);color:var(--background-color,#fff);padding:8px 16px;text-decoration:none;border-radius:0 0 4px 0;z-index:100;font-weight:500;font-size:14px;transition:top .2s ease}.skip-nav-link:focus{top:0;outline:2px solid var(--accent-color,#f0b90b);outline-offset:2px}.skip-nav-link:focus-visible{top:0}[data-theme=dark] .skip-nav-link{background:#fff;color:#000}@media (prefers-reduced-motion:no-preference){.skip-nav-link{transition:top .2s cubic-bezier(.4, 0, .2, 1)}}</style><!DOCTYPE html><html><head><title>Design in Everything - by Thomas Walichiewicz</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><meta name="description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta name="author" content="Thomas Walichiewicz"><meta name="keywords" content="design, portfolio, blog, developer"><link rel="canonical" href="https://twalichiewicz.github.io/js/physics-simulation.html"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com"><link rel="dns-prefetch" href="https://static.cloudflareinsights.com"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://unpkg.com" crossorigin><link rel="icon" type="image/png" href="/favicon.png"><link rel="apple-touch-icon" href="/favicon.png"><meta name="color-scheme" content="light dark"><meta name="theme-color" media="(prefers-color-scheme: light)" content="rgb(245, 240, 235)"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="rgb(0, 0, 0)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta property="og:type" content="website"><meta property="og:url" content="https://twalichiewicz.github.io/js/physics-simulation.html"><meta property="og:title" content="Thomas Walichiewicz"><meta property="og:description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta property="og:image" content="https://twalichiewicz.github.io/favicon.png"><meta property="og:site_name" content="Thomas Walichiewicz"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:url" content="https://twalichiewicz.github.io/js/physics-simulation.html"><meta name="twitter:title" content="Thomas Walichiewicz"><meta name="twitter:description" content="Thomas Walichiewicz - Designer, Developer, Thinker"><meta name="twitter:image" content="https://twalichiewicz.github.io/favicon.png"><meta http-equiv="X-Content-Type-Options" content="nosniff"><meta http-equiv="X-Frame-Options" content="SAMEORIGIN"><meta name="referrer" content="strict-origin-when-cross-origin"><meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://unpkg.com https://cdnjs.cloudflare.com https://static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; img-src 'self' data: https:; font-src 'self' https://cdn.jsdelivr.net; connect-src 'self' https:; media-src 'self'; object-src 'none'; frame-src 'self' https://www.youtube.com https://www.youtube-nocookie.com https://player.vimeo.com; frame-ancestors 'none'; base-uri 'self'; form-action 'self';"><meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow"><link rel="preload" href="/styles/styles.b3d80180.css" as="style"><link rel="stylesheet" href="/styles/styles.b3d80180.css"><style>body:not(.loaded){overflow:hidden}</style><script type="importmap">{
    "imports": {
      "canvas-confetti": "https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/+esm",
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
      "three/examples/": "https://unpkg.com/three@0.160.0/examples/"
    }
  }</script><script src="/js/san-diego-namespace.71bb8632.js"></script><script type="module" src="/js/main.1514f216.js"></script><script type="module" src="/js/components/HomeVisuals.2dc02d09.js"></script><script type="module" src="/js/mobile-tabs.9ab05473.js"></script><script type="module" src="/js/carousel.9c675bb9.js"></script><script type="module" src="/js/utils/animations.e3031815.js"></script><script src="/js/project-tabs.6cf158d8.js"></script><script src="/js/project-summary.9976d10c.js"></script><script type="module" src="/js/scroll.d8555030.js"></script><script src="/js/sound-effects.34fe355d.js"></script><script src="/js/screen-wipe-transition.7525f143.js"></script><script src="/js/external-links.07551391.js"></script><script src="/js/project-demo.241c663b.js"></script><script src="/js/project-demo-walkthrough.62a4464b.js"></script><script src="/js/byline-modal.74488a1a.js"></script><script src="/js/portfolio-parallax-optimized.0078931c.js"></script><script src="/js/portfolio-filters.6c245d76.js"></script><script src="/js/portfolio-filters-dropdown.93fd0e8d.js"></script><script src="/js/portfolio-notebook-carousel-state.3a41bf50.js"></script><script src="/js/notebook-skeleton-loader.0f21d14d.js"></script><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://twalichiewicz.github.io/#website",
        "url": "https://twalichiewicz.github.io",
        "name": "Thomas Walichiewicz",
        "description": "Thomas Walichiewicz - Designer, Developer, Thinker",
        "publisher": {
          "@id": "https://twalichiewicz.github.io/#person"
        }
      },
      {
        "@type": "Person",
        "@id": "https://twalichiewicz.github.io/#person",
        "name": "Thomas Walichiewicz",
        "url": "https://twalichiewicz.github.io",
        "sameAs": [
          
          
          
        ],
        "jobTitle": "Designer & Developer",
        "description": "Designer, researcher, and relentless problem solver"
      }
    ]
  }</script><link rel="alternate" type="application/rss+xml" title="Thomas Walichiewicz" href="/rss2.xml"></head><body><script>!function(){const n=window.location.pathname,o=!document.referrer||!document.referrer.includes(window.location.origin),e=window.performance&&window.performance.navigation&&1===window.performance.navigation.type;(o||e)&&"/"!==n&&(window.location.href="/?post="+encodeURIComponent(n))}()</script><div class="page-transition-overlay"></div><div class="post-wrapper dynamic-loaded" id="main-content"><div class="post-content-wrapper"><article class="substack-post" id="post-content"><header class="post-header"><div class="post-header-container"><h1 class="post-title"></h1><div class="post-byline"><div class="author-info"><div class="author-details"><div class="post-metadata"><time class="post-date" datetime="2026-01-31">Jan 31, 2026 </time><span class="reading-time-separator">Â·</span> <span class="post-reading-time">18 min read</span></div></div></div></div></div></header><div class="post-cover-image"><img src="/img/blogPostDefaultCover.png" alt="" loading="eager" decoding="async" fetchpriority="high"></div><div class="post-content-container"><div class="post-content"><!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Physics Skills Simulation</title><script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script><style>:root{--bg-color:#ffffff;--text-color:#000000;--skill-color:#4a90e2}@media (prefers-color-scheme:dark){:root{--bg-color:#1a1a1a;--text-color:#ffffff;--skill-color:#64b5f6}}body{margin:0;padding:0;overflow:hidden;background:var(--bg-color);color:var(--text-color);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}#canvas-container{width:100vw;height:100dvh;position:relative}canvas{width:100%;height:100%}.controls{position:absolute;top:20px;left:20px;z-index:10;display:flex;gap:10px}button{background:var(--skill-color);color:var(--bg-color);border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:opacity .3s ease}button:hover{opacity:.8}.skill-text{position:absolute;font-weight:700;color:var(--text-color);pointer-events:none;font-size:14px}</style></head><body><div id="canvas-container"><div class="controls"><button id="add-skill">Add Skill</button> <button id="reset">Reset</button></div></div><script>(this||selfs||window).Two=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;var i=Object.prototype.toString,r={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(e){return e},isArguments:function(e){return"[object Arguments]"===i.call(e)},isFunction:function(e){return"[object Function]"===i.call(e)},isString:function(e){return"[object String]"===i.call(e)},isNumber:function(e){return"[object Number]"===i.call(e)},isDate:function(e){return"[object Date]"===i.call(e)},isRegExp:function(e){return"[object RegExp]"===i.call(e)},isError:function(e){return"[object Error]"===i.call(e)},isFinite:function(e){return isFinite(e)&&!isNaN(parseFloat(e))},isNaN:function(e){return r.isNumber(e)&&e!==+e},isBoolean:function(e){return!0===e||!1===e||"[object Boolean]"===i.call(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isEmpty:function(e){return null==e||(v&&(r.isArray(e)||r.isString(e)||r.isArguments(e))?0===e.length:0===r.keys(e).length)},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:Array.isArray||function(e){return"[object Array]"===i.call(e)},isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},toArray:function(e){return e?r.isArray(e)?g.call(e):v(e)?r.map(e,r.identity):r.values(e):[]},range:function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var r=Math.max(Math.ceil((t-e)/i),0),n=Array(r),s=0;s<r;s++,e+=i)n[s]=e;return n},indexOf:function(e,t){if(r.natural.indexOf)return r.natural.indexOf.call(e,t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},has:function(e,t){return null!=e&&hasOwnProperty.call(e,t)},bind:function(e,t){var i=r.natural.bind;if(i&&e.bind===i)return i.apply(e,g.call(arguments,1));var n=g.call(arguments,2);return function(){e.apply(t,n)}},extend:function(e){for(var t=g.call(arguments,1),i=0;i<t.length;i++){var r=t[i];for(var n in r)e[n]=r[n]}return e},defaults:function(e){for(var t=g.call(arguments,1),i=0;i<t.length;i++){var r=t[i];for(var n in r)void 0===e[n]&&(e[n]=r[n])}return e},keys:function(e){if(!r.isObject(e))return[];if(r.natural.keys)return r.natural.keys(e);var t=[];for(var i in e)r.has(e,i)&&t.push(i);return t},values:function(e){for(var t=r.keys(e),i=[],n=0;n<t.length;n++){var s=t[n];i.push(e[s])}return i},each:function(e,t,i){for(var n=i||this,s=!v(e)&&r.keys(e),o=(s||e).length,a=0;a<o;a++){var l=s?s[a]:a;t.call(n,e[l],l,e)}return e},map:function(e,t,i){for(var n=i||this,s=!v(e)&&r.keys(e),o=(s||e).length,a=[],l=0;l<o;l++){var c=s?s[l]:l;a[l]=t.call(n,e[c],c,e)}return a},once:function(e){var t=!1;return function(){return t?e:(t=!0,e.apply(this,arguments))}},after:function(e,t){return function(){for(;--e<1;)return t.apply(this,arguments)}},uniqueId:function(e){var t=++r._indexAmount+"";return e?e+t:t}},n=Math.sin,s=Math.cos,o=(Math.acos,Math.atan2,Math.sqrt),a=(Math.round,Math.abs),l=Math.PI,c=l/2,h=Math.pow,d=Math.min,u=Math.max,f=0,g=r.natural.slice,p=t.performance&&t.performance.now?t.performance:Date,m=Math.pow(2,53)-1,v=function(e){var t,i=null==(t=e)?void 0:t.length;return"number"==typeof i&&0<=i&&i<=m},y={temp:t.document?t.document.createElement("div"):{},hasEventListeners:r.isFunction(t.addEventListener),bind:function(e,t,i,r){return this.hasEventListeners?e.addEventListener(t,i,!!r):e.attachEvent("on"+t,i),y},unbind:function(e,t,i,r){return y.hasEventListeners?e.removeEventListeners(t,i,!!r):e.detachEvent("on"+t,i),y},getRequestAnimationFrame:function(){var e,i=0,n=["ms","moz","webkit","o"],s=t.requestAnimationFrame;if(!s){for(var o=0;o<n.length;o++)s=t[n[o]+"RequestAnimationFrame"]||s,e=t[n[o]+"CancelAnimationFrame"]||t[n[o]+"CancelRequestAnimationFrame"]||e;s=s||function(e,r){var n=(new Date).getTime(),s=Math.max(0,16-(n-i)),o=t.setTimeout(function(){e(n+s)},s);return i=n+s,o}}return s.init=r.once(E),s}},_=t.Two=function(e){var i=r.defaults(e||{},{fullscreen:!1,width:640,height:480,type:_.Types.svg,autostart:!1,darkMode:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches});if(r.each(i,function(e,t){/fullscreen/i.test(t)||/autostart/i.test(t)||(this[t]=e)},this),r.isElement(i.domElement)){var n=i.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+n)||(this.type=_.Types[n])}if(this.renderer=new _[this.type](this),_.Utils.setPlaying.call(this,i.autostart),this.frameCount=0,i.fullscreen){var s=r.bind(M,this);r.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),r.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed",color:i.darkMode?"#fff":"#000",backgroundColor:(i.darkMode,"transparent")}),y.bind(t,"resize",s),s()}else r.isElement(i.domElement)||(this.renderer.setSize(i.width,i.height,this.ratio),this.width=i.width,this.height=i.height);this.renderer.bind(_.Events.resize,r.bind(P,this)),this.scene=this.renderer.scene,_.Instances.push(this),i.autostart&&R.init()};r.extend(_,{root:t,nextFrameID:null,Array:t.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0-beta.4",PublishDate:"2019-01-29T09:17:29+01:00",Identifier:"two-",Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",arc:"A",close:"Z"},Resolution:12,Instances:[],noConflict:function(){return t.Two=e,_},uniqueId:function(){var e=f;return f++,e},Utils:r.extend(r,{performance:p,defineProperty:function(e){var t="_"+e,i="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[t]},set:function(e){this[t]=e,this[i]=!0}})},Image:null,isHeadless:!1,shim:function(e,t){return _.CanvasRenderer.Utils.shim(e),r.isUndefined(t)||(_.Utils.Image=t),_.Utils.isHeadless=!0,e},release:function(e){if(r.isObject(e))return r.isFunction(e.unbind)&&e.unbind(),e.vertices&&(r.isFunction(e.vertices.unbind)&&e.vertices.unbind(),r.each(e.vertices,function(e){r.isFunction(e.unbind)&&e.unbind()})),e.children&&r.each(e.children,function(e){_.Utils.release(e)}),e},xhr:function(e,t){var i=new XMLHttpRequest;return i.open("GET",e),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&t(i.responseText)},i.send(),i},Curve:{CollinearityEpsilon:h(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:t.devicePixelRatio||1,getBackingStoreRatio:function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1},getRatio:function(e){return _.Utils.devicePixelRatio/S(e)},setPlaying:function(e){return this.playing=!!e,this},getComputedMatrix:function(e,t){t=t&&t.identity()||new _.Matrix;for(var i=e,r=[];i&&i._matrix;)r.push(i._matrix),i=i.parent;r.reverse();for(var n=0;n<r.length;n++){var s=r[n].elements;t.multiply(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9])}return t},deltaTransformPoint:function(e,t,i){var r=t*e.a+i*e.c+0,n=t*e.b+i*e.d+0;return new _.Vector(r,n)},decomposeMatrix:function(e){var t=_.Utils.deltaTransformPoint(e,0,1),i=_.Utils.deltaTransformPoint(e,1,0),r=180/Math.PI*Math.atan2(t.y,t.x)-90,n=180/Math.PI*Math.atan2(i.y,i.x);return{translateX:e.e,translateY:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),skewX:r,skewY:n,rotation:r}},extractCSSText:function(e,t){var i,n,s,o;t||(t={}),i=e.split(";");for(var a=0;a<i.length;a++)s=(n=i[a].split(":"))[0],o=n[1],r.isUndefined(s)||r.isUndefined(o)||(t[s]=o.replace(/\s/,""));return t},getSvgStyles:function(e){for(var t={},i=0;i<e.style.length;i++){var r=e.style[i];t[r]=e.style[r]}return t},applySvgViewBox:function(e,t){var i=t.split(/\s/),r=parseFloat(i[0]),n=parseFloat(i[1]),s=parseFloat(i[2]),o=parseFloat(i[3]),a=Math.min(this.width/s,this.height/o);return e.translation.x-=r*a,e.translation.y-=n*a,e.scale=a,e},applySvgAttributes:function(e,i,n){var s,o,a,l,c={},h={},d={};if(t.getComputedStyle){var u=t.getComputedStyle(e);for(s=u.length;s--;)a=u[o=u[s]],r.isUndefined(a)||(c[o]=a)}for(s=0;s<e.attributes.length;s++)l=e.attributes[s],/style/i.test(l.nodeName)?_.Utils.extractCSSText(l.value,d):h[l.nodeName]=l.value;for(o in r.isUndefined(c.opacity)||(c["stroke-opacity"]=c.opacity,c["fill-opacity"]=c.opacity,delete c.opacity),n&&r.defaults(c,n),r.extend(c,h,d),c.visible=!(r.isUndefined(c.display)&&/none/i.test(c.display))||r.isUndefined(c.visibility)&&/hidden/i.test(c.visibility),c)switch(a=c[o],o){case"transform":if(/none/i.test(a))break;var f=e.transform&&e.transform.baseVal&&0<e.transform.baseVal.length?e.transform.baseVal[0].matrix:e.getCTM?e.getCTM():null;if(r.isNull(f))break;var g=_.Utils.decomposeMatrix(f);i.translation.set(g.translateX,g.translateY),i.rotation=g.rotation,i.scale=new _.Vector(g.scaleX,g.scaleY);var p=parseFloat((c.x+"").replace("px")),m=parseFloat((c.y+"").replace("px"));p&&(i.translation.x=p),m&&(i.translation.y=m);break;case"viewBox":_.Utils.applySvgViewBox.call(this,i,a);break;case"visible":i.visible=a;break;case"stroke-linecap":i.cap=a;break;case"stroke-linejoin":i.join=a;break;case"stroke-miterlimit":i.miter=a;break;case"stroke-width":i.linewidth=parseFloat(a);break;case"opacity":case"stroke-opacity":case"fill-opacity":i instanceof _.Group||(i.opacity=parseFloat(a));break;case"fill":case"stroke":/url\(\#.*\)/i.test(a)?i[o]=this.getById(a.replace(/url\(\#(.*)\)/i,"$1")):i[o]=/none/i.test(a)?"transparent":a;break;case"id":i.id=a;break;case"class":case"className":i.classList=a.split(" ")}return c},read:{svg:function(e){var t=_.Utils.read.g.call(this,e);return e.getAttribute("viewBox"),t},g:function(e){var t,i=new _.Group;t=_.Utils.getSvgStyles.call(this,e);for(var r=0,n=e.childNodes.length;r<n;r++){var s=e.childNodes[r],o=s.nodeName;if(!o)return;var a=o.replace(/svg\:/gi,"").toLowerCase();if(a in _.Utils.read){var l=_.Utils.read[a].call(i,s,t);i.add(l)}}return i},polygon:function(e,t){var i=e.getAttribute("points"),r=[];i.replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,i){r.push(new _.Anchor(parseFloat(t),parseFloat(i)))});var n=new _.Path(r,!0).noStroke();return n.fill="currentcolor",_.Utils.applySvgAttributes.call(this,e,n,t),n},polyline:function(e,t){var i=_.Utils.read.polygon.call(this,e,t);return i.closed=!1,i},path:function(e,t){var i,n,s=e.getAttribute("d"),o=new _.Anchor,a=!1,l=!1,c=s.match(/[a-df-z][^a-df-z]*/gi),d=c.length-1;r.each(c.slice(0),function(e,t){var i,r,n,s,o,a,l,h,d,u=e[0],f=u.toLowerCase(),g=e.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),p=[],m=!1;for(o=0;o<g.length;o++)if((i=g[o]).indexOf(".")!==i.lastIndexOf(".")){for(n=(r=i.split("."))[0]+"."+r[1],g.splice(o,1,n),s=2;s<r.length;s++)g.splice(o+s-1,0,"0."+r[s]);m=!0}switch(m&&(e=u+g.join(",")),t<=0&&(c=[]),f){case"h":case"v":1<g.length&&(d=1);break;case"m":case"l":case"t":2<g.length&&(d=2);break;case"s":case"q":4<g.length&&(d=4);break;case"c":6<g.length&&(d=6);break;case"a":7<g.length&&(d=7)}if(d){for(o=0,l=g.length,h=0;o<l;o+=d){if(a=u,0<h)switch(u){case"m":a="l";break;case"M":a="L"}p.push(a+g.slice(o,o+d).join(" ")),h++}c=Array.prototype.concat.apply(c,p)}else c.push(e)});var u=[];if(r.each(c,function(e,t){var s,c,f,g,p,m,v,y,x,b,w,S,C=e[0],A=C.toLowerCase();switch(n=(n=(n=e.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(e,t,i){return parseFloat(t)*h(10,i)})).split(/[\s,]+|(?=\s?[+\-])/),l=C===A,A){case"z":if(d<=t)a=!0;else for(c=o.x,f=o.y,s=new _.Anchor(c,f,void 0,void 0,void 0,void 0,_.Commands.close),t=u.length-1;0<=t;t--){var M=u[t];if(/m/i.test(M.command)){o=M;break}}break;case"m":case"l":i=void 0,c=parseFloat(n[0]),f=parseFloat(n[1]),s=new _.Anchor(c,f,void 0,void 0,void 0,void 0,/m/i.test(A)?_.Commands.move:_.Commands.line),l&&s.addSelf(o),o=s;break;case"h":case"v":var P=/h/i.test(A)?"x":"y",R=/x/i.test(P)?"y":"x";(s=new _.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,_.Commands.line))[P]=parseFloat(n[0]),s[R]=o[R],l&&(s[P]+=o[P]),o=s;break;case"c":case"s":g=o.x,p=o.y,i||(i=new _.Vector),w=/c/i.test(A)?(m=parseFloat(n[0]),v=parseFloat(n[1]),y=parseFloat(n[2]),x=parseFloat(n[3]),b=parseFloat(n[4]),parseFloat(n[5])):(m=(S=k(o,i,l)).x,v=S.y,y=parseFloat(n[0]),x=parseFloat(n[1]),b=parseFloat(n[2]),parseFloat(n[3])),l&&(m+=g,v+=p,y+=g,x+=p,b+=g,w+=p),r.isObject(o.controls)||_.Anchor.AppendCurveProperties(o),o.controls.right.set(m-o.x,v-o.y),s=new _.Anchor(b,w,y-b,x-w,void 0,void 0,_.Commands.curve),i=(o=s).controls.left;break;case"t":case"q":g=o.x,p=o.y,i||(i=new _.Vector),v=i.isZero()?(m=g,p):(m=i.x,i.y),w=/q/i.test(A)?(y=parseFloat(n[0]),x=parseFloat(n[1]),b=parseFloat(n[2]),parseFloat(n[3])):(y=(S=k(o,i,l)).x,x=S.y,b=parseFloat(n[0]),parseFloat(n[1])),l&&(m+=g,v+=p,y+=g,x+=p,b+=g,w+=p),r.isObject(o.controls)||_.Anchor.AppendCurveProperties(o),o.controls.right.set(m-o.x,v-o.y),s=new _.Anchor(b,w,y-b,x-w,void 0,void 0,_.Commands.curve),i=(o=s).controls.left;break;case"a":g=o.x,p=o.y;var E=parseFloat(n[0]),B=parseFloat(n[1]),T=parseFloat(n[2]),F=parseFloat(n[3]),I=parseFloat(n[4]);b=parseFloat(n[5]),w=parseFloat(n[6]),l&&(b+=g,w+=p);var O=new _.Anchor(b,w);O.command=_.Commands.arc,O.rx=E,O.ry=B,O.xAxisRotation=T,O.largeArcFlag=F,O.sweepFlag=I,o=s=O,i=void 0}s&&(r.isArray(s)?u=u.concat(s):u.push(s))}),!(u.length<=1)){(s=new _.Path(u,a,void 0,!0).noStroke()).fill="currentcolor";var f=s.getBoundingClientRect(!0);return f.centroid={x:f.left+f.width/2,y:f.top+f.height/2},r.each(s.vertices,function(e){e.subSelf(f.centroid)}),s.translation.addSelf(f.centroid),_.Utils.applySvgAttributes.call(this,e,s,t),s}},circle:function(e,t){var i=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("r")),s=new _.Circle(i,r,n).noStroke();return s.fill="currentcolor",_.Utils.applySvgAttributes.call(this,e,s,t),s},ellipse:function(e,t){var i=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("rx")),s=parseFloat(e.getAttribute("ry")),o=new _.Ellipse(i,r,n,s).noStroke();return o.fill="currentcolor",_.Utils.applySvgAttributes.call(this,e,o,t),o},rect:function(e,t){var i=parseFloat(e.getAttribute("rx")),n=parseFloat(e.getAttribute("ry"));if(!r.isNaN(i)||!r.isNaN(n))return _.Utils.read["rounded-rect"](e);var s=parseFloat(e.getAttribute("x"))||0,o=parseFloat(e.getAttribute("y"))||0,a=parseFloat(e.getAttribute("width")),l=parseFloat(e.getAttribute("height")),c=a/2,h=l/2,d=new _.Rectangle(s+c,o+h,a,l).noStroke();return d.fill="currentcolor",_.Utils.applySvgAttributes.call(this,e,d,t),d},"rounded-rect":function(e,t){var i=parseFloat(e.getAttribute("x"))||0,r=parseFloat(e.getAttribute("y"))||0,n=parseFloat(e.getAttribute("rx"))||0,s=parseFloat(e.getAttribute("ry"))||0,o=parseFloat(e.getAttribute("width")),a=parseFloat(e.getAttribute("height")),l=o/2,c=a/2,h=new _.Vector(n,s),d=new _.RoundedRectangle(i+l,r+c,o,a,h).noStroke();return d.fill="currentcolor",_.Utils.applySvgAttributes.call(this,e,d,t),d},line:function(e,t){var i=parseFloat(e.getAttribute("x1")),r=parseFloat(e.getAttribute("y1")),n=parseFloat(e.getAttribute("x2")),s=parseFloat(e.getAttribute("y2")),o=new _.Line(i,r,n,s).noFill();return _.Utils.applySvgAttributes.call(this,e,o,t),o},lineargradient:function(e,t){for(var i=parseFloat(e.getAttribute("x1")),n=parseFloat(e.getAttribute("y1")),s=parseFloat(e.getAttribute("x2")),o=parseFloat(e.getAttribute("y2")),a=(s+i)/2,l=(o+n)/2,c=[],h=0;h<e.children.length;h++){var d,u=e.children[h],f=parseFloat(u.getAttribute("offset")),g=u.getAttribute("stop-color"),p=u.getAttribute("stop-opacity"),m=u.getAttribute("style");r.isNull(g)&&(g=(d=!!m&&m.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&1<d.length?d[1]:void 0),r.isNull(p)&&(p=(d=!!m&&m.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<d.length?parseFloat(d[1]):1),c.push(new _.Gradient.Stop(f,g,p))}var v=new _.LinearGradient(i-a,n-l,s-a,o-l,c);return _.Utils.applySvgAttributes.call(this,e,v,t),v}},subdivide:function(e,t,i,r,n,s,o,l,c){var h=(c=c||_.Utils.Curve.RecursionLimit)+1;if(a(e-o)<.001&&a(t-l)<.001)return[new _.Anchor(o,l)];for(var d=[],u=0;u<h;u++){var f=u/h,g=C(f,e,i,n,o),p=C(f,t,r,s,l);d.push(new _.Anchor(g,p))}return d},getComponentOnCubicBezier:function(e,t,i,r,n){var s=1-e;return s*s*s*t+3*s*s*e*i+3*s*e*e*r+e*e*e*n},getCurveLength:function(e,t,i,r,n,s,a,l,c){if(e===i&&t===r&&n===a&&s===l){var h=a-e,d=l-t;return o(h*h+d*d)}var u=9*(i-n)+3*(a-e),f=6*(e+n)-12*i,g=3*(i-e),p=9*(r-s)+3*(l-t),m=6*(t+s)-12*r,v=3*(r-t);return A(function(e){var t=(u*e+f)*e+g,i=(p*e+m)*e+v;return o(t*t+i*i)},0,1,c||_.Utils.Curve.RecursionLimit)},getCurveBoundingBox:function(e,t,i,r,n,s,o,l){for(var c,h,d,u,f,g,p,m,v=[],y=[[],[]],_=0;_<2;++_)if(d=0==_?(h=6*e-12*i+6*n,c=-3*e+9*i-9*n+3*o,3*i-3*e):(h=6*t-12*r+6*s,c=-3*t+9*r-9*s+3*l,3*r-3*t),a(c)<1e-12){if(a(h)<1e-12)continue;0<(u=-d/h)&&u<1&&v.push(u)}else p=h*h-4*d*c,m=Math.sqrt(p),p<0||(0<(f=(-h+m)/(2*c))&&f<1&&v.push(f),0<(g=(-h-m)/(2*c))&&g<1&&v.push(g));for(var x,b=v.length,w=b;b--;)x=1-(u=v[b]),y[0][b]=x*x*x*e+3*x*x*u*i+3*x*u*u*n+u*u*u*o,y[1][b]=x*x*x*t+3*x*x*u*r+3*x*u*u*s+u*u*u*l;return y[0][w]=e,y[1][w]=t,y[0][w+1]=o,y[1][w+1]=l,y[0].length=y[1].length=w+2,{min:{x:Math.min.apply(0,y[0]),y:Math.min.apply(0,y[1])},max:{x:Math.max.apply(0,y[0]),y:Math.max.apply(0,y[1])}}},integrate:function(e,t,i,r){for(var n=_.Utils.Curve.abscissas[r-2],s=_.Utils.Curve.weights[r-2],o=.5*(i-t),a=o+t,l=0,c=r+1>>1,h=1&r?s[l++]*e(a):0;l<c;){var d=o*n[l];h+=s[l++]*(e(a+d)+e(a-d))}return o*h},getCurveFromPoints:function(e,t){for(var i=e.length,n=i-1,s=0;s<i;s++){var o=e[s];r.isObject(o.controls)||_.Anchor.AppendCurveProperties(o);var a=t?w(s-1,i):u(s-1,0),l=t?w(s+1,i):d(s+1,n),c=e[a],h=o,f=e[l];b(c,h,f),h.command=0===s?_.Commands.move:_.Commands.curve}},getControlPoints:function(e,t,i){var o=_.Vector.angleBetween(e,t),a=_.Vector.angleBetween(i,t),h=_.Vector.distanceBetween(e,t),d=_.Vector.distanceBetween(i,t),u=(o+a)/2;return h<1e-4||d<1e-4?r.isBoolean(t.relative)&&!t.relative&&(t.controls.left.copy(t),t.controls.right.copy(t)):(h*=.33,d*=.33,a<o?u+=c:u-=c,t.controls.left.x=s(u)*h,t.controls.left.y=n(u)*h,u-=l,t.controls.right.x=s(u)*d,t.controls.right.y=n(u)*d,r.isBoolean(t.relative)&&!t.relative&&(t.controls.left.x+=t.x,t.controls.left.y+=t.y,t.controls.right.x+=t.x,t.controls.right.y+=t.y)),t},getAnchorsFromArcData:function(e,t,i,n,s,o,a){(new _.Matrix).translate(e.x,e.y).rotate(t);var l=_.Resolution;return r.map(r.range(l),function(e){var t=(e+1)/l;a&&(t=1-t);var r=t*o+s,c=i*Math.cos(r),h=n*Math.sin(r),d=new _.Anchor(c,h);return _.Anchor.AppendCurveProperties(d),d.command=_.Commands.line,d})},lerp:function(e,t,i){return i*(t-e)+e},toFixed:function(e){return Math.floor(1e3*e)/1e3},mod:function(e,t){for(;e<0;)e+=t;return e%t},Collection:function(){Array.call(this),1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(e){this.name="two.js",this.message=e},Events:{on:function(e,t){return this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push(t),this},off:function(e,t){if(!this._events)return this;if(!e&&!t)return this._events={},this;for(var i=e?[e]:r.keys(this._events),n=0,s=i.length;n<s;n++){e=i[n];var o=this._events[e];if(o){var a=[];if(t)for(var l=0,c=o.length;l<c;l++){var h=o[l];h=h.handler?h.handler:h,t&&t!==h&&a.push(h)}this._events[e]=a}}return this},trigger:function(e){if(!this._events)return this;var t=g.call(arguments,1),i=this._events[e];return i&&x(this,i,t),this},listen:function(e,t,i){return e&&e.on(t,ev),this},ignore:function(e,t,i){return e.off(t,i),this}}})}),_.Utils.Events.bind=_.Utils.Events.on,_.Utils.Events.unbind=_.Utils.Events.off;var x=function(e,t,i){var r;switch(i.length){case 0:r=function(r){t[r].call(e,i[0])};break;case 1:r=function(r){t[r].call(e,i[0],i[1])};break;case 2:r=function(r){t[r].call(e,i[0],i[1],i[2])};break;case 3:r=function(r){t[r].call(e,i[0],i[1],i[2],i[3])};break;default:r=function(r){t[r].apply(e,i)}}for(var n=0;n<t.length;n++)r(n)};_.Utils.Error.prototype=new Error,_.Utils.Error.prototype.constructor=_.Utils.Error,_.Utils.Collection.prototype=new Array,_.Utils.Collection.prototype.constructor=_.Utils.Collection,r.extend(_.Utils.Collection.prototype,_.Utils.Events,{pop:function(){var e=Array.prototype.pop.apply(this,arguments);return this.trigger(_.Events.remove,[e]),e},shift:function(){var e=Array.prototype.shift.apply(this,arguments);return this.trigger(_.Events.remove,[e]),e},push:function(){var e=Array.prototype.push.apply(this,arguments);return this.trigger(_.Events.insert,arguments),e},unshift:function(){var e=Array.prototype.unshift.apply(this,arguments);return this.trigger(_.Events.insert,arguments),e},splice:function(){var e,t=Array.prototype.splice.apply(this,arguments);return this.trigger(_.Events.remove,t),2<arguments.length&&(e=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(_.Events.insert,e),this.trigger(_.Events.order)),t},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(_.Events.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(_.Events.order),this}}),_.Utils.getAnchorsFromArcData;var b=_.Utils.getControlPoints,w=(_.Utils.getCurveFromPoints,_.Utils.solveSegmentIntersection,_.Utils.decoupleShapes,_.Utils.mod),S=_.Utils.getBackingStoreRatio,C=_.Utils.getComponentOnCubicBezier,A=(_.Utils.getCurveLength,_.Utils.integrate),k=_.Utils.getReflection;function M(){var e=document.body.getBoundingClientRect(),t=this.width=e.width,i=this.height=e.height;this.renderer.setSize(t,i,this.ratio)}function P(e,t){this.width=e,this.height=t,this.trigger(_.Events.resize,e,t)}r.extend(_.prototype,_.Utils.Events,{constructor:_,appendTo:function(e){return e.appendChild(this.renderer.domElement),this},play:function(){return _.Utils.setPlaying.call(this,!0),R.init(),this.trigger(_.Events.play)},pause:function(){return this.playing=!1,this.trigger(_.Events.pause)},update:function(){var e=!!this._lastFrame,t=p.now();e&&(this.timeDelta=parseFloat((t-this._lastFrame).toFixed(3))),this._lastFrame=t;var i=this.width,r=this.height,n=this.renderer;return i===n.width&&r===n.height||n.setSize(i,r,this.ratio),this.trigger(_.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(_.Events.render,this.frameCount++)},add:function(e){var t=e;return t instanceof Array||(t=r.toArray(arguments)),this.scene.add(t),this},remove:function(e){var t=e;return t instanceof Array||(t=r.toArray(arguments)),this.scene.remove(t),this},clear:function(){return this.scene.remove(this.scene.children),this},makeLine:function(e,t,i,r){var n=new _.Line(e,t,i,r);return this.scene.add(n),n},makeRectangle:function(e,t,i,r){var n=new _.Rectangle(e,t,i,r);return this.scene.add(n),n},makeRoundedRectangle:function(e,t,i,r,n){var s=new _.RoundedRectangle(e,t,i,r,n);return this.scene.add(s),s},makeCircle:function(e,t,i){var r=new _.Circle(e,t,i);return this.scene.add(r),r},makeEllipse:function(e,t,i,r){var n=new _.Ellipse(e,t,i,r);return this.scene.add(n),n},makeStar:function(e,t,i,r,n){var s=new _.Star(e,t,i,r,n);return this.scene.add(s),s},makeCurve:function(e){var t=arguments.length,i=e;if(!r.isArray(e)){i=[];for(var n=0;n<t;n+=2){var s=arguments[n];if(!r.isNumber(s))break;var o=arguments[n+1];i.push(new _.Anchor(s,o))}}var a=arguments[t-1],l=new _.Path(i,!(r.isBoolean(a)?a:void 0),!0),c=l.getBoundingClientRect();return l.center().translation.set(c.left+c.width/2,c.top+c.height/2),this.scene.add(l),l},makePolygon:function(e,t,i,r){var n=new _.Polygon(e,t,i,r);return this.scene.add(n),n},makeArcSegment:function(e,t,i,r,n,s,o){var a=new _.ArcSegment(e,t,i,r,n,s,o);return this.scene.add(a),a},makePath:function(e){var t=arguments.length,i=e;if(!r.isArray(e)){i=[];for(var n=0;n<t;n+=2){var s=arguments[n];if(!r.isNumber(s))break;var o=arguments[n+1];i.push(new _.Anchor(s,o))}}var a=arguments[t-1],l=new _.Path(i,!(r.isBoolean(a)?a:void 0)),c=l.getBoundingClientRect();return l.center().translation.set(c.left+c.width/2,c.top+c.height/2),this.scene.add(l),l},makeText:function(e,t,i,r){var n=new _.Text(e,t,i,r);return this.add(n),n},makeSprite:function(e,t,i,r,n,s,o){var a=new _.Sprite(e,t,i,r,n,s);return o&&a.play(),this.add(a),a},makeImageSequence:function(e,t,i,r,n){var s=new _.ImageSequence(e,t,i,r);return n&&s.play(),this.add(s),s},makeTexture:function(e,t){return new _.Texture(e,t)},makeGroup:function(e){var t=e;t instanceof Array||(t=r.toArray(arguments));var i=new _.Group;return this.scene.add(i),i.add(t),i},interpret:function(e,t,i){var r=e.tagName.toLowerCase();if(i=void 0===i||i,!(r in _.Utils.read))return null;var n=_.Utils.read[r].call(this,e);return i&&this.add(t&&n instanceof _.Group?n.children:n),n},load:function(e,t){var i,n,s,o=new _.Group,a=r.bind(function(e){for(y.temp.innerHTML=e,n=0;n<y.temp.children.length;n++)if(i=y.temp.children[n],/svg/i.test(i.nodeName))for(s=0;s<i.children.length;s++)o.add(this.interpret(i.children[s]));else o.add(this.interpret(i));if(r.isFunction(t)){var a=y.temp.children.length<=1?y.temp.children[0]:y.temp.children;t(o,a)}},this);return/.*\.svg$/gi.test(e)?_.Utils.xhr(e,a):a(e),o}});var R=y.getRequestAnimationFrame();function E(){for(var e=0;e<_.Instances.length;e++){var t=_.Instances[e];t.playing&&t.update()}_.nextFrameID=R(E)}return"undefined"!=typeof module&&module.exports?module.exports=_:"function"==typeof define&&define.amd&&define("two",[],function(){return _}),_}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Registry=function(){this.map={}};t.extend(i.prototype,{constructor:i,add:function(e,t){return this.map[e]=t,this},remove:function(e){return delete this.map[e],this},get:function(e){return this.map[e]},contains:function(e){return e in this.map}})}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Vector=function(e,t){this.x=e||0,this.y=t||0};t.extend(i,{zero:new e.Vector,add:function(e,t){return new i(e.x+t.x,e.y+t.y)},sub:function(e,t){return new i(e.x-t.x,e.y-t.y)},subtract:function(e,t){return i.sub(e,t)},ratioBetween:function(e,t){return(e.x*t.x+e.y*t.y)/(e.length()*t.length())},angleBetween:function(e,t){var i,r;return r=4<=arguments.length?(i=e-arguments[2],t-arguments[3]):(i=e.x-t.x,e.y-t.y),Math.atan2(r,i)},distanceBetween:function(e,t){return Math.sqrt(i.distanceBetweenSquared(e,t))},distanceBetweenSquared:function(e,t){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r},MakeObservable:function(i){i.bind=i.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",n),Object.defineProperty(this,"y",s),t.extend(this,r),this._bound=!0),e.Utils.Events.bind.apply(this,arguments),this}}}),t.extend(i.prototype,e.Utils.Events,{constructor:i,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new i(this.x,this.y)},add:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x+=e,this.y+=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=i)),this},addSelf:function(e){return this.add.apply(this,arguments)},sub:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x-=e,this.y-=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=i)),this},subtract:function(){return this.sub.apply(this,arguments)},subSelf:function(e){return this.sub.apply(this,arguments)},subtractSelf:function(e){return this.sub.apply(this,arguments)},multiply:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x*=e,this.y*=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=i)),this},multiplySelf:function(e){return this.multiply.apply(this,arguments)},multiplyScalar:function(e){return this.multiply(e)},divide:function(e,i){return arguments.length<=0||(arguments.length<=1?t.isNumber(e)?(this.x/=e,this.y/=e):e&&t.isNumber(e.x)&&t.isNumber(e.y)&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=i),t.isNaN(this.x)&&(this.x=0),t.isNaN(this.y)&&(this.y=0)),this},divideSelf:function(e){return this.divide.apply(this,arguments)},divideScalar:function(e){return this.divide(e)},negate:function(){return this.multiply(-1)},dot:function(e){return this.x*e.x+this.y*e.y},length:function(){return Math.sqrt(this.lengthSquared())},lengthSquared:function(){return this.x*this.x+this.y*this.y},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e,t){return t=void 0===t?1e-4:t,this.distanceTo(e)<t},lerp:function(e,t){var i=(e.x-this.x)*t+this.x,r=(e.y-this.y)*t+this.y;return this.set(i,r)},isZero:function(e){return e=void 0===e?1e-4:e,this.length()<e},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this.x=this.x*t-this.y*i,this.y=this.x*i+this.y*t,this}});var r={constructor:i,set:function(t,i){return this._x=t,this._y=i,this.trigger(e.Events.change)},copy:function(t){return this._x=t.x,this._y=t.y,this.trigger(e.Events.change)},clear:function(){return this._x=0,this._y=0,this.trigger(e.Events.change)},clone:function(){return new i(this._x,this._y)},add:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x+=i,this._y+=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x+=i.x,this._y+=i.y):(this._x+=i,this._y+=r),this.trigger(e.Events.change))},sub:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x-=i,this._y-=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x-=i.x,this._y-=i.y):(this._x-=i,this._y-=r),this.trigger(e.Events.change))},multiply:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x*=i,this._y*=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x*=i.x,this._y*=i.y):(this._x*=i,this._y*=r),this.trigger(e.Events.change))},divide:function(i,r){return arguments.length<=0?this:(arguments.length<=1?t.isNumber(i)?(this._x/=i,this._y/=i):i&&t.isNumber(i.x)&&t.isNumber(i.y)&&(this._x/=i.x,this._y/=i.y):(this._x/=i,this._y/=r),t.isNaN(this._x)&&(this._x=0),t.isNaN(this._y)&&(this._y=0),this.trigger(e.Events.change))},dot:function(e){return this._x*e.x+this._y*e.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},distanceToSquared:function(e){var t=this._x-e.x,i=this._y-e.y;return t*t+i*i},lerp:function(e,t){var i=(e.x-this._x)*t+this._x,r=(e.y-this._y)*t+this._y;return this.set(i,r)},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);return this._x=this._x*t-this._y*i,this._y=this._x*i+this._y*t,this}},n={enumerable:!0,get:function(){return this._x},set:function(t){this._x=t,this.trigger(e.Events.change,"x")}},s={enumerable:!0,get:function(){return this._y},set:function(t){this._y=t,this.trigger(e.Events.change,"y")}};i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Commands,i=e.Utils,r=e.Anchor=function(r,n,s,o,a,l,c){e.Vector.call(this,r,n),this._broadcast=i.bind(function(){this.trigger(e.Events.change)},this),this._command=c||t.move,this._relative=!0;var h=i.isNumber(s),d=i.isNumber(o),u=i.isNumber(a),f=i.isNumber(l);(h||d||u||f)&&e.Anchor.AppendCurveProperties(this),h&&(this.controls.left.x=s),d&&(this.controls.left.y=o),u&&(this.controls.right.x=a),f&&(this.controls.right.y=l)};i.extend(e.Anchor,{AppendCurveProperties:function(t){t.relative=!0,t.controls={},t.controls.left=new e.Vector(0,0),t.controls.right=new e.Vector(0,0)},MakeObservable:function(s){Object.defineProperty(s,"command",{enumerable:!0,get:function(){return this._command},set:function(n){return this._command=n,this._command!==t.curve||i.isObject(this.controls)||r.AppendCurveProperties(this),this.trigger(e.Events.change)}}),Object.defineProperty(s,"relative",{enumerable:!0,get:function(){return this._relative},set:function(t){return this._relative==t?this:(this._relative=!!t,this.trigger(e.Events.change))}}),i.extend(s,e.Vector.prototype,n),s.bind=s.on=function(){var t=this._bound;e.Vector.prototype.bind.apply(this,arguments),t||i.extend(this,n)}}});var n={constructor:e.Anchor,listen:function(){return i.isObject(this.controls)||e.Anchor.AppendCurveProperties(this),this.controls.left.bind(e.Events.change,this._broadcast),this.controls.right.bind(e.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(e.Events.change,this._broadcast),this.controls.right.unbind(e.Events.change,this._broadcast),this},copy:function(t){return this.x=t.x,this.y=t.y,i.isString(t.command)&&(this.command=t.command),i.isObject(t.controls)&&(i.isObject(this.controls)||e.Anchor.AppendCurveProperties(this),this.controls.left.copy(t.controls.left),this.controls.right.copy(t.controls.right)),i.isBoolean(t.relative)&&(this.relative=t.relative),this.command===e.Commands.arc&&(this.rx=t.rx,this.ry=t.ry,this.xAxisRotation=t.xAxisRotation,this.largeArcFlag=t.largeArcFlag,this.sweepFlag=t.sweepFlag),this},clone:function(){var t=this.controls,i=new e.Anchor(this.x,this.y,t&&t.left.x,t&&t.left.y,t&&t.right.x,t&&t.right.y,this.command);return i.relative=this._relative,i},toObject:function(){var e={x:this.x,y:this.y};return this._command&&(e.command=this._command),this._relative&&(e.relative=this._relative),this.controls&&(e.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),e},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y,this._command,this._relative?1:0].join(", "):[this._x,this._y].join(", ")}};e.Anchor.MakeObservable(e.Anchor.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=Math.cos,i=Math.sin,r=Math.tan,n=e.Utils,s=n.toFixed,o=[],a=e.Matrix=function(t,i,r,s,o,a){this.elements=new e.Array(9);var l=t;n.isArray(l)||(l=n.toArray(arguments)),this.identity(),0<l.length&&this.set(l)};n.extend(a,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(t,i,r){if(i.length<=3){var n=t,s=i[0]||0,o=i[1]||0,a=i[2]||0;return{x:n[0]*s+n[1]*o+n[2]*a,y:n[3]*s+n[4]*o+n[5]*a,z:n[6]*s+n[7]*o+n[8]*a}}var l=t[0],c=t[1],h=t[2],d=t[3],u=t[4],f=t[5],g=t[6],p=t[7],m=t[8],v=i[0],y=i[1],_=i[2],x=i[3],b=i[4],w=i[5],S=i[6],C=i[7],A=i[8];return(r=r||new e.Array(9))[0]=l*v+c*x+h*S,r[1]=l*y+c*b+h*C,r[2]=l*_+c*w+h*A,r[3]=d*v+u*x+f*S,r[4]=d*y+u*b+f*C,r[5]=d*_+u*w+f*A,r[6]=g*v+p*x+m*S,r[7]=g*y+p*b+m*C,r[8]=g*_+p*w+m*A,r}}),n.extend(a.prototype,e.Utils.Events,{constructor:a,manual:!1,set:function(t){var i=t;return 1<arguments.length&&(i=n.toArray(arguments)),this.elements[0]=i[0],this.elements[1]=i[1],this.elements[2]=i[2],this.elements[3]=i[3],this.elements[4]=i[4],this.elements[5]=i[5],this.elements[6]=i[6],this.elements[7]=i[7],this.elements[8]=i[8],this.trigger(e.Events.change)},identity:function(){return this.elements[0]=a.Identity[0],this.elements[1]=a.Identity[1],this.elements[2]=a.Identity[2],this.elements[3]=a.Identity[3],this.elements[4]=a.Identity[4],this.elements[5]=a.Identity[5],this.elements[6]=a.Identity[6],this.elements[7]=a.Identity[7],this.elements[8]=a.Identity[8],this.trigger(e.Events.change)},multiply:function(t,i,r,n,s,o,a,l,c){var h=arguments,d=h.length;if(d<=1)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(e.Events.change);if(d<=3)return t=t||0,i=i||0,r=r||0,{x:(s=this.elements)[0]*t+s[1]*i+s[2]*r,y:s[3]*t+s[4]*i+s[5]*r,z:s[6]*t+s[7]*i+s[8]*r};var u=this.elements,f=h,g=u[0],p=u[1],m=u[2],v=u[3],y=u[4],_=u[5],x=u[6],b=u[7],w=u[8],S=f[0],C=f[1],A=f[2],k=f[3],M=f[4],P=f[5],R=f[6],E=f[7],B=f[8];return this.elements[0]=g*S+p*k+m*R,this.elements[1]=g*C+p*M+m*E,this.elements[2]=g*A+p*P+m*B,this.elements[3]=v*S+y*k+_*R,this.elements[4]=v*C+y*M+_*E,this.elements[5]=v*A+y*P+_*B,this.elements[6]=x*S+b*k+w*R,this.elements[7]=x*C+b*M+w*E,this.elements[8]=x*A+b*P+w*B,this.trigger(e.Events.change)},inverse:function(t){var i=this.elements;t=t||new e.Matrix;var r=i[0],n=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=i[6],h=i[7],d=i[8],u=d*a-l*h,f=-d*o+l*c,g=h*o-a*c,p=r*u+n*f+s*g;return p?(p=1/p,t.elements[0]=u*p,t.elements[1]=(-d*n+s*h)*p,t.elements[2]=(l*n-s*a)*p,t.elements[3]=f*p,t.elements[4]=(d*r-s*c)*p,t.elements[5]=(-l*r+s*o)*p,t.elements[6]=g*p,t.elements[7]=(-h*r+n*c)*p,t.elements[8]=(a*r-n*o)*p,t):null},scale:function(e,t){return arguments.length<=1&&(t=e),this.multiply(e,0,0,0,t,0,0,0,1)},rotate:function(e){var r=t(e),n=i(e);return this.multiply(r,-n,0,n,r,0,0,0,1)},translate:function(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)},skewX:function(e){var t=r(e);return this.multiply(1,t,0,0,1,0,0,0,1)},skewY:function(e){var t=r(e);return this.multiply(1,0,0,t,1,0,0,0,1)},toString:function(e){return o.length=0,this.toArray(e,o),o.join(" ")},toArray:function(e,t){var i=this.elements,r=!!t,n=s(i[0]),o=s(i[1]),a=s(i[2]),l=s(i[3]),c=s(i[4]),h=s(i[5]);if(e){var d=s(i[6]),u=s(i[7]),f=s(i[8]);return r?(t[0]=n,t[1]=l,t[2]=d,t[3]=o,t[4]=c,t[5]=u,t[6]=a,t[7]=h,void(t[8]=f)):[n,l,d,o,c,u,a,h,f]}return r?(t[0]=n,t[1]=l,t[2]=o,t[3]=c,t[4]=a,void(t[5]=h)):[n,l,o,c,a,h]},clone:function(){var t,i,r,n,s,o,a,l,c;t=this.elements[0],i=this.elements[1],r=this.elements[2],n=this.elements[3],s=this.elements[4],o=this.elements[5],a=this.elements[6],l=this.elements[7],c=this.elements[8];var h=new e.Matrix(t,i,r,n,s,o,a,l,c);return h.manual=this.manual,h}})}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils.mod,i=e.Utils.toFixed,r=e.Utils,n={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(e,t){var i=e,s=document.createElementNS(n.ns,i);return"svg"===i&&(t=r.defaults(t||{},{version:n.version})),r.isEmpty(t)||n.setAttributes(s,t),s},setAttributes:function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)/href/.test(i[r])?e.setAttributeNS(n.xlink,i[r],t[i[r]]):e.setAttribute(i[r],t[i[r]]);return this},removeAttributes:function(e,t){for(var i in t)e.removeAttribute(i);return this},toString:function(r,n){for(var s,o=r.length,a=o-1,l="",c=0;c<o;c++){var h,d,u,f,g,p,m,v,y,_,x,b,w,S,C=r[c],A=n?t(c-1,o):Math.max(c-1,0),k=n?t(c+1,o):Math.min(c+1,a),M=r[A],P=r[k],R=i(C.x),E=i(C.y);switch(C.command){case e.Commands.close:h=e.Commands.close;break;case e.Commands.arc:_=C.rx,x=C.ry,b=C.xAxisRotation,w=C.largeArcFlag,S=C.sweepFlag,h=e.Commands.arc+" "+_+" "+x+" "+b+" "+w+" "+S+" "+R+" "+E;break;case e.Commands.curve:p=M.controls&&M.controls.right||e.Vector.zero,m=C.controls&&C.controls.left||e.Vector.zero,u=M.relative?(d=i(p.x+M.x),i(p.y+M.y)):(d=i(p.x),i(p.y)),g=C.relative?(f=i(m.x+C.x),i(m.y+C.y)):(f=i(m.x),i(m.y)),h=(0===c?e.Commands.move:e.Commands.curve)+" "+d+" "+u+" "+f+" "+g+" "+R+" "+E;break;case e.Commands.move:s=C,h=e.Commands.move+" "+R+" "+E;break;default:h=C.command+" "+R+" "+E}a<=c&&n&&(C.command===e.Commands.curve&&(P=s,v=C.controls&&C.controls.right||C,y=P.controls&&P.controls.left||P,u=C.relative?(d=i(v.x+C.x),i(v.y+C.y)):(d=i(v.x),i(v.y)),g=P.relative?(f=i(y.x+P.x),i(y.y+P.y)):(f=i(y.x),i(y.y)),h+=" C "+d+" "+u+" "+f+" "+g+" "+(R=i(P.x))+" "+(E=i(P.y))),C.command!==e.Commands.close&&(h+=" Z")),l+=h+" "}return l},getClip:function(e){var t=e._renderer.clip;if(!t){for(var i=e;i.parent;)i=i.parent;t=e._renderer.clip=n.createElement("clipPath"),i.defs.appendChild(t)}return t},group:{appendChild:function(e){var t=e._renderer.elem;if(t){var i=t.nodeName;!i||/(radial|linear)gradient/i.test(i)||e._clip||this.elem.appendChild(t)}},removeChild:function(e){var t=e._renderer.elem;t&&t.parentNode==this.elem&&t.nodeName&&(e._clip||this.elem.removeChild(t))},orderChild:function(e){this.elem.appendChild(e._renderer.elem)},renderChild:function(e){n[e._renderer.type].render.call(e,this)},render:function(e){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=n.createElement("g",{id:this.id}),e.appendChild(this._renderer.elem));var t=this._matrix.manual||this._flagMatrix,i={domElement:e,elem:this._renderer.elem};t&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var r=0;r<this.children.length;r++){var s=this.children[r];n[s._renderer.type].render.call(s,e)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagClassName&&this._renderer.elem.setAttribute("class",this._className),this._flagAdditions&&this.additions.forEach(n.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(n.group.removeChild,i),this._flagOrder&&this.children.forEach(n.group.orderChild,i),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(e){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=n.toString(this._renderer.vertices,this._closed);t.d=i}if(this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this._className),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this._flagCap&&(t["stroke-linecap"]=this._cap),this._flagJoin&&(t["stroke-linejoin"]=this._join),this._flagMiter&&(t["stroke-miterlimit"]=this._miter),this.dashes&&0<this.dashes.length&&(t["stroke-dasharray"]=this.dashes.join(" ")),this._renderer.elem?n.setAttributes(this._renderer.elem,t):(t.id=this.id,this._renderer.elem=n.createElement("path",t),e.appendChild(this._renderer.elem)),this._flagClip){var r=n.getClip(this),s=this._renderer.elem;this._clip?(s.removeAttribute("id"),r.setAttribute("id",this.id),r.appendChild(s)):(r.removeAttribute("id"),s.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(s))}return this.flagReset()}},text:{render:function(e){this._update();var t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(t["font-family"]=this._family),this._flagSize&&(t["font-size"]=this._size),this._flagLeading&&(t["line-height"]=this._leading),this._flagAlignment&&(t["text-anchor"]=n.alignments[this._alignment]||this._alignment),this._flagBaseline&&(t["alignment-baseline"]=t["dominant-baseline"]=this._baseline),this._flagStyle&&(t["font-style"]=this._style),this._flagWeight&&(t["font-weight"]=this._weight),this._flagDecoration&&(t["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,e,!0)),this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,e,!0)),this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t.opacity=this._opacity),this._flagClassName&&(t.class=this._className),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&0<this.dashes.length&&(t["stroke-dasharray"]=this.dashes.join(" ")),this._renderer.elem?n.setAttributes(this._renderer.elem,t):(t.id=this.id,this._renderer.elem=n.createElement("text",t),e.defs.appendChild(this._renderer.elem)),this._flagClip){var i=n.getClip(this),r=this._renderer.elem;this._clip?(r.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(r)):(i.removeAttribute("id"),r.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(r))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},texture:{render:function(t,i){i||this._update();var s={},o={x:0,y:0},a=this.image;if(this._flagLoaded&&this.loaded)switch(a.nodeName.toLowerCase()){case"canvas":o.href=o["xlink:href"]=a.toDataURL("image/png");break;case"img":case"image":o.href=o["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(s.x=this._offset.x,s.y=this._offset.y,a&&(s.x-=a.width/2,s.y-=a.height/2,this._scale instanceof e.Vector?(s.x*=this._scale.x,s.y*=this._scale.y):(s.x*=this._scale,s.y*=this._scale)),0<s.x&&(s.x*=-1),0<s.y&&(s.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(s.width=0,s.height=0,a)){if("no-repeat"===(o.width=s.width=a.width,o.height=s.height=a.height,this._repeat))s.width+=1,s.height+=1;this._scale instanceof e.Vector?(s.width*=this._scale.x,s.height*=this._scale.y):(s.width*=this._scale,s.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?r.isEmpty(o)||n.setAttributes(this._renderer.image,o):this._renderer.image=n.createElement("image",o)),this._renderer.elem?r.isEmpty(s)||n.setAttributes(this._renderer.elem,s):(s.id=this.id,s.patternUnits="userSpaceOnUse",this._renderer.elem=n.createElement("pattern",s),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},s=e[e.Types.svg]=function(t){this.domElement=t.domElement||n.createElement("svg"),this.scene=new e.Group,(this.scene.parent=this).defs=n.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};r.extend(s,{Utils:n}),r.extend(s.prototype,e.Utils.Events,{constructor:s,setSize:function(t,i){return this.width=t,this.height=i,n.setAttributes(this.domElement,{width:t,height:i}),this.trigger(e.Events.resize,t,i)},render:function(){return n.group.render.call(this.scene,this.domElement),this}})}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils.mod,i=e.Utils.toFixed,r=e.Utils.getRatio,n=e.Utils,s=[],o=2*Math.PI,a=Math.max,l=Math.min,c=Math.abs,h=Math.sin,d=Math.cos,u=Math.acos,f=Math.sqrt,g=function(e){return 1==e[0]&&0==e[3]&&0==e[1]&&1==e[4]&&0==e[2]&&0==e[5]},p={isHidden:/(none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(e,t){return e.tagName=e.nodeName=t||"canvas",e.nodeType=1,e.getAttribute=function(e){return this[e]},e.setAttribute=function(e,t){return this[e]=t,this},e},group:{renderChild:function(e){p[e._renderer.type].render.call(e,this.ctx,!0,this.clip)},render:function(e){this._update();var t=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);var r=g(t),n=this._mask;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=e,r||(e.save(),e.transform(t[0],t[3],t[1],t[4],t[2],t[5])),n&&p[n._renderer.type].render.call(n,e,!0),0<this.opacity&&0!==this.scale)for(var s=0;s<this.children.length;s++){var o=this.children[s];p[o._renderer.type].render.call(o,e)}return r||e.restore(),this.flagReset()}},path:{render:function(r,o,l){var c,h,d,u,f,m,v,y,_,x,b,w,S,C,A,k,M,P,R,E,B,T,F,I,O,U,L,V,N,j,G,q,D;if(this._update(),c=this._matrix.elements,h=this._stroke,d=this._linewidth,u=this._fill,f=this._opacity*this.parent._renderer.opacity,m=this._visible,v=this._cap,y=this._join,_=this._miter,x=this._closed,S=(w=(b=this._renderer.vertices).length)-1,G=g(c),D=this.dashes,j=this._clip,!o&&(!m||j))return this;G||(r.save(),r.transform(c[0],c[3],c[1],c[4],c[2],c[5])),u&&(n.isString(u)?r.fillStyle=u:(p[u._renderer.type].render.call(u,r),r.fillStyle=u._renderer.effect)),h&&(n.isString(h)?r.strokeStyle=h:(p[h._renderer.type].render.call(h,r),r.strokeStyle=h._renderer.effect)),d&&(r.lineWidth=d),_&&(r.miterLimit=_),y&&(r.lineJoin=y),v&&(r.lineCap=v),n.isNumber(f)&&(r.globalAlpha=f),D&&0<D.length&&r.setLineDash(D),r.beginPath();for(var W=0;W<b.length;W++)switch(M=b[W],V=i(M.x),N=i(M.y),M.command){case e.Commands.close:r.closePath();break;case e.Commands.arc:var z=M.rx,H=M.ry,X=M.xAxisRotation,Y=M.largeArcFlag,K=M.sweepFlag;k=b[A=x?t(W-1,w):a(W-1,0)];var Q=i(k.x),Z=i(k.y);p.renderSvgArcCommand(r,Q,Z,z,H,Y,K,X,V,N);break;case e.Commands.curve:A=x?t(W-1,w):Math.max(W-1,0),C=x?t(W+1,w):Math.min(W+1,S),k=b[A],P=b[C],I=k.controls&&k.controls.right||e.Vector.zero,O=M.controls&&M.controls.left||e.Vector.zero,F=k._relative?(T=I.x+i(k.x),I.y+i(k.y)):(T=i(I.x),i(I.y)),B=M._relative?(E=O.x+i(M.x),O.y+i(M.y)):(E=i(O.x),i(O.y)),r.bezierCurveTo(T,F,E,B,V,N),S<=W&&x&&(P=R,U=M.controls&&M.controls.right||e.Vector.zero,L=P.controls&&P.controls.left||e.Vector.zero,F=M._relative?(T=U.x+i(M.x),U.y+i(M.y)):(T=i(U.x),i(U.y)),B=P._relative?(E=L.x+i(P.x),L.y+i(P.y)):(E=i(L.x),i(L.y)),V=i(P.x),N=i(P.y),r.bezierCurveTo(T,F,E,B,V,N));break;case e.Commands.line:r.lineTo(V,N);break;case e.Commands.move:R=M,r.moveTo(V,N)}return x&&r.closePath(),j||l||(p.isHidden.test(u)||((q=u._renderer&&u._renderer.offset)&&(r.save(),r.translate(-u._renderer.offset.x,-u._renderer.offset.y),r.scale(u._renderer.scale.x,u._renderer.scale.y)),r.fill(),q&&r.restore()),p.isHidden.test(h)||((q=h._renderer&&h._renderer.offset)&&(r.save(),r.translate(-h._renderer.offset.x,-h._renderer.offset.y),r.scale(h._renderer.scale.x,h._renderer.scale.y),r.lineWidth=d/h._renderer.scale.x),r.stroke(),q&&r.restore())),G||r.restore(),j&&!l&&r.clip(),D&&0<D.length&&r.setLineDash(s),this.flagReset()}},text:{render:function(e,t,r){this._update();var o,a,l,c,h,d,u,f=this._matrix.elements,m=this._stroke,v=this._linewidth,y=this._fill,_=this._opacity*this.parent._renderer.opacity,x=this._visible,b=g(f),w=y._renderer&&y._renderer.offset&&m._renderer&&m._renderer.offset,S=this.dashes,C=this._clip;return t||x&&!C?(b||(e.save(),e.transform(f[0],f[3],f[1],f[4],f[2],f[5])),w||(e.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),e.textAlign=p.alignments[this._alignment]||this._alignment,e.textBaseline=this._baseline,y&&(n.isString(y)?e.fillStyle=y:(p[y._renderer.type].render.call(y,e),e.fillStyle=y._renderer.effect)),m&&(n.isString(m)?e.strokeStyle=m:(p[m._renderer.type].render.call(m,e),e.strokeStyle=m._renderer.effect)),v&&(e.lineWidth=v),n.isNumber(_)&&(e.globalAlpha=_),S&&0<S.length&&e.setLineDash(S),C||r||(p.isHidden.test(y)||(y._renderer&&y._renderer.offset?(d=i(y._renderer.scale.x),u=i(y._renderer.scale.y),e.save(),e.translate(-i(y._renderer.offset.x),-i(y._renderer.offset.y)),e.scale(d,u),o=this._size/y._renderer.scale.y,a=this._leading/y._renderer.scale.y,e.font=[this._style,this._weight,i(o)+"px/",i(a)+"px",this._family].join(" "),l=y._renderer.offset.x/y._renderer.scale.x,c=y._renderer.offset.y/y._renderer.scale.y,e.fillText(this.value,i(l),i(c)),e.restore()):e.fillText(this.value,0,0)),p.isHidden.test(m)||(m._renderer&&m._renderer.offset?(d=i(m._renderer.scale.x),u=i(m._renderer.scale.y),e.save(),e.translate(-i(m._renderer.offset.x),-i(m._renderer.offset.y)),e.scale(d,u),o=this._size/m._renderer.scale.y,a=this._leading/m._renderer.scale.y,e.font=[this._style,this._weight,i(o)+"px/",i(a)+"px",this._family].join(" "),l=m._renderer.offset.x/m._renderer.scale.x,c=m._renderer.offset.y/m._renderer.scale.y,h=v/m._renderer.scale.x,e.lineWidth=i(h),e.strokeText(this.value,i(l),i(c)),e.restore()):e.strokeText(this.value,0,0))),b||e.restore(),C&&!r&&e.clip(),S&&0<S.length&&e.setLineDash(s),this.flagReset()):this}},texture:{render:function(t){this._update();var i=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof e.Vector||(this._renderer.offset=new e.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof e.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(i,r,n,s,l,u,g,p,m,y){p=p*Math.PI/180,s=c(s),l=c(l);var _=(r-m)/2,x=(n-y)/2,b=d(p)*_+h(p)*x,w=-h(p)*_+d(p)*x,S=s*s,C=l*l,A=b*b,k=w*w,M=A/S+k/C;if(1<M){var P=f(M);S=(s*=P)*s,C=(l*=P)*l}var R=S*k+C*A,E=f(a(0,(S*C-R)/R));u===g&&(E=-E);var B=E*s*w/l,T=-E*l*b/s,F=d(p)*B-h(p)*T+(r+m)/2,I=h(p)*B+d(p)*T+(n+y)/2,O=v(1,0,(b-B)/s,(w-T)/l);!function(i,r,n,s,a,l,c,h,d){var u=e.Utils.Curve.Tolerance.epsilon,f=c-l,g=Math.abs(f)<u;(f=t(f,o))<u&&(f=g?0:o),!0!==h||g||(f===o?f=-o:f-=o);for(var p=0;p<e.Resolution;p++){var m=l+p/(e.Resolution-1)*f,v=r+s*Math.cos(m),y=n+a*Math.sin(m);if(0!==d){var _=Math.cos(d),x=Math.sin(d),b=v-r,w=y-n;v=b*_-w*x+r,y=b*x+w*_+n}i.lineTo(v,y)}}(i,F,I,s,l,O,O+v((b-B)/s,(w-T)/l,(-b-B)/s,(-w-T)/l)%o,0===g,p)}},m=e[e.Types.canvas]=function(t){var i=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,n.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=i),this.scene=new e.Group,this.scene.parent=this};function v(e,t,i,r){var n=e*i+t*r,s=f(e*e+t*t)*f(i*i+r*r),o=u(a(-1,l(1,n/s)));return e*r-t*i<0&&(o=-o),o}n.extend(m,{Utils:p}),n.extend(m.prototype,e.Utils.Events,{constructor:m,setSize:function(t,i,s){return this.width=t,this.height=i,this.ratio=n.isUndefined(s)?r(this.ctx):s,this.domElement.width=t*this.ratio,this.domElement.height=i*this.ratio,this.domElement.style&&n.extend(this.domElement.style,{width:t+"px",height:i+"px"}),this.trigger(e.Events.resize,t,i,s)},render:function(){var e=1===this.ratio;return e||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),p.group.render.call(this.scene,this.ctx),e||this.ctx.restore(),this}})}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.root,i=e.Matrix.Multiply,r=e.Utils.mod,n=[1,0,0,0,1,0,0,0,1],s=new e.Array(9),o=e.Utils.getRatio,a=(e.Utils.getComputedMatrix,e.Utils.toFixed),l=e[e.Types.canvas].Utils,c=e.Utils,h={isHidden:/(none|transparent)/i,canvas:t.document?t.document.createElement("canvas"):{getContext:c.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new e.Matrix,uv:new e.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{removeChild:function(e,t){if(e.children)for(var i=0;i<e.children.length;i++)h.group.removeChild(e.children[i],t);else t.deleteTexture(e._renderer.texture),delete e._renderer.texture},renderChild:function(e){h[e._renderer.type].render.call(e,this.gl,this.program)},render:function(t,r){this._update();var n=this.parent,o=n._matrix&&n._matrix.manual||n._flagMatrix,a=this._matrix.manual||this._flagMatrix;if((o||a)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toArray(!0,s),i(s,n._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*n._renderer.scale,o&&(this._flagMatrix=!0)),this._mask&&(t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.colorMask(!1,!1,!1,!0),t.stencilOp(t.KEEP,t.KEEP,t.INCR),h[this._mask._renderer.type].render.call(this._mask,t,r,this),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(var l=0;l<this.subtractions.length;l++)h.group.removeChild(this.subtractions[l],t);for(l=0;l<this.children.length;l++){var c=this.children[l];h[c._renderer.type].render.call(c,t,r)}return this.children.forEach(h.group.renderChild,{gl:t,program:r}),this._mask&&(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),h[this._mask._renderer.type].render.call(this._mask,t,r,this),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.disable(t.STENCIL_TEST)),this.flagReset()}},path:{updateCanvas:function(t){var i,n,s,o,d,u,f,g,p,m,v,y,_,x,b,w=t._renderer.vertices,S=this.canvas,C=this.ctx,A=t._renderer.scale,k=t._stroke,M=t._linewidth,P=t._fill,R=t._renderer.opacity||t._opacity,E=t._cap,B=t._join,T=t._miter,F=t._closed,I=t.dashes,O=w.length,U=O-1;S.width=Math.max(Math.ceil(t._renderer.rect.width*A),1),S.height=Math.max(Math.ceil(t._renderer.rect.height*A),1);var L,V=t._renderer.rect.centroid,N=V.x,j=V.y;C.clearRect(0,0,S.width,S.height),P&&(c.isString(P)?C.fillStyle=P:(h[P._renderer.type].render.call(P,C,t),C.fillStyle=P._renderer.effect)),k&&(c.isString(k)?C.strokeStyle=k:(h[k._renderer.type].render.call(k,C,t),C.strokeStyle=k._renderer.effect)),M&&(C.lineWidth=M),T&&(C.miterLimit=T),B&&(C.lineJoin=B),E&&(C.lineCap=E),c.isNumber(R)&&(C.globalAlpha=R),I&&0<I.length&&C.setLineDash(I),C.save(),C.scale(A,A),C.translate(N,j),C.beginPath();for(var G=0;G<w.length;G++){var q=w[G];switch(_=a(q.x),x=a(q.y),q.command){case e.Commands.close:C.closePath();break;case e.Commands.arc:var D=q.rx,W=q.ry,z=q.xAxisRotation,H=q.largeArcFlag,X=q.sweepFlag;s=w[n=F?r(G-1,O):max(G-1,0)];var Y=a(s.x),K=a(s.y);l.renderSvgArcCommand(C,Y,K,D,W,H,X,z,_,x);break;case e.Commands.curve:n=F?r(G-1,O):Math.max(G-1,0),i=F?r(G+1,O):Math.min(G+1,U),s=w[n],o=w[i],p=s.controls&&s.controls.right||e.Vector.zero,m=q.controls&&q.controls.left||e.Vector.zero,g=s._relative?(f=a(p.x+s.x),a(p.y+s.y)):(f=a(p.x),a(p.y)),u=q._relative?(d=a(m.x+q.x),a(m.y+q.y)):(d=a(m.x),a(m.y)),C.bezierCurveTo(f,g,d,u,_,x),U<=G&&F&&(o=L,v=q.controls&&q.controls.right||e.Vector.zero,y=o.controls&&o.controls.left||e.Vector.zero,g=q._relative?(f=a(v.x+q.x),a(v.y+q.y)):(f=a(v.x),a(v.y)),u=o._relative?(d=a(y.x+o.x),a(y.y+o.y)):(d=a(y.x),a(y.y)),_=a(o.x),x=a(o.y),C.bezierCurveTo(f,g,d,u,_,x));break;case e.Commands.line:C.lineTo(_,x);break;case e.Commands.move:L=q,C.moveTo(_,x)}}F&&C.closePath(),h.isHidden.test(P)||((b=P._renderer&&P._renderer.offset)&&(C.save(),C.translate(-P._renderer.offset.x,-P._renderer.offset.y),C.scale(P._renderer.scale.x,P._renderer.scale.y)),C.fill(),b&&C.restore()),h.isHidden.test(k)||((b=k._renderer&&k._renderer.offset)&&(C.save(),C.translate(-k._renderer.offset.x,-k._renderer.offset.y),C.scale(k._renderer.scale.x,k._renderer.scale.y),C.lineWidth=M/k._renderer.scale.x),C.stroke(),b&&C.restore()),C.restore()},getBoundingClientRect:function(e,t,i){var r,n,s=1/0,o=-1/0,a=1/0,l=-1/0;e.forEach(function(e){var t,i,r,n,c,h,d=e.x,u=e.y,f=e.controls;a=Math.min(u,a),s=Math.min(d,s),o=Math.max(d,o),l=Math.max(u,l),e.controls&&(c=f.left,h=f.right,c&&h&&(t=e._relative?c.x+d:c.x,i=e._relative?c.y+u:c.y,r=e._relative?h.x+d:h.x,n=e._relative?h.y+u:h.y,t&&i&&r&&n&&(a=Math.min(i,n,a),s=Math.min(t,r,s),o=Math.max(t,r,o),l=Math.max(i,n,l))))}),c.isNumber(t)&&(a-=t,s-=t,o+=t,l+=t),r=o-s,n=l-a,i.top=a,i.left=s,i.right=o,i.bottom=l,i.width=r,i.height=n,i.centroid||(i.centroid={}),i.centroid.x=-s,i.centroid.y=-a},render:function(t,r,n){if(!this._visible||!this._opacity)return this;this._update();var o=this.parent,a=o._matrix.manual||o._flagMatrix,l=this._matrix.manual||this._flagMatrix,d=this._flagVertices||this._flagFill||this._fill instanceof e.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof e.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof e.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof e.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof e.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof e.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||o._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&0<this.dashes.length||!this._renderer.texture;return(a||l)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toArray(!0,s),i(s,o._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*o._renderer.scale),d?(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new e.Array(12)),this._renderer.opacity=this._opacity*o._renderer.opacity,h.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,t,this,r),h.updateTexture.call(h,t,this)):(c.isString(this._fill)||this._fill._update(),c.isString(this._stroke)||this._stroke._update()),!this._clip||n?(t.bindBuffer(t.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),t.vertexAttribPointer(r.textureCoords,2,t.FLOAT,!1,0,0),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.buffer),t.vertexAttribPointer(r.position,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()):void 0}},text:{updateCanvas:function(e){var t=this.canvas,i=this.ctx,r=e._renderer.scale,n=e._stroke,s=e._linewidth*r,o=e._fill,l=e._renderer.opacity||e._opacity,d=e.dashes;t.width=Math.max(Math.ceil(e._renderer.rect.width*r),1),t.height=Math.max(Math.ceil(e._renderer.rect.height*r),1);var u,f,g,p,m,v,y,_=e._renderer.rect.centroid,x=_.x,b=_.y,w=o._renderer&&o._renderer.offset&&n._renderer&&n._renderer.offset;i.clearRect(0,0,t.width,t.height),w||(i.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" ")),i.textAlign="center",i.textBaseline="middle",o&&(c.isString(o)?i.fillStyle=o:(h[o._renderer.type].render.call(o,i,e),i.fillStyle=o._renderer.effect)),n&&(c.isString(n)?i.strokeStyle=n:(h[n._renderer.type].render.call(n,i,e),i.strokeStyle=n._renderer.effect)),s&&(i.lineWidth=s),c.isNumber(l)&&(i.globalAlpha=l),d&&0<d.length&&i.setLineDash(d),i.save(),i.scale(r,r),i.translate(x,b),h.isHidden.test(o)||(o._renderer&&o._renderer.offset?(v=a(o._renderer.scale.x),y=a(o._renderer.scale.y),i.save(),i.translate(-a(o._renderer.offset.x),-a(o._renderer.offset.y)),i.scale(v,y),u=e._size/o._renderer.scale.y,f=e._leading/o._renderer.scale.y,i.font=[e._style,e._weight,a(u)+"px/",a(f)+"px",e._family].join(" "),g=o._renderer.offset.x/o._renderer.scale.x,p=o._renderer.offset.y/o._renderer.scale.y,i.fillText(e.value,a(g),a(p)),i.restore()):i.fillText(e.value,0,0)),h.isHidden.test(n)||(n._renderer&&n._renderer.offset?(v=a(n._renderer.scale.x),y=a(n._renderer.scale.y),i.save(),i.translate(-a(n._renderer.offset.x),-a(n._renderer.offset.y)),i.scale(v,y),u=e._size/n._renderer.scale.y,f=e._leading/n._renderer.scale.y,i.font=[e._style,e._weight,a(u)+"px/",a(f)+"px",e._family].join(" "),g=n._renderer.offset.x/n._renderer.scale.x,p=n._renderer.offset.y/n._renderer.scale.y,m=s/n._renderer.scale.x,i.lineWidth=a(m),i.strokeText(e.value,a(g),a(p)),i.restore()):i.strokeText(e.value,0,0)),i.restore()},getBoundingClientRect:function(e,t){var i=h.ctx;i.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" "),i.textAlign="center",i.textBaseline=e._baseline;var r=1.25*i.measureText(e._value).width,n=1.25*Math.max(e._size,e._leading);this._linewidth&&!h.isHidden.test(this._stroke)&&(r+=2*this._linewidth,n+=2*this._linewidth);var s=r/2,o=n/2;switch(h.alignments[e._alignment]||e._alignment){case h.alignments.left:t.left=0,t.right=r;break;case h.alignments.right:t.left=-r,t.right=0;break;default:t.left=-s,t.right=s}switch(e._baseline){case"bottom":t.top=-n,t.bottom=0;break;case"top":t.top=0,t.bottom=n;break;default:t.top=-o,t.bottom=o}t.width=r,t.height=n,t.centroid||(t.centroid={}),t.centroid.x=s,t.centroid.y=o},render:function(t,r,n){if(!this._visible||!this._opacity)return this;this._update();var o=this.parent,a=o._matrix.manual||o._flagMatrix,l=this._matrix.manual||this._flagMatrix,d=this._flagVertices||this._flagFill||this._fill instanceof e.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof e.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof e.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof e.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof e.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof e.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||o._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&0<this.dashes.length||!this._renderer.texture;return(a||l)&&(this._renderer.matrix||(this._renderer.matrix=new e.Array(9)),this._matrix.toArray(!0,s),i(s,o._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*o._renderer.scale),d?(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new e.Array(12)),this._renderer.opacity=this._opacity*o._renderer.opacity,h.text.getBoundingClientRect(this,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,t,this,r),h.updateTexture.call(h,t,this)):(c.isString(this._fill)||this._fill._update(),c.isString(this._stroke)||this._stroke._update()),!this._clip||n?(t.bindBuffer(t.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),t.vertexAttribPointer(r.textureCoords,2,t.FLOAT,!1,0,0),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.buffer),t.vertexAttribPointer(r.position,2,t.FLOAT,!1,0,0),t.drawArrays(t.TRIANGLES,0,6),this.flagReset()):void 0}},texture:{render:function(t,i){if(t.canvas.getContext("2d")){this._update();var r=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(r,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof e.Vector||(this._renderer.offset=new e.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,r&&(this._renderer.offset.x+=r.width/2,this._renderer.offset.y+=r.height/2,this._scale instanceof e.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof e.Vector||(this._renderer.scale=new e.Vector),this._scale instanceof e.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},getTriangles:function(e,t){var i=e.top,r=e.left,n=e.right,s=e.bottom;t[0]=r,t[1]=i,t[2]=n,t[3]=i,t[4]=r,t[5]=s,t[6]=r,t[7]=s,t[8]=n,t[9]=i,t[10]=n,t[11]=s},updateTexture:function(e,t){this[t._renderer.type].updateCanvas.call(h,t),t._renderer.texture&&e.deleteTexture(t._renderer.texture),e.bindBuffer(e.ARRAY_BUFFER,t._renderer.textureCoordsBuffer),t._renderer.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t._renderer.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.canvas.width<=0||this.canvas.height<=0||e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(e,t,i){c.isObject(t._renderer.buffer)&&e.deleteBuffer(t._renderer.buffer),t._renderer.buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._renderer.buffer),e.enableVertexAttribArray(i.position),e.bufferData(e.ARRAY_BUFFER,t._renderer.triangles,e.STATIC_DRAW),c.isObject(t._renderer.textureCoordsBuffer)&&e.deleteBuffer(t._renderer.textureCoordsBuffer),t._renderer.textureCoordsBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._renderer.textureCoordsBuffer),e.enableVertexAttribArray(i.textureCoords),e.bufferData(e.ARRAY_BUFFER,this.uv,e.STATIC_DRAW)},program:{create:function(t,i){var r,n;if(r=t.createProgram(),c.each(i,function(e){t.attachShader(r,e)}),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw n=t.getProgramInfoLog(r),t.deleteProgram(r),new e.Utils.Error("unable to link program: "+n);return r}},shaders:{create:function(t,i,r){var n,s;if(n=t.createShader(t[r]),t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw s=t.getShaderInfoLog(n),t.deleteShader(n),new e.Utils.Error("unable to compile shader "+n+": "+s);return n},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["attribute vec2 a_position;","attribute vec2 a_textureCoords;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","","varying vec2 v_textureCoords;","","void main() {","   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_textureCoords;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  gl_FragColor = texture2D(u_image, v_textureCoords);","}"].join("\n")},TextureRegistry:new e.Registry};h.ctx=h.canvas.getContext("2d");var d=e[e.Types.webgl]=function(t){var i,r,s,o;if(this.domElement=t.domElement||document.createElement("canvas"),c.isUndefined(t.offscreenElement)||(h.canvas=t.offscreenElement,h.ctx=h.canvas.getContext("2d")),this.scene=new e.Group,(this.scene.parent=this)._renderer={matrix:new e.Array(n),scale:1,opacity:1},this._flagMatrix=!0,i=c.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=i.overdraw,r=this.ctx=this.domElement.getContext("webgl",i)||this.domElement.getContext("experimental-webgl",i),!this.ctx)throw new e.Utils.Error("unable to create a webgl context. Try using another renderer.");s=h.shaders.create(r,h.shaders.vertex,h.shaders.types.vertex),o=h.shaders.create(r,h.shaders.fragment,h.shaders.types.fragment),this.program=h.program.create(r,[s,o]),r.useProgram(this.program),this.program.position=r.getAttribLocation(this.program,"a_position"),this.program.matrix=r.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=r.getAttribLocation(this.program,"a_textureCoords"),r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA)};c.extend(d,{Utils:h}),c.extend(d.prototype,e.Utils.Events,{constructor:d,setSize:function(t,i,r){this.width=t,this.height=i,this.ratio=c.isUndefined(r)?o(this.ctx):r,this.domElement.width=t*this.ratio,this.domElement.height=i*this.ratio,c.isObject(this.domElement.style)&&c.extend(this.domElement.style,{width:t+"px",height:i+"px"}),t*=this.ratio,i*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t,i);var n=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(n,t,i),this.trigger(e.Events.resize,t,i,r)},render:function(){var e=this.ctx;return this.overdraw||e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),h.group.render.call(this.scene,e,this.program),this._flagMatrix=!1,this}})}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Shape=function(){this._renderer={},this._renderer.flagMatrix=t.bind(i.FlagMatrix,this),this.isShape=!0,this.id=e.Identifier+e.uniqueId(),this.classList=[],this._matrix=new e.Matrix,this.translation=new e.Vector,this.rotation=0,this.scale=1};t.extend(i,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(t){var r={enumerable:!1,get:function(){return this._translation},set:function(t){this._translation&&this._translation.unbind(e.Events.change,this._renderer.flagMatrix),this._translation=t,this._translation.bind(e.Events.change,this._renderer.flagMatrix),i.FlagMatrix.call(this)}};Object.defineProperty(t,"translation",r),Object.defineProperty(t,"position",r),Object.defineProperty(t,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(e){this._rotation=e,this._flagMatrix=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof e.Vector&&this._scale.unbind(e.Events.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof e.Vector&&this._scale.bind(e.Events.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}})}}),t.extend(i.prototype,e.Utils.Events,{_flagMatrix:!0,_flagScale:!1,_translation:null,_rotation:0,_scale:1,constructor:i,addTo:function(e){return e.add(this),this},clone:function(e){var t=new i;return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,e&&e.add(t),t._update()},_update:function(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof e.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),t&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=!1,this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=Math.min,i=Math.max,r=(Math.round,Math.ceil),n=Math.floor,s=e.Utils.getComputedMatrix,o={},a=e.Utils;a.each(e.Commands,function(e,t){o[t]=new RegExp(e)});var l=e.Path=function(t,i,r,n){e.Shape.call(this),this._renderer.type="path",this._renderer.flagVertices=a.bind(l.FlagVertices,this),this._renderer.bindVertices=a.bind(l.BindVertices,this),this._renderer.unbindVertices=a.bind(l.UnbindVertices,this),this._renderer.flagFill=a.bind(l.FlagFill,this),this._renderer.flagStroke=a.bind(l.FlagStroke,this),this._renderer.vertices=[],this._renderer.collection=[],this._closed=!!i,this._curved=!!r,this.beginning=0,this.ending=1,this.fill="currentcolor",this.stroke="currentcolor",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!n,this.dashes=[]};function c(e,t){if(0===t||1===t)return!0;for(var i=e._length*t,r=0,n=0;n<e._lengths.length;n++){var s=e._lengths[n];if(i<=r)return 0<=i-r;r+=s}return!1}function h(e,t){var i=e._length;if(t<=0)return 0;if(i<=t)return e._lengths.length-1;for(var r=0,n=0;r<e._lengths.length;r++){if(n+e._lengths[r]>=t)return t-=n,Math.max(r-1,0)+t/e._lengths[r];n+=e._lengths[r]}return-1}function d(t,i,r){var n,s,o,a,l,c,h,d,u=i.controls&&i.controls.right,f=t.controls&&t.controls.left;return n=i.x,l=i.y,s=(u||i).x,c=(u||i).y,o=(f||t).x,h=(f||t).y,a=t.x,d=t.y,u&&i._relative&&(s+=i.x,c+=i.y),f&&t._relative&&(o+=t.x,h+=t.y),e.Utils.getCurveLength(n,l,s,c,o,h,a,d,r)}function u(t,i,r){var n,s,o,a,l,c,h,d,u=i.controls&&i.controls.right,f=t.controls&&t.controls.left;return n=i.x,l=i.y,s=(u||i).x,c=(u||i).y,o=(f||t).x,h=(f||t).y,a=t.x,d=t.y,u&&i._relative&&(s+=i.x,c+=i.y),f&&t._relative&&(o+=t.x,h+=t.y),e.Utils.subdivide(n,l,s,c,o,h,a,d,r)}a.extend(l,{Properties:["fill","stroke","linewidth","opacity","className","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],Utils:{getCurveLength:d},FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)},BindVertices:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){e.Shape.MakeObservable(t),a.each(l.Properties.slice(2,9),e.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.unbind(e.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.bind(e.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.unbind(e.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.bind(e.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(t,"closed",{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=!!e,this._flagVertices=!0}}),Object.defineProperty(t,"curved",{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=!!e,this._flagVertices=!0}}),Object.defineProperty(t,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(e){if(e!==this._automatic){this._automatic=!!e;var t=this._automatic?"ignore":"listen";a.each(this.vertices,function(e){e[t]()})}}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}}),Object.defineProperty(t,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(t){this._renderer.flagVertices;var i=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(e.Events.insert,i).unbind(e.Events.remove,r),t instanceof e.Utils.Collection?this._collection=t:this._collection=new e.Utils.Collection(t||[]),this._collection.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._collection)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}})}}),a.extend(l.prototype,e.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagClassName:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"currentcolor",_stroke:"currentcolor",_linewidth:1,_opacity:1,_className:"",_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,constructor:l,clone:function(e){var t=new l;t.vertices=this.vertices;for(var i=0;i<l.Properties.length;i++){var r=l.Properties[i];t[r]=this[r]}return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,e&&e.add(t),t._update()},toObject:function(){var t={vertices:a.map(this.vertices,function(e){return e.toObject()})};return a.each(e.Shape.Properties,function(e){t[e]=this[e]},this),t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof e.Vector?this.scale.toObject():this.scale,t},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},a.each(this.vertices,function(t){t.addSelf(e.centroid)}),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},a.each(this.vertices,function(t){t.subSelf(e.centroid)}),this},remove:function(){return this.parent&&this.parent.remove(this),this},getBoundingClientRect:function(r){var n,o,a,l,c,h,d,u,f=1/0,g=-1/0,p=1/0,m=-1/0;if(this._update(!0),n=r?this._matrix:s(this),o=this.linewidth/2,(a=this._renderer.vertices.length)<=0)return v=n.multiply(0,0,1),{top:v.y,left:v.x,right:v.x,bottom:v.y,width:0,height:0};for(l=1;l<a;l++)if(u=this._renderer.vertices[l],(c=this._renderer.vertices[l-1]).controls&&u.controls){h=c.relative?n.multiply(c.controls.right.x+c.x,c.controls.right.y+c.y,1):n.multiply(c.controls.right.x,c.controls.right.y,1),c=n.multiply(c.x,c.y,1),d=u.relative?n.multiply(u.controls.left.x+u.x,u.controls.left.y+u.y,1):n.multiply(u.controls.left.x,u.controls.left.y,1),u=n.multiply(u.x,u.y,1);var y=e.Utils.getCurveBoundingBox(c.x,c.y,h.x,h.y,d.x,d.y,u.x,u.y);p=t(y.min.y-o,p),f=t(y.min.x-o,f),g=i(y.max.x+o,g),m=i(y.max.y+o,m)}else l<=1&&(c=n.multiply(c.x,c.y,1),p=t(c.y-o,p),f=t(c.x-o,f),g=i(c.x+o,g),m=i(c.y+o,m)),u=n.multiply(u.x,u.y,1),p=t(u.y-o,p),f=t(u.x-o,f),g=i(u.x+o,g),m=i(u.y+o,m);return{top:p,left:f,right:g,bottom:m,width:g-f,height:m-p}},getPointAt:function(t,i){for(var r,n,s,o,l,c,h,d,u,f,g,p,m,v,y,_=this.length*Math.min(Math.max(t,0),1),x=this.vertices.length,b=x-1,w=null,S=null,C=0,A=this._lengths.length,k=0;C<A;C++){if(k+this._lengths[C]>=_){this._closed?(r=e.Utils.mod(C,x),n=e.Utils.mod(C-1,x),0===C&&(r=n,n=C)):(r=C,n=Math.min(Math.max(C-1,0),b)),w=this.vertices[r],S=this.vertices[n],_-=k,t=0!==this._lengths[C]?_/this._lengths[C]:0;break}k+=this._lengths[C]}if(a.isNull(w)||a.isNull(S))return null;if(!w)return S;if(!S)return w;y=S.controls&&S.controls.right,v=w.controls&&w.controls.left,l=S.x,f=S.y,c=(y||S).x,g=(y||S).y,h=(v||w).x,p=(v||w).y,d=w.x,m=w.y,y&&S.relative&&(c+=S.x,g+=S.y),v&&w.relative&&(h+=w.x,p+=w.y),o=e.Utils.getComponentOnCubicBezier(t,l,c,h,d),u=e.Utils.getComponentOnCubicBezier(t,f,g,p,m);var M=e.Utils.lerp(l,c,t),P=e.Utils.lerp(f,g,t),R=e.Utils.lerp(c,h,t),E=e.Utils.lerp(g,p,t),B=e.Utils.lerp(h,d,t),T=e.Utils.lerp(p,m,t),F=e.Utils.lerp(M,R,t),I=e.Utils.lerp(P,E,t),O=e.Utils.lerp(R,B,t),U=e.Utils.lerp(E,T,t);return a.isObject(i)?(i.x=o,i.y=u,a.isObject(i.controls)||e.Anchor.AppendCurveProperties(i),i.controls.left.x=F,i.controls.left.y=I,i.controls.right.x=O,i.controls.right.y=U,a.isBoolean(i.relative)&&!i.relative||(i.controls.left.x-=o,i.controls.left.y-=u,i.controls.right.x-=o,i.controls.right.y-=u),i.t=t,i):((s=new e.Anchor(o,u,F-o,I-u,O-o,U-u,this._curved?e.Commands.curve:e.Commands.line)).t=t,s)},plot:function(){if(this.curved)return e.Utils.getCurveFromPoints(this._collection,this.closed),this;for(var t=0;t<this._collection.length;t++)this._collection[t].command=0===t?e.Commands.move:e.Commands.line;return this},subdivide:function(t){this._update();var i=this.vertices.length-1,r=this.vertices[i],n=this._closed||this.vertices[i]._command===e.Commands.close,s=[];return a.each(this.vertices,function(o,l){if(l<=0&&!n)r=o;else{if(o.command===e.Commands.move)return s.push(new e.Anchor(r.x,r.y)),0<l&&(s[s.length-1].command=e.Commands.line),void(r=o);var c=u(o,r,t);s=s.concat(c),a.each(c,function(t,i){i<=0&&r.command===e.Commands.move?t.command=e.Commands.move:t.command=e.Commands.line}),i<=l&&(this._closed&&this._automatic?(c=u(r=o,r,t),s=s.concat(c),a.each(c,function(t,i){i<=0&&r.command===e.Commands.move?t.command=e.Commands.move:t.command=e.Commands.line})):n&&s.push(new e.Anchor(o.x,o.y)),s[s.length-1].command=n?e.Commands.close:e.Commands.line),r=o}},this),this._automatic=!1,this._curved=!1,this.vertices=s,this},_updateLength:function(t,i){i||this._update();var r=this.vertices.length-1,n=this.vertices[r],s=0;return a.isUndefined(this._lengths)&&(this._lengths=[]),a.each(this.vertices,function(i,r){if(r<=0||i.command===e.Commands.move)return n=i,void(this._lengths[r]=0);this._lengths[r]=d(i,n,t),this._lengths[r]=e.Utils.toFixed(this._lengths[r]),s+=this._lengths[r],n=i},this),this._length=s,this._flagLength=!1,this},_update:function(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);for(var t,i,s,o,a,l=this._collection.length,d=this._closed,u=Math.min(this._beginning,this._ending),f=Math.max(this._beginning,this._ending),g=h(this,u*this._length),p=h(this,f*this._length),m=r(g),v=n(p),y=this._renderer.vertices.length=0;y<l;y++)this._renderer.collection.length<=y&&this._renderer.collection.push(new e.Anchor),v<y&&!i?((a=this._renderer.collection[y]).copy(this._collection[y]),this.getPointAt(f,a),a.command=this._renderer.collection[y].command,this._renderer.vertices.push(a),i=a,(s=this._collection[y-1])&&s.controls&&(a.controls.right.clear(),this._renderer.collection[y-1].controls.right.clear().lerp(s.controls.right,a.t))):m<=y&&y<=v&&(a=this._renderer.collection[y].copy(this._collection[y]),this._renderer.vertices.push(a),y===v&&c(this,f)?(i=a,!d&&i.controls&&i.controls.right.clear()):y===m&&c(this,u)&&((t=a).command=e.Commands.move,!d&&t.controls&&t.controls.left.clear()));0<m&&!t&&(y=m-1,(a=this._renderer.collection[y]).copy(this._collection[y]),this.getPointAt(u,a),a.command=e.Commands.move,this._renderer.vertices.unshift(a),t=a,(o=this._collection[y+1])&&o.controls&&(a.controls.left.clear(),this._renderer.collection[y+1].controls.left.copy(o.controls.left).lerp(e.Vector.zero,a.t)))}return e.Shape.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClassName=this._flagClip=!1,e.Shape.prototype.flagReset.call(this),this}}),l.MakeObservable(l.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.Line=function(i,r,n,s){t.call(this,[new e.Anchor(i,r),new e.Anchor(n,s)]),this.vertices[0].command=e.Commands.move,this.vertices[1].command=e.Commands.line,this.automatic=!1};i.extend(r.prototype,t.prototype),r.prototype.constructor=r,t.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.Rectangle=function(i,r,n,s){t.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0,!1,!0),this.width=n,this.height=s,this.origin=new e.Vector,this.translation.set(i,r),this._update()};i.extend(r,{Properties:["width","height"],MakeObservable:function(n){t.MakeObservable(n),i.each(r.Properties,e.Utils.defineProperty,n),Object.defineProperty(n,"origin",{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(e.Events.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(e.Events.change,this._renderer.flagVertices),this._renderer.flagVertices()}})}}),i.extend(r.prototype,t.prototype,{_width:0,_height:0,_flagWidth:0,_flagHeight:0,_origin:null,constructor:r,_update:function(){if(this._flagWidth||this._flagHeight){var i=this._width/2,r=this._height/2;this.vertices[0].set(-i,-r).add(this._origin).command=e.Commands.move,this.vertices[1].set(i,-r).add(this._origin).command=e.Commands.line,this.vertices[2].set(i,r).add(this._origin).command=e.Commands.line,this.vertices[3].set(-i,r).add(this._origin).command=e.Commands.line,this.vertices[4]&&(this.vertices[4].set(-i,-r).add(this._origin).command=e.Commands.line)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,t.prototype.flagReset.call(this),this},clone:function(t){var n=new r(0,0,this.width,this.height);return n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,i.each(e.Path.Properties,function(e){n[e]=this[e]},this),t&&t.add(n),n}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.PI/2,n=Math.cos,s=Math.sin,o=e.Utils,a=4/3*Math.tan(Math.PI/8),l=e.Ellipse=function(i,r,n,s,a){o.isNumber(s)||(s=n);var l=a||5,c=o.map(o.range(l),function(t){return new e.Anchor},this);t.call(this,c,!0,!0,!0),this.width=2*n,this.height=2*s,this._update(),this.translation.set(i,r)};o.extend(l,{Properties:["width","height"],MakeObservable:function(i){t.MakeObservable(i),o.each(l.Properties,e.Utils.defineProperty,i)}}),o.extend(l.prototype,t.prototype,{_width:0,_height:0,_flagWidth:!1,_flagHeight:!1,constructor:l,_update:function(){if(this._flagWidth||this._flagHeight)for(var o=0,l=this.vertices.length,c=l-1;o<l;o++){var h=o/c*i,d=this._width/2,u=this._height/2,f=(n(h),s(h),d*n(h)),g=u*s(h),p=0===o?0:d*a*n(h-r),m=0===o?0:u*a*s(h-r),v=(d=o===c?0:d*a*n(h+r),u=o===c?0:u*a*s(h+r),this.vertices[o]);v.command=0===o?e.Commands.move:e.Commands.curve,v.set(f,g),v.controls.left.set(p,m),v.controls.right.set(d,u)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=this.width/2,r=this.height/2,n=this.vertices.length,s=new l(0,0,i,r,n);return s.translation.copy(this.translation),s.rotation=this.rotation,s.scale=this.scale,o.each(e.Path.Properties,function(e){s[e]=this[e]},this),t&&t.add(s),s}}),l.MakeObservable(l.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.PI/2,n=Math.cos,s=Math.sin,o=e.Utils,a=4/3*Math.tan(Math.PI/8),l=e.Circle=function(i,r,n,s){var a=s||5,l=o.map(o.range(a),function(t){return new e.Anchor},this);t.call(this,l,!0,!0,!0),this.radius=n,this._update(),this.translation.set(i,r)};o.extend(l,{Properties:["radius"],MakeObservable:function(i){t.MakeObservable(i),o.each(l.Properties,e.Utils.defineProperty,i)}}),o.extend(l.prototype,t.prototype,{_radius:0,_flagRadius:!1,constructor:l,_update:function(){if(this._flagRadius)for(var o=0,l=this.vertices.length,c=l-1;o<l;o++){var h=o/c*i,d=this._radius,u=(n(h),s(h),d*a),f=d*n(h),g=d*s(h),p=0===o?0:u*n(h-r),m=0===o?0:u*s(h-r),v=o===c?0:u*n(h+r),y=o===c?0:u*s(h+r),_=this.vertices[o];_.command=0===o?e.Commands.move:e.Commands.curve,_.set(f,g),_.controls.left.set(p,m),_.controls.right.set(v,y)}return t.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=new l(0,0,this.radius,this.vertices.length);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,o.each(e.Path.Properties,function(e){i[e]=this[e]},this),t&&t.add(i),i}}),l.MakeObservable(l.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=e.Utils,o=e.Polygon=function(e,i,r,n){n=Math.max(n||0,3),t.call(this),this.closed=!0,this.automatic=!1,this.width=2*r,this.height=2*r,this.sides=n,this._update(),this.translation.set(e,i)};s.extend(o,{Properties:["width","height","sides"],MakeObservable:function(i){t.MakeObservable(i),s.each(o.Properties,e.Utils.defineProperty,i)}}),s.extend(o.prototype,t.prototype,{_width:0,_height:0,_sides:0,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,constructor:o,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var s=this._sides,o=s+1,a=this.vertices.length;s<a&&(this.vertices.splice(s-1,a-s),a=s);for(var l=0;l<o;l++){var c=i*((l+.5)/s)+Math.PI/2,h=this._width*r(c)/2,d=this._height*n(c)/2;a<=l?this.vertices.push(new e.Anchor(h,d)):this.vertices[l].set(h,d),this.vertices[l].command=0===l?e.Commands.move:e.Commands.line}}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=new o(0,0,this.radius,this.sides);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,s.each(e.Path.Properties,function(e){i[e]=this[e]},this),t&&t.add(i),i}}),o.MakeObservable(o.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=(Math.PI,2*Math.PI),r=Math.PI/2,n=(Math.cos,Math.sin,Math.abs,e.Utils),s=e.ArcSegment=function(i,r,s,o,a,l,c){var h=c||3*e.Resolution,d=n.map(n.range(h),function(){return new e.Anchor});t.call(this,d,!0,!1,!0),this.innerRadius=s,this.outerRadius=o,this.startAngle=a,this.endAngle=l,this._update(),this.translation.set(i,r)};function o(e,t){for(;e<0;)e+=t;return e%t}n.extend(s,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(i){t.MakeObservable(i),n.each(s.Properties,e.Utils.defineProperty,i)}}),n.extend(s.prototype,t.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:i,_innerRadius:0,_outerRadius:0,constructor:s,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var n,s=this._startAngle,a=this._endAngle,l=this._innerRadius,c=this._outerRadius,h=o(s,i)===o(a,i),d=0<l,u=this.vertices,f=d?u.length/2:u.length,g=0;h?f--:d||(f-=2);for(var p=0,m=f-1;p<f;p++){var v=p/m,y=u[g],_=v*(a-s)+s,x=(a-s)/f,b=c*Math.cos(_),w=c*Math.sin(_);if(0===p)n=e.Commands.move;else n=e.Commands.curve;if(y.command=n,y.x=b,y.y=w,y.controls.left.clear(),y.controls.right.clear(),y.command===e.Commands.curve){var S=c*x/Math.PI;y.controls.left.x=S*Math.cos(_-r),y.controls.left.y=S*Math.sin(_-r),y.controls.right.x=S*Math.cos(_+r),y.controls.right.y=S*Math.sin(_+r),1===p&&y.controls.left.multiplyScalar(2),p===m&&y.controls.right.multiplyScalar(2)}g++}if(d){for(h?(u[g].command=e.Commands.close,g++):m=--f-1,p=0;p<f;p++)v=p/m,y=u[g],_=(1-v)*(a-s)+s,x=(a-s)/f,b=l*Math.cos(_),w=l*Math.sin(_),n=e.Commands.curve,p<=0&&(n=h?e.Commands.move:e.Commands.line),y.command=n,y.x=b,y.y=w,y.controls.left.clear(),y.controls.right.clear(),y.command===e.Commands.curve&&(S=l*x/Math.PI,y.controls.left.x=S*Math.cos(_+r),y.controls.left.y=S*Math.sin(_+r),y.controls.right.x=S*Math.cos(_-r),y.controls.right.y=S*Math.sin(_-r),1===p&&y.controls.left.multiplyScalar(2),p===m&&y.controls.right.multiplyScalar(2)),g++;u[g].copy(u[0]),u[g].command=e.Commands.line}else h||(u[g].command=e.Commands.line,u[g].x=0,u[g].y=0,u[++g].copy(u[0]),u[g].command=e.Commands.line)}return t.prototype._update.call(this),this},flagReset:function(){return t.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this},clone:function(t){var i=this.innerRadius,r=this.outerradius,o=this.startAngle,a=this.endAngle,l=this.vertices.length,c=new s(0,0,i,r,o,a,l);return c.translation.copy(this.translation),c.rotation=this.rotation,c.scale=this.scale,n.each(e.Path.Properties,function(e){c[e]=this[e]},this),t&&t.add(c),c}}),s.MakeObservable(s.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=e.Utils,o=e.Star=function(e,i,r,n,o){arguments.length<=3&&(r=(n=r)/2),(!s.isNumber(o)||o<=0)&&(o=5),t.call(this),this.closed=!0,this.automatic=!1,this.innerRadius=r,this.outerRadius=n,this.sides=o,this._update(),this.translation.set(e,i)};s.extend(o,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(i){t.MakeObservable(i),s.each(o.Properties,e.Utils.defineProperty,i)}}),s.extend(o.prototype,t.prototype,{_innerRadius:0,_outerRadius:0,_sides:0,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,constructor:o,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var s=2*this._sides,o=s+1,a=this.vertices.length;s<a&&(this.vertices.splice(s-1,a-s),a=s);for(var l=0;l<o;l++){var c=i*((l+.5)/s),h=(l%2?this._outerRadius:this._innerRadius)/2,d=h*r(c),u=h*n(c);a<=l?this.vertices.push(new e.Anchor(d,u)):this.vertices[l].set(d,u),this.vertices[l].command=0===l?e.Commands.move:e.Commands.line}}return t.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,t.prototype.flagReset.call(this),this},clone:function(t){var i=this.innerRadius,r=this.outerRadius,n=this.sides,a=new o(0,0,i,r,n);return a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,s.each(e.Path.Properties,function(e){a[e]=this[e]},this),t&&t.add(a),a}}),o.MakeObservable(o.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Path,i=e.Utils,r=e.RoundedRectangle=function(n,s,o,a,l){i.isUndefined(l)&&(l=Math.floor(Math.min(o,a)/12));var c=i.map(i.range(10),function(t){return new e.Anchor(0,0,0,0,0,0,0===t?e.Commands.move:e.Commands.curve)});t.call(this,c),this.closed=!0,this.automatic=!1,this._renderer.flagRadius=i.bind(r.FlagRadius,this),this.width=o,this.height=a,this.radius=l,this._update(),this.translation.set(n,s)};i.extend(r,{Properties:["width","height"],FlagRadius:function(){this._flagRadius=!0},MakeObservable:function(n){t.MakeObservable(n),i.each(r.Properties,e.Utils.defineProperty,n),Object.defineProperty(n,"radius",{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof e.Vector&&this._radius.unbind(e.Events.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof e.Vector&&this._radius.bind(e.Events.change,this._renderer.flagRadius),this._flagRadius=!0}})}}),i.extend(r.prototype,t.prototype,{_width:0,_height:0,_radius:0,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,constructor:r,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var i,r,n,s=this._width,o=this._height;r=this._radius instanceof e.Vector?(i=this._radius.x,this._radius.y):(i=this._radius,this._radius);var a=s/2,l=o/2;(n=this.vertices[0]).x=-(a-i),n.y=-l,(n=this.vertices[1]).x=a-i,n.y=-l,n.controls.left.clear(),n.controls.right.x=i,n.controls.right.y=0,(n=this.vertices[2]).x=a,n.y=-(l-r),n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[3]).x=a,n.y=l-r,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=r,(n=this.vertices[4]).x=a-i,n.y=l,n.controls.right.clear(),n.controls.left.clear(),(n=this.vertices[5]).x=-(a-i),n.y=l,n.controls.left.clear(),n.controls.right.x=-i,n.controls.right.y=0,(n=this.vertices[6]).x=-a,n.y=l-r,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[7]).x=-a,n.y=-(l-r),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-r,(n=this.vertices[8]).x=-(a-i),n.y=-l,n.controls.left.clear(),n.controls.right.clear(),(n=this.vertices[9]).copy(this.vertices[8])}return t.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,t.prototype.flagReset.call(this),this},clone:function(t){var n=this.width,s=this.height,o=this.radius,a=new r(0,0,n,s,o);return a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,i.each(e.Path.Properties,function(e){a[e]=this[e]},this),t&&t.add(a),a}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.root,i=e.Utils.getComputedMatrix,r=e.Utils,n=((t.document?t.document.createElement("canvas"):(console.warn("Two.js: Unable to create canvas for Two.Text measurements."),{getContext:r.identity})).getContext("2d"),e.Text=function(t,i,n,s){if(e.Shape.call(this),this._renderer.type="text",this._renderer.flagFill=r.bind(e.Text.FlagFill,this),this._renderer.flagStroke=r.bind(e.Text.FlagStroke,this),this.value=t,r.isNumber(i)&&(this.translation.x=i),r.isNumber(n)&&(this.translation.y=n),this.dashes=[],!r.isObject(s))return this;r.each(e.Text.Properties,function(e){e in s&&(this[e]=s[e])},this)});r.extend(e.Text,{Ratio:.6,Properties:["value","family","size","leading","alignment","linewidth","style","className","weight","decoration","baseline","opacity","visible","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(t){e.Shape.MakeObservable(t),r.each(e.Text.Properties.slice(0,13),e.Utils.defineProperty,t),Object.defineProperty(t,"fill",{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.unbind(e.Events.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof e.Gradient||this._fill instanceof e.LinearGradient||this._fill instanceof e.RadialGradient||this._fill instanceof e.Texture)&&this._fill.bind(e.Events.change,this._renderer.flagFill)}}),Object.defineProperty(t,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.unbind(e.Events.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof e.Gradient||this._stroke instanceof e.LinearGradient||this._stroke instanceof e.RadialGradient||this._stroke instanceof e.Texture)&&this._stroke.bind(e.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(t,"clip",{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}})}}),r.extend(e.Text.prototype,e.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagClassName:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:800,_decoration:"none",_fill:"currentcolor",_stroke:"transparent",_linewidth:1,_opacity:1,_className:"",_visible:!0,_clip:!1,constructor:e.Text,remove:function(){return this.parent&&this.parent.remove(this),this},clone:function(t){var i=new e.Text(this.value);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,r.each(e.Text.Properties,function(e){i[e]=this[e]},this),t&&t.add(i),i._update()},toObject:function(){var t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return r.each(e.Text.Properties,function(e){t[e]=this[e]},this),t},noStroke:function(){return this.stroke="transparent",this},noFill:function(){return this.fill="transparent",this},getBoundingClientRect:function(e){var t,r,s,o,a,l;this._update(!0),t=e?this._matrix:i(this);var c=this.leading,h=this.value.length*this.size*n.Ratio;switch(this.alignment){case"left":s=0,o=h;break;case"right":s=-h,o=0;break;default:s=-h/2,o=h/2}switch(this.baseline){case"top":a=0,l=c;break;case"bottom":a=-c,l=0;break;default:a=-c/2,l=c/2}return{top:a=(r=t.multiply(s,a,1)).y,left:s=r.x,right:o=(r=t.multiply(o,l,1)).x,bottom:l=r.y,width:o-s,height:l-a}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=!1,e.Shape.prototype.flagReset.call(this),this}}),e.Text.MakeObservable(e.Text.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Stop=function(e,r,n){this._renderer={},this._renderer.type="stop",this.offset=t.isNumber(e)?e:i.Index<=0?0:1,this.opacity=t.isNumber(n)?n:1,this.color=t.isString(r)?r:(i.Index,"currentcolor"),i.Index=(i.Index+1)%2};t.extend(i,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(e){t.each(i.Properties,function(e){var t="_"+e,i="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[t]},set:function(e){this[t]=e,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})},e)}}),t.extend(i.prototype,e.Utils.Events,{constructor:i,clone:function(){var e=new i;return t.each(i.Properties,function(t){e[t]=this[t]},this),e},toObject:function(){var e={};return t.each(i.Properties,function(t){e[t]=this[t]},this),e},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),i.MakeObservable(i.prototype),i.prototype.constructor=i;var r=e.Gradient=function(i){this._renderer={},this._renderer.type="gradient",this.id=e.Identifier+e.uniqueId(),this.classList=[],this._renderer.flagStops=t.bind(r.FlagStops,this),this._renderer.bindStops=t.bind(r.BindStops,this),this._renderer.unbindStops=t.bind(r.UnbindStops,this),this.spread="pad",this.stops=i};t.extend(r,{Stop:i,Properties:["spread"],MakeObservable:function(i){t.each(r.Properties,e.Utils.defineProperty,i),Object.defineProperty(i,"stops",{enumerable:!0,get:function(){return this._stops},set:function(t){this._renderer.flagStops;var i=this._renderer.bindStops,r=this._renderer.unbindStops;this._stops&&this._stops.unbind(e.Events.insert,i).unbind(e.Events.remove,r),this._stops=new e.Utils.Collection((t||[]).slice(0)),this._stops.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagStops),t[i].parent=this;this._renderer.flagStops()},UnbindStops:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagStops),delete t[i].parent;this._renderer.flagStops()}}),t.extend(r.prototype,e.Utils.Events,{_flagStops:!1,_flagSpread:!1,clone:function(i){var n=t.map(this.stops,function(e){return e.clone()}),s=new r(n);return t.each(e.Gradient.Properties,function(e){s[e]=this[e]},this),i&&i.add(s),s},toObject:function(){var e={stops:t.map(this.stops,function(e){return e.toObject()})};return t.each(r.Properties,function(t){e[t]=this[t]},this),e},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.LinearGradient=function(r,n,s,o,a){e.Gradient.call(this,a),this._renderer.type="linear-gradient";var l=t.bind(i.FlagEndPoints,this);this.left=(new e.Vector).bind(e.Events.change,l),this.right=(new e.Vector).bind(e.Events.change,l),t.isNumber(r)&&(this.left.x=r),t.isNumber(n)&&(this.left.y=n),t.isNumber(s)&&(this.right.x=s),t.isNumber(o)&&(this.right.y=o)};t.extend(i,{Stop:e.Gradient.Stop,MakeObservable:function(t){e.Gradient.MakeObservable(t)},FlagEndPoints:function(){this._flagEndPoints=!0}}),t.extend(i.prototype,e.Gradient.prototype,{_flagEndPoints:!1,constructor:i,clone:function(r){var n=t.map(this.stops,function(e){return e.clone()}),s=new i(this.left._x,this.left._y,this.right._x,this.right._y,n);return t.each(e.Gradient.Properties,function(e){s[e]=this[e]},this),r&&r.add(s),s},toObject:function(){var t=e.Gradient.prototype.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagEndPoints=!1,e.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.RadialGradient=function(i,r,n,s,o,a){e.Gradient.call(this,s),this._renderer.type="radial-gradient",this.center=(new e.Vector).bind(e.Events.change,t.bind(function(){this._flagCenter=!0},this)),this.radius=t.isNumber(n)?n:20,this.focal=(new e.Vector).bind(e.Events.change,t.bind(function(){this._flagFocal=!0},this)),t.isNumber(i)&&(this.center.x=i),t.isNumber(r)&&(this.center.y=r),this.focal.copy(this.center),t.isNumber(o)&&(this.focal.x=o),t.isNumber(a)&&(this.focal.y=a)};t.extend(i,{Stop:e.Gradient.Stop,Properties:["radius"],MakeObservable:function(r){e.Gradient.MakeObservable(r),t.each(i.Properties,e.Utils.defineProperty,r)}}),t.extend(i.prototype,e.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,constructor:i,clone:function(r){var n=t.map(this.stops,function(e){return e.clone()}),s=new i(this.center._x,this.center._y,this._radius,n,this.focal._x,this.focal._y);return t.each(e.Gradient.Properties.concat(i.Properties),function(e){s[e]=this[e]},this),r&&r.add(s),s},toObject:function(){var r=e.Gradient.prototype.toObject.call(this);return t.each(i.Properties,function(e){r[e]=this[e]},this),r.center=this.center.toObject(),r.focal=this.focal.toObject(),r},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(e.Events.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,e.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t,i=e.root,r=e.Utils,n={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff)$/i,effect:/texture|gradient/i};i.document&&(t=document.createElement("a"));var s=e.Texture=function(t,i){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=r.bind(s.FlagOffset,this),this._renderer.flagScale=r.bind(s.FlagScale,this),this.id=e.Identifier+e.uniqueId(),this.classList=[],this.offset=new e.Vector,r.isFunction(i)){var n=r.bind(function(){this.unbind(e.Events.load,n),r.isFunction(i)&&i()},this);this.bind(e.Events.load,n)}r.isString(t)?this.src=t:r.isElement(t)&&(this.image=t),this._update()};r.extend(s,{Properties:["src","loaded","repeat"],RegularExpressions:n,ImageRegistry:new e.Registry,getAbsoluteURL:function(e){return t?(t.href=e,t.href):e},loadHeadlessBuffer:new Function("texture","loaded",['var fs = require("fs");',"var buffer = fs.readFileSync(texture.src);","texture.image.src = buffer;","loaded();"].join("\n")),getImage:function(t){var r,o=s.getAbsoluteURL(t);return s.ImageRegistry.contains(o)?s.ImageRegistry.get(o):(e.Utils.Image?(r=new e.Utils.Image,e.CanvasRenderer.Utils.shim(r,"img")):i.document?r=n.video.test(o)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),r.crossOrigin="anonymous",r)},Register:{canvas:function(e,t){e._src="#"+e.id,s.ImageRegistry.add(e.src,e.image),r.isFunction(t)&&t()},img:function(t,i){var n=function(e){r.isFunction(t.image.removeEventListener)&&(t.image.removeEventListener("load",n,!1),t.image.removeEventListener("error",o,!1)),r.isFunction(i)&&i()},o=function(i){throw r.isFunction(t.image.removeEventListener)&&(t.image.removeEventListener("load",n,!1),t.image.removeEventListener("error",o,!1)),new e.Utils.Error("unable to load "+t.src)};r.isNumber(t.image.width)&&0<t.image.width&&r.isNumber(t.image.height)&&0<t.image.height?n():r.isFunction(t.image.addEventListener)&&(t.image.addEventListener("load",n,!1),t.image.addEventListener("error",o,!1)),t._src=s.getAbsoluteURL(t._src),t.image&&t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),s.ImageRegistry.add(t.src,t.image),e.Utils.isHeadless?s.loadHeadlessBuffer(t,n):t.image.src=t.src)},video:function(t,i){var n=function(e){t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",o,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,t.image.play(),r.isFunction(i)&&i()},o=function(i){throw t.image.removeEventListener("canplaythrough",n,!1),t.image.removeEventListener("error",o,!1),new e.Utils.Error("unable to load "+t.src)};if(t._src=s.getAbsoluteURL(t._src),t.image.addEventListener("canplaythrough",n,!1),t.image.addEventListener("error",o,!1),!t.image||!t.image.getAttribute("two-src")){if(e.Utils.isHeadless)throw new e.Utils.Error("video textures are not implemented in headless environments.");t.image.setAttribute("two-src",t.src),s.ImageRegistry.add(t.src,t.image),t.image.src=t.src,t.image.loop=!0,t.image.load()}}},load:function(e,t){e.src;var i=e.image,r=i&&i.nodeName.toLowerCase();e._flagImage&&(/canvas/i.test(r)?s.Register.canvas(e,t):(e._src=i.getAttribute("two-src")||i.src,s.Register[r](e,t))),e._flagSrc&&(i||(e.image=s.getImage(e.src)),r=e.image.nodeName.toLowerCase(),s.Register[r](e,t))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(t){r.each(s.Properties,e.Utils.defineProperty,t),Object.defineProperty(t,"image",{enumerable:!0,get:function(){return this._image},set:function(e){var t;if("canvas"===(e&&e.nodeName.toLowerCase()))t="#"+e.id;else t=e.src;s.ImageRegistry.contains(t)?this._image=s.ImageRegistry.get(e.src):this._image=e,this._flagImage=!0}}),Object.defineProperty(t,"offset",{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(e.Events.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(e.Events.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof e.Vector&&this._scale.unbind(e.Events.change,this._renderer.flagScale),this._scale=t,this._scale instanceof e.Vector&&this._scale.bind(e.Events.change,this._renderer.flagScale),this._flagScale=!0}})}}),r.extend(s.prototype,e.Utils.Events,e.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,constructor:s,clone:function(){return new s(this.src)},toObject:function(){return{src:this.src,image:this.image}},_update:function(){return(this._flagSrc||this._flagImage)&&(this.trigger(e.Events.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,s.load(this,r.bind(function(){this.loaded=!0,this.trigger(e.Events.change).trigger(e.Events.load)},this)))),this._image&&4<=this._image.readyState&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),s.MakeObservable(s.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Path,r=e.Rectangle,n=e.Sprite=function(r,n,s,o,a,l){i.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0),this.noStroke(),this.noFill(),r instanceof e.Texture?this.texture=r:t.isString(r)&&(this.texture=new e.Texture(r)),this.origin=new e.Vector,this._update(),this.translation.set(n||0,s||0),t.isNumber(o)&&(this.columns=o),t.isNumber(a)&&(this.rows=a),t.isNumber(l)&&(this.frameRate=l)};t.extend(n,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(i){r.MakeObservable(i),t.each(n.Properties,e.Utils.defineProperty,i)}}),t.extend(n.prototype,r.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,_origin:null,constructor:n,play:function(e,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=t.performance.now(),t.isNumber(e)&&(this._firstFrame=e),t.isNumber(i)&&(this._lastFrame=i),t.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(e){var t=new n(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(t.play(this._firstFrame,this._lastFrame),t._loop=this._loop),e&&e.add(t),t},_update:function(){var e,i,n,s,o,a,l,c,h,d=this._texture,u=this._columns,f=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){e=(l=d.image.width)/u,i=(c=d.image.height)/f,s=this._amount,this.width!==e&&(this.width=e),this.height!==i&&(this.height=i),this._playing&&0<this._frameRate&&(t.isNaN(this._lastFrame)&&(this._lastFrame=s-1),n=t.performance.now()-this._startTime,o=1e3*((h=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?n%=o:n=Math.min(n,o),a=t.lerp(this._firstFrame,h,n/o),(a=Math.floor(a))!==this._index&&(this._index=a)>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame());var g=-e*(this._index%u)+(l-e)/2,p=-i*Math.floor(this._index/u)+(c-i)/2;g!==d.offset.x&&(d.offset.x=g),p!==d.offset.y&&(d.offset.y=p)}return r.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=e.Utils,i=e.Path,r=e.Rectangle,n=e.ImageSequence=function(r,s,o,a){i.call(this,[new e.Anchor,new e.Anchor,new e.Anchor,new e.Anchor],!0),this._renderer.flagTextures=t.bind(n.FlagTextures,this),this._renderer.bindTextures=t.bind(n.BindTextures,this),this._renderer.unbindTextures=t.bind(n.UnbindTextures,this),this.noStroke(),this.noFill(),this.textures=t.map(r,n.GenerateTexture,this),this.origin=new e.Vector,this._update(),this.translation.set(s||0,o||0),t.isNumber(a)?this.frameRate=a:this.frameRate=n.DefaultFrameRate};t.extend(n,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(t){for(var i=t.length;i--;)t[i].bind(e.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(t){for(var i=t.length;i--;)t[i].unbind(e.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(i){r.MakeObservable(i),t.each(n.Properties,e.Utils.defineProperty,i),Object.defineProperty(i,"textures",{enumerable:!0,get:function(){return this._textures},set:function(t){this._renderer.flagTextures;var i=this._renderer.bindTextures,r=this._renderer.unbindTextures;this._textures&&this._textures.unbind(e.Events.insert,i).unbind(e.Events.remove,r),this._textures=new e.Utils.Collection((t||[]).slice(0)),this._textures.bind(e.Events.insert,i).bind(e.Events.remove,r),i(this._textures)}})},GenerateTexture:function(i){return i instanceof e.Texture?i:t.isString(i)?new e.Texture(i):void 0}}),t.extend(n.prototype,r.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,_origin:null,constructor:n,play:function(e,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=t.performance.now(),t.isNumber(e)&&(this._firstFrame=e),t.isNumber(i)&&(this._lastFrame=i),t.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(e){var t=new n(this.textures,this.translation.x,this.translation.y,this.frameRate);return t._loop=this._loop,this._playing&&t.play(),e&&e.add(t),t},_update:function(){var i,n,s,o,a,l,c,h,d=this._textures;return this._flagTextures&&(this._amount=d.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&0<this._frameRate?(o=this._amount,t.isNaN(this._lastFrame)&&(this._lastFrame=o-1),s=t.performance.now()-this._startTime,a=1e3*((h=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?s%=a:s=Math.min(s,a),c=t.lerp(this._firstFrame,h,s/a),(c=Math.floor(c))!==this._index&&(this._index=c,(l=d[this._index]).loaded&&(i=l.image.width,n=l.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n),this.fill=l,c>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof e.Texture||((l=d[this._index]).loaded&&(i=l.image.width,n=l.image.height,this.width!==i&&(this.width=i),this.height!==n&&(this.height=n)),this.fill=l),r.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){var t=Math.min,i=Math.max,r=e.Utils,n=function(){e.Utils.Collection.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(e.Events.insert,this.attach),this.on(e.Events.remove,this.detach),n.prototype.attach.apply(this,arguments)};n.prototype=new e.Utils.Collection,r.extend(n.prototype,{constructor:n,attach:function(e){for(var t=0;t<e.length;t++)this.ids[e[t].id]=e[t];return this},detach:function(e){for(var t=0;t<e.length;t++)delete this.ids[e[t].id];return this}});var s=e.Group=function(t){e.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=r.isArray(t)?t:arguments};function o(e,t){var i,n=e.parent;return n===t?(this.additions.push(e),void(this._flagAdditions=!0)):(n&&n.children.ids[e.id]&&(i=r.indexOf(n.children,e),n.children.splice(i,1),0<=(i=r.indexOf(n.additions,e))?n.additions.splice(i,1):(n.subtractions.push(e),n._flagSubtractions=!0)),t?(e.parent=t,this.additions.push(e),void(this._flagAdditions=!0)):(0<=(i=r.indexOf(this.additions,e))?this.additions.splice(i,1):(this.subtractions.push(e),this._flagSubtractions=!0),void delete e.parent))}r.extend(s,{Children:n,InsertChildren:function(e){for(var t=0;t<e.length;t++)o.call(this,e[t],this)},RemoveChildren:function(e){for(var t=0;t<e.length;t++)o.call(this,e[t])},OrderChildren:function(e){this._flagOrder=!0},Properties:["fill","stroke","linewidth","visible","cap","join","miter"],MakeObservable:function(t){var i=e.Group.Properties;Object.defineProperty(t,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(e){this._flagOpacity=this._opacity!==e,this._opacity=e}}),Object.defineProperty(t,"className",{enumerable:!0,get:function(){return this._className},set:function(e){this._flagClassName=this._className!==e,this._className=e}}),Object.defineProperty(t,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(e){this._flagBeginning=this._beginning!==e,this._beginning=e}}),Object.defineProperty(t,"ending",{enumerable:!0,get:function(){return this._ending},set:function(e){this._flagEnding=this._ending!==e,this._ending=e}}),Object.defineProperty(t,"length",{enumerable:!0,get:function(){if(this._flagLength||this._length<=0)for(var e=this._length=0;e<this.children.length;e++){var t=this.children[e];this._length+=t.length}return this._length}}),e.Shape.MakeObservable(t),s.MakeGetterSetters(t,i),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return this._children},set:function(t){var i=r.bind(s.InsertChildren,this),o=r.bind(s.RemoveChildren,this),a=r.bind(s.OrderChildren,this);this._children&&this._children.unbind(),this._children=new n(t),this._children.bind(e.Events.insert,i),this._children.bind(e.Events.remove,o),this._children.bind(e.Events.order,a)}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,e.clip||(e.clip=!0)}})},MakeGetterSetters:function(e,t){r.isArray(t)||(t=[t]),r.each(t,function(t){s.MakeGetterSetter(e,t)})},MakeGetterSetter:function(e,t){var i="_"+t;Object.defineProperty(e,t,{enumerable:!0,get:function(){return this[i]},set:function(e){this[i]=e,r.each(this.children,function(i){i[t]=e})}})}}),r.extend(s.prototype,e.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagClassName:!1,_flagBeginning:!1,_flagEnding:!1,_flagLength:!1,_flagMask:!1,_fill:"currentcolor",_stroke:"currentcolor",_linewidth:1,_opacity:1,_className:"",_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_length:0,_mask:null,constructor:s,clone:function(e){var t=new s,i=r.map(this.children,function(e){return e.clone()});return t.add(i),t.opacity=this.opacity,this.mask&&(t.mask=this.mask),t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.className=this.className,e&&e.add(t),t._update()},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof e.Vector?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return r.each(this.children,function(e,i){t.children[i]=e.toObject()},this),t},corner:function(){var e=this.getBoundingClientRect(!0),t={x:e.left,y:e.top};return this.children.forEach(function(e){e.translation.sub(t)}),this},center:function(){var e=this.getBoundingClientRect(!0);return e.centroid={x:e.left+e.width/2,y:e.top+e.height/2},this.children.forEach(function(t){t.isShape&&t.translation.sub(e.centroid)}),this},getById:function(e){var t=function(e,i){if(e.id===i)return e;if(e.children)for(var r=e.children.length;r--;){var n=t(e.children[r],i);if(n)return n}};return t(this,e)||null},getByClassName:function(e){var t=[],i=function(e,r){return-1!=e.classList.indexOf(r)?t.push(e):e.children&&e.children.forEach(function(e){i(e,r)}),t};return i(this,e)},getByType:function(t){var i=[],r=function(t,n){for(var s in t.children)t.children[s]instanceof n?i.push(t.children[s]):t.children[s]instanceof e.Group&&r(t.children[s],n);return i};return r(this,t)},add:function(e){e=e instanceof Array?e.slice():r.toArray(arguments);for(var t=0;t<e.length;t++)e[t]&&e[t].id&&this.children.push(e[t]);return this},remove:function(e){var t=arguments.length,i=this.parent;if(t<=0&&i)return i.remove(this),this;e=e instanceof Array?e.slice():r.toArray(arguments);for(var n=0;n<e.length;n++)e[n]&&this.children.ids[e[n].id]&&this.children.splice(r.indexOf(this.children,e[n]),1);return this},getBoundingClientRect:function(n){var s;this._update(!0);for(var o=1/0,a=-1/0,l=1/0,c=-1/0,h=e.Texture.RegularExpressions.effect,d=0;d<this.children.length;d++){var u=this.children[d];u.visible&&!h.test(u._renderer.type)&&(s=u.getBoundingClientRect(n),r.isNumber(s.top)&&r.isNumber(s.left)&&r.isNumber(s.right)&&r.isNumber(s.bottom)&&(l=t(s.top,l),o=t(s.left,o),a=i(s.right,a),c=i(s.bottom,c)))}return{top:l,left:o,right:a,bottom:c,width:a-o,height:c-l}},noFill:function(){return this.children.forEach(function(e){e.noFill()}),this},noStroke:function(){return this.children.forEach(function(e){e.noStroke()}),this},subdivide:function(){var e=arguments;return this.children.forEach(function(t){t.subdivide.apply(t,e)}),this},_update:function(){if(this._flagBeginning||this._flagEnding)for(var t=Math.min(this._beginning,this._ending),i=Math.max(this._beginning,this._ending),r=this.length,n=0,s=t*r,o=i*r,a=0;a<this.children.length;a++){var l=this.children[a],c=l.length;l.ending=n+c<s?l.beginning=1:o<n?l.beginning=0:n<s&&s<n+c?(l.beginning=(s-n)/c,1):n<o&&o<n+c?(l.beginning=0,(o-n)/c):(l.beginning=0,1),n+=c}return e.Shape.prototype._update.apply(this,arguments)},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagClassName,this._flagBeginning=this._flagEnding=!1,e.Shape.prototype.flagReset.call(this),this}}),s.MakeObservable(s.prototype)}(("undefined"!=typeof global?global:this||self||window).Two),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Matter=e()}(function(){return function e(t,i,r){function n(o,a){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};t[o][0].call(h.exports,function(e){return n(t[o][1][e]||e)},h,h.exports,e,t,i,r)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),o=e("../core/Sleeping"),a=(e("../render/Render"),e("../core/Common")),l=e("../geometry/Bounds"),c=e("../geometry/Axes");!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(t){var i={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},r=a.extend(i,t);return e(r,t),r},r.nextGroup=function(e){return e?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var e=function(e,t){t=t||{},r.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||s.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),n.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),l.update(e.bounds,e.vertices,e.velocity),r.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var i=e.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||i,e.render.strokeStyle=e.render.strokeStyle||"currentcolor",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};r.set=function(e,t,i){var n;for(n in"string"==typeof t&&(n=t,(t={})[n]=i),t)if(i=t[n],t.hasOwnProperty(n))switch(n){case"isStatic":r.setStatic(e,i);break;case"isSleeping":o.set(e,i);break;case"mass":r.setMass(e,i);break;case"density":r.setDensity(e,i);break;case"inertia":r.setInertia(e,i);break;case"vertices":r.setVertices(e,i);break;case"position":r.setPosition(e,i);break;case"angle":r.setAngle(e,i);break;case"velocity":r.setVelocity(e,i);break;case"angularVelocity":r.setAngularVelocity(e,i);break;case"parts":r.setParts(e,i);break;default:e[n]=i}},r.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var r=e.parts[i];(r.isStatic=t)?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,delete r._original)}},r.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},r.setDensity=function(e,t){r.setMass(e,t*e.area),e.density=t},r.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},r.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=n.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=n.area(e.vertices),r.setMass(e,e.density*e.area);var i=n.centre(e.vertices);n.translate(e.vertices,i,-1),r.setInertia(e,r._inertiaScale*n.inertia(e.vertices,e.mass)),n.translate(e.vertices,e.position),l.update(e.bounds,e.vertices,e.velocity)},r.setParts=function(e,t,i){var s;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,s=0;s<t.length;s++){var o=t[s];o!==e&&(o.parent=e).parts.push(o)}if(1!==e.parts.length){if(i=void 0===i||i){var a=[];for(s=0;s<t.length;s++)a=a.concat(t[s].vertices);n.clockwiseSort(a);var l=n.hull(a),c=n.centre(l);r.setVertices(e,l),n.translate(e.vertices,c)}var h=r._totalProperties(e);e.area=h.area,(e.parent=e).position.x=h.centre.x,e.position.y=h.centre.y,e.positionPrev.x=h.centre.x,e.positionPrev.y=h.centre.y,r.setMass(e,h.mass),r.setInertia(e,h.inertia),r.setPosition(e,h.centre)}},r.setPosition=function(e,t){var i=s.sub(t,e.position);e.positionPrev.x+=i.x,e.positionPrev.y+=i.y;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.position.x+=i.x,o.position.y+=i.y,n.translate(o.vertices,i),l.update(o.bounds,o.vertices,e.velocity)}},r.setAngle=function(e,t){var i=t-e.angle;e.anglePrev+=i;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.angle+=i,n.rotate(o.vertices,i,e.position),c.rotate(o.axes,i),l.update(o.bounds,o.vertices,e.velocity),0<r&&s.rotateAbout(o.position,i,e.position,o.position)}},r.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=s.magnitude(e.velocity)},r.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},r.translate=function(e,t){r.setPosition(e,s.add(e.position,t))},r.rotate=function(e,t,i){if(i){var n=Math.cos(t),s=Math.sin(t),o=e.position.x-i.x,a=e.position.y-i.y;r.setPosition(e,{x:i.x+(o*n-a*s),y:i.y+(o*s+a*n)}),r.setAngle(e,e.angle+t)}else r.setAngle(e,e.angle+t)},r.scale=function(e,t,i,s){var o=0,a=0;s=s||e.position;for(var h=0;h<e.parts.length;h++){var d=e.parts[h];n.scale(d.vertices,t,i,s),d.axes=c.fromVertices(d.vertices),d.area=n.area(d.vertices),r.setMass(d,e.density*d.area),n.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),r.setInertia(d,r._inertiaScale*n.inertia(d.vertices,d.mass)),n.translate(d.vertices,{x:d.position.x,y:d.position.y}),0<h&&(o+=d.area,a+=d.inertia),d.position.x=s.x+(d.position.x-s.x)*t,d.position.y=s.y+(d.position.y-s.y)*i,l.update(d.bounds,d.vertices,e.velocity)}1<e.parts.length&&(e.area=o,e.isStatic||(r.setMass(e,e.density*o),r.setInertia(e,a))),e.circleRadius&&(t===i?e.circleRadius*=t:e.circleRadius=null)},r.update=function(e,t,i,r){var o=Math.pow(t*i*e.timeScale,2),a=1-e.frictionAir*i*e.timeScale,h=e.position.x-e.positionPrev.x,d=e.position.y-e.positionPrev.y;e.velocity.x=h*a*r+e.force.x/e.mass*o,e.velocity.y=d*a*r+e.force.y/e.mass*o,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*a*r+e.torque/e.inertia*o,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=s.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var u=0;u<e.parts.length;u++){var f=e.parts[u];n.translate(f.vertices,e.velocity),0<u&&(f.position.x+=e.velocity.x,f.position.y+=e.velocity.y),0!==e.angularVelocity&&(n.rotate(f.vertices,e.angularVelocity,e.position),c.rotate(f.axes,e.angularVelocity),0<u&&s.rotateAbout(f.position,e.angularVelocity,e.position,f.position)),l.update(f.bounds,f.vertices,e.velocity)}},r.applyForce=function(e,t,i){e.force.x+=i.x,e.force.y+=i.y;var r=t.x-e.position.x,n=t.y-e.position.y;e.torque+=r*i.y-n*i.x},r._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===e.parts.length?0:1;i<e.parts.length;i++){var r=e.parts[i],n=r.mass!==1/0?r.mass:1;t.mass+=n,t.area+=r.area,t.inertia+=r.inertia,t.centre=s.add(t.centre,s.mult(r.position,n))}return t.centre=s.div(t.centre,t.mass),t}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,i){var r={};t.exports=r;var n=e("../core/Events"),s=e("../core/Common"),o=e("../geometry/Bounds"),a=e("./Body");r.create=function(e){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},r.setModified=function(e,t,i,n){if(e.isModified=t,i&&e.parent&&r.setModified(e.parent,t,i,n),n)for(var s=0;s<e.composites.length;s++){var o=e.composites[s];r.setModified(o,t,i,n)}},r.add=function(e,t){var i=[].concat(t);n.trigger(e,"beforeAdd",{object:t});for(var o=0;o<i.length;o++){var a=i[o];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(e,a);break;case"constraint":r.addConstraint(e,a);break;case"composite":r.addComposite(e,a);break;case"mouseConstraint":r.addConstraint(e,a.constraint)}}return n.trigger(e,"afterAdd",{object:t}),e},r.remove=function(e,t,i){var s=[].concat(t);n.trigger(e,"beforeRemove",{object:t});for(var o=0;o<s.length;o++){var a=s[o];switch(a.type){case"body":r.removeBody(e,a,i);break;case"constraint":r.removeConstraint(e,a,i);break;case"composite":r.removeComposite(e,a,i);break;case"mouseConstraint":r.removeConstraint(e,a.constraint)}}return n.trigger(e,"afterRemove",{object:t}),e},r.addComposite=function(e,t){return e.composites.push(t),t.parent=e,r.setModified(e,!0,!0,!1),e},r.removeComposite=function(e,t,i){var n=s.indexOf(e.composites,t);if(-1!==n&&(r.removeCompositeAt(e,n),r.setModified(e,!0,!0,!1)),i)for(var o=0;o<e.composites.length;o++)r.removeComposite(e.composites[o],t,!0);return e},r.removeCompositeAt=function(e,t){return e.composites.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addBody=function(e,t){return e.bodies.push(t),r.setModified(e,!0,!0,!1),e},r.removeBody=function(e,t,i){var n=s.indexOf(e.bodies,t);if(-1!==n&&(r.removeBodyAt(e,n),r.setModified(e,!0,!0,!1)),i)for(var o=0;o<e.composites.length;o++)r.removeBody(e.composites[o],t,!0);return e},r.removeBodyAt=function(e,t){return e.bodies.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addConstraint=function(e,t){return e.constraints.push(t),r.setModified(e,!0,!0,!1),e},r.removeConstraint=function(e,t,i){var n=s.indexOf(e.constraints,t);if(-1!==n&&r.removeConstraintAt(e,n),i)for(var o=0;o<e.composites.length;o++)r.removeConstraint(e.composites[o],t,!0);return e},r.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),r.setModified(e,!0,!0,!1),e},r.clear=function(e,t,i){if(i)for(var n=0;n<e.composites.length;n++)r.clear(e.composites[n],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,r.setModified(e,!0,!0,!1),e},r.allBodies=function(e){for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(r.allBodies(e.composites[i]));return t},r.allConstraints=function(e){for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(r.allConstraints(e.composites[i]));return t},r.allComposites=function(e){for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(r.allComposites(e.composites[i]));return t},r.get=function(e,t,i){var n,s;switch(i){case"body":n=r.allBodies(e);break;case"constraint":n=r.allConstraints(e);break;case"composite":n=r.allComposites(e).concat(e)}return n?0===(s=n.filter(function(e){return e.id.toString()===t.toString()})).length?null:s[0]:null},r.move=function(e,t,i){return r.remove(e,t),r.add(i,t),e},r.rebase=function(e){for(var t=r.allBodies(e).concat(r.allConstraints(e)).concat(r.allComposites(e)),i=0;i<t.length;i++)t[i].id=s.nextId();return r.setModified(e,!0,!0,!1),e},r.translate=function(e,t,i){for(var n=i?r.allBodies(e):e.bodies,s=0;s<n.length;s++)a.translate(n[s],t);return r.setModified(e,!0,!0,!1),e},r.rotate=function(e,t,i,n){for(var s=Math.cos(t),o=Math.sin(t),l=n?r.allBodies(e):e.bodies,c=0;c<l.length;c++){var h=l[c],d=h.position.x-i.x,u=h.position.y-i.y;a.setPosition(h,{x:i.x+(d*s-u*o),y:i.y+(d*o+u*s)}),a.rotate(h,t)}return r.setModified(e,!0,!0,!1),e},r.scale=function(e,t,i,n,s){for(var o=s?r.allBodies(e):e.bodies,l=0;l<o.length;l++){var c=o[l],h=c.position.x-n.x,d=c.position.y-n.y;a.setPosition(c,{x:n.x+h*t,y:n.y+d*i}),a.scale(c,t,i)}return r.setModified(e,!0,!0,!1),e},r.bounds=function(e){for(var t=r.allBodies(e),i=[],n=0;n<t.length;n+=1){var s=t[n];i.push(s.bounds.min,s.bounds.max)}return o.create(i)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,i){var r={};t.exports=r;var n=e("./Composite"),s=(e("../constraint/Constraint"),e("../core/Common"));r.create=function(e){var t=n.create();return s.extend(t,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},e)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,i){var r={};(t.exports=r).create=function(e){return{id:r.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},r.id=function(e){return e.body.id+"_"+e.index}},{}],5:[function(e,t,i){var r={};t.exports=r;var n=e("./SAT"),s=e("./Pair"),o=e("../geometry/Bounds");r.collisions=function(e,t){for(var i=[],a=t.pairs.table,l=0;l<e.length;l++){var c=e[l][0],h=e[l][1];if((!c.isStatic&&!c.isSleeping||!h.isStatic&&!h.isSleeping)&&r.canCollide(c.collisionFilter,h.collisionFilter)&&o.overlaps(c.bounds,h.bounds))for(var d=1<c.parts.length?1:0;d<c.parts.length;d++)for(var u=c.parts[d],f=1<h.parts.length?1:0;f<h.parts.length;f++){var g=h.parts[f];if(u===c&&g===h||o.overlaps(u.bounds,g.bounds)){var p,m=a[s.id(u,g)];p=m&&m.isActive?m.collision:null;var v=n.collides(u,g,p);v.collided&&i.push(v)}}}return i},r.canCollide=function(e,t){return e.group===t.group&&0!==e.group?0<e.group:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,i){var r={};t.exports=r;var n=e("./Pair"),s=e("./Detector"),o=e("../core/Common");r.create=function(e){var t={controller:r,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(t,e)},r.update=function(e,t,i,n){var s,o,a,l,c,h=i.world,d=e.buckets,u=!1;for(s=0;s<t.length;s++){var f=t[s];if((!f.isSleeping||n)&&!(f.bounds.max.x<h.bounds.min.x||f.bounds.min.x>h.bounds.max.x||f.bounds.max.y<h.bounds.min.y||f.bounds.min.y>h.bounds.max.y)){var g=r._getRegion(e,f);if(!f.region||g.id!==f.region.id||n){f.region&&!n||(f.region=g);var p=r._regionUnion(g,f.region);for(o=p.startCol;o<=p.endCol;o++)for(a=p.startRow;a<=p.endRow;a++){l=d[c=r._getBucketId(o,a)];var m=o>=g.startCol&&o<=g.endCol&&a>=g.startRow&&a<=g.endRow,v=o>=f.region.startCol&&o<=f.region.endCol&&a>=f.region.startRow&&a<=f.region.endRow;!m&&v&&v&&l&&r._bucketRemoveBody(e,l,f),(f.region===g||m&&!v||n)&&(l||(l=r._createBucket(d,c)),r._bucketAddBody(e,l,f))}f.region=g,u=!0}}}u&&(e.pairsList=r._createActivePairsList(e))},r.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},r._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),n=Math.max(e.endCol,t.endCol),s=Math.min(e.startRow,t.startRow),o=Math.max(e.endRow,t.endRow);return r._createRegion(i,n,s,o)},r._getRegion=function(e,t){var i=t.bounds,n=Math.floor(i.min.x/e.bucketWidth),s=Math.floor(i.max.x/e.bucketWidth),o=Math.floor(i.min.y/e.bucketHeight),a=Math.floor(i.max.y/e.bucketHeight);return r._createRegion(n,s,o,a)},r._createRegion=function(e,t,i,r){return{id:e+","+t+","+i+","+r,startCol:e,endCol:t,startRow:i,endRow:r}},r._getBucketId=function(e,t){return"C"+e+"R"+t},r._createBucket=function(e,t){return e[t]=[]},r._bucketAddBody=function(e,t,i){for(var r=0;r<t.length;r++){var s=t[r];if(!(i.id===s.id||i.isStatic&&s.isStatic)){var o=n.id(i,s),a=e.pairs[o];a?a[2]+=1:e.pairs[o]=[i,s,1]}}t.push(i)},r._bucketRemoveBody=function(e,t,i){t.splice(o.indexOf(t,i),1);for(var r=0;r<t.length;r++){var s=t[r],a=n.id(i,s),l=e.pairs[a];l&&(l[2]-=1)}},r._createActivePairsList=function(e){var t,i,r=[];t=o.keys(e.pairs);for(var n=0;n<t.length;n++)0<(i=e.pairs[t[n]])[2]?r.push(i):delete e.pairs[t[n]];return r}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,i){var r={};t.exports=r;var n=e("./Contact");r.create=function(e,t){var i=e.bodyA,n=e.bodyB,s=e.parentA,o=e.parentB,a={id:r.id(i,n),bodyA:i,bodyB:n,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:i.isSensor||n.isSensor,timeCreated:t,timeUpdated:t,inverseMass:s.inverseMass+o.inverseMass,friction:Math.min(s.friction,o.friction),frictionStatic:Math.max(s.frictionStatic,o.frictionStatic),restitution:Math.max(s.restitution,o.restitution),slop:Math.max(s.slop,o.slop)};return r.update(a,e,t),a},r.update=function(e,t,i){var s=e.contacts,o=t.supports,a=e.activeContacts,l=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=l.inverseMass+c.inverseMass,e.friction=Math.min(l.friction,c.friction),e.frictionStatic=Math.max(l.frictionStatic,c.frictionStatic),e.restitution=Math.max(l.restitution,c.restitution),e.slop=Math.max(l.slop,c.slop),a.length=0,t.collided){for(var h=0;h<o.length;h++){var d=o[h],u=n.id(d),f=s[u];f?a.push(f):a.push(s[u]=n.create(d))}e.separation=t.depth,r.setActive(e,!0,i)}else!0===e.isActive&&r.setActive(e,!1,i)},r.setActive=function(e,t,i){t?(e.isActive=!0,e.timeUpdated=i):(e.isActive=!1,e.activeContacts.length=0)},r.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":4}],8:[function(e,t,i){var r={};t.exports=r;var n=e("./Pair"),s=e("../core/Common");r._pairMaxIdleLife=1e3,r.create=function(e){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},r.update=function(e,t,i){var r,o,a,l,c=e.list,h=e.table,d=e.collisionStart,u=e.collisionEnd,f=e.collisionActive,g=[];for(d.length=0,u.length=0,l=f.length=0;l<t.length;l++)(r=t[l]).collided&&(o=n.id(r.bodyA,r.bodyB),g.push(o),(a=h[o])?(a.isActive?f.push(a):d.push(a),n.update(a,r,i)):(a=n.create(r,i),h[o]=a,d.push(a),c.push(a)));for(l=0;l<c.length;l++)(a=c[l]).isActive&&-1===s.indexOf(g,a.id)&&(n.setActive(a,!1,i),u.push(a))},r.removeOld=function(e,t){var i,n,s,o,a=e.list,l=e.table,c=[];for(o=0;o<a.length;o++)(n=(i=a[o]).collision).bodyA.isSleeping||n.bodyB.isSleeping?i.timeUpdated=t:t-i.timeUpdated>r._pairMaxIdleLife&&c.push(o);for(o=0;o<c.length;o++)delete l[(i=a[s=c[o]-o]).id],a.splice(s,1)},r.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":14,"./Pair":7}],9:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vector"),s=e("./SAT"),o=e("../geometry/Bounds"),a=e("../factory/Bodies"),l=e("../geometry/Vertices");r.collides=function(e,t){for(var i=[],r=0;r<t.length;r++){var n=t[r];if(o.overlaps(n.bounds,e.bounds))for(var a=1===n.parts.length?0:1;a<n.parts.length;a++){var l=n.parts[a];if(o.overlaps(l.bounds,e.bounds)){var c=s.collides(l,e);if(c.collided){i.push(c);break}}}}return i},r.ray=function(e,t,i,s){s=s||1e-100;for(var o=n.angle(t,i),l=n.magnitude(n.sub(t,i)),c=.5*(i.x+t.x),h=.5*(i.y+t.y),d=a.rectangle(c,h,l,s,{angle:o}),u=r.collides(d,e),f=0;f<u.length;f+=1){var g=u[f];g.body=g.bodyB=g.bodyA}return u},r.region=function(e,t,i){for(var r=[],n=0;n<e.length;n++){var s=e[n],a=o.overlaps(s.bounds,t);(a&&!i||!a&&i)&&r.push(s)}return r},r.point=function(e,t){for(var i=[],r=0;r<e.length;r++){var n=e[r];if(o.contains(n.bounds,t))for(var s=1===n.parts.length?0:1;s<n.parts.length;s++){var a=n.parts[s];if(o.contains(a.bounds,t)&&l.contains(a.vertices,t)){i.push(n);break}}}return i}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),o=e("../core/Common"),a=e("../geometry/Bounds");r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(e){var t,i,r;for(t=0;t<e.length;t++)(i=e[t]).isActive&&(r=i.activeContacts.length,i.collision.parentA.totalContacts+=r,i.collision.parentB.totalContacts+=r)},r.solvePosition=function(e,t){var i,n,o,a,l,c,h,d,u,f=s._temp[0],g=s._temp[1],p=s._temp[2],m=s._temp[3];for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(a=(o=n.collision).parentA,l=o.parentB,c=o.normal,h=s.sub(s.add(l.positionImpulse,l.position,f),s.add(a.positionImpulse,s.sub(l.position,o.penetration,g),p),m),n.separation=s.dot(c,h));for(i=0;i<e.length;i++)(n=e[i]).isActive&&!n.isSensor&&(a=(o=n.collision).parentA,l=o.parentB,c=o.normal,u=(n.separation-n.slop)*t,(a.isStatic||l.isStatic)&&(u*=2),a.isStatic||a.isSleeping||(d=r._positionDampen/a.totalContacts,a.positionImpulse.x+=c.x*u*d,a.positionImpulse.y+=c.y*u*d),l.isStatic||l.isSleeping||(d=r._positionDampen/l.totalContacts,l.positionImpulse.x-=c.x*u*d,l.positionImpulse.y-=c.y*u*d))},r.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];if((i.totalContacts=0)!==i.positionImpulse.x||0!==i.positionImpulse.y){for(var o=0;o<i.parts.length;o++){var l=i.parts[o];n.translate(l.vertices,i.positionImpulse),a.update(l.bounds,l.vertices,i.velocity),l.position.x+=i.positionImpulse.x,l.position.y+=i.positionImpulse.y}i.positionPrev.x+=i.positionImpulse.x,i.positionPrev.y+=i.positionImpulse.y,s.dot(i.positionImpulse,i.velocity)<0?(i.positionImpulse.x=0,i.positionImpulse.y=0):(i.positionImpulse.x*=r._positionWarming,i.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(e){var t,i,r,n,o,a,l,c,h,d,u,f,g,p,m=s._temp[0],v=s._temp[1];for(t=0;t<e.length;t++)if((r=e[t]).isActive&&!r.isSensor)for(n=r.activeContacts,a=(o=r.collision).parentA,l=o.parentB,c=o.normal,h=o.tangent,i=0;i<n.length;i++)u=(d=n[i]).vertex,f=d.normalImpulse,g=d.tangentImpulse,0===f&&0===g||(m.x=c.x*f+h.x*g,m.y=c.y*f+h.y*g,a.isStatic||a.isSleeping||(p=s.sub(u,a.position,v),a.positionPrev.x+=m.x*a.inverseMass,a.positionPrev.y+=m.y*a.inverseMass,a.anglePrev+=s.cross(p,m)*a.inverseInertia),l.isStatic||l.isSleeping||(p=s.sub(u,l.position,v),l.positionPrev.x-=m.x*l.inverseMass,l.positionPrev.y-=m.y*l.inverseMass,l.anglePrev-=s.cross(p,m)*l.inverseInertia))},r.solveVelocity=function(e,t){for(var i=t*t,n=s._temp[0],a=s._temp[1],l=s._temp[2],c=s._temp[3],h=s._temp[4],d=s._temp[5],u=0;u<e.length;u++){var f=e[u];if(f.isActive&&!f.isSensor){var g=f.collision,p=g.parentA,m=g.parentB,v=g.normal,y=g.tangent,_=f.activeContacts,x=1/_.length;p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,m.angularVelocity=m.angle-m.anglePrev;for(var b=0;b<_.length;b++){var w=_[b],S=w.vertex,C=s.sub(S,p.position,a),A=s.sub(S,m.position,l),k=s.add(p.velocity,s.mult(s.perp(C),p.angularVelocity),c),M=s.add(m.velocity,s.mult(s.perp(A),m.angularVelocity),h),P=s.sub(k,M,d),R=s.dot(v,P),E=s.dot(y,P),B=Math.abs(E),T=o.sign(E),F=(1+f.restitution)*R,I=o.clamp(f.separation+R,0,1)*r._frictionNormalMultiplier,O=E,U=1/0;B>f.friction*f.frictionStatic*I*i&&(U=B,O=o.clamp(f.friction*T*i,-U,U));var L=s.cross(C,v),V=s.cross(A,v),N=x/(p.inverseMass+m.inverseMass+p.inverseInertia*L*L+m.inverseInertia*V*V);if(F*=N,O*=N,R<0&&R*R>r._restingThresh*i)w.normalImpulse=0;else{var j=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+F,0),F=w.normalImpulse-j}if(E*E>r._restingThreshTangent*i)w.tangentImpulse=0;else{var G=w.tangentImpulse;w.tangentImpulse=o.clamp(w.tangentImpulse+O,-U,U),O=w.tangentImpulse-G}n.x=v.x*F+y.x*O,n.y=v.y*F+y.y*O,p.isStatic||p.isSleeping||(p.positionPrev.x+=n.x*p.inverseMass,p.positionPrev.y+=n.y*p.inverseMass,p.anglePrev+=s.cross(C,n)*p.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=n.x*m.inverseMass,m.positionPrev.y-=n.y*m.inverseMass,m.anglePrev-=s.cross(A,n)*m.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vertices"),s=e("../geometry/Vector");r.collides=function(e,t,i){var o,a,l,c,h=!1;if(i){var d=e.parent,u=t.parent,f=d.speed*d.speed+d.angularSpeed*d.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed;h=i&&i.collided&&f<.2,c=i}else c={collided:!1,bodyA:e,bodyB:t};if(i&&h){var g=c.axisBody,p=g===e?t:e,m=[g.axes[i.axisNumber]];if(l=r._overlapAxes(g.vertices,p.vertices,m),c.reused=!0,l.overlap<=0)return c.collided=!1,c}else{if((o=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;if((a=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;o.overlap<a.overlap?(l=o,c.axisBody=e):(l=a,c.axisBody=t),c.axisNumber=l.axisNumber}c.bodyA=e.id<t.id?e:t,c.bodyB=e.id<t.id?t:e,c.collided=!0,c.depth=l.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,e=c.bodyA,t=c.bodyB,s.dot(l.axis,s.sub(t.position,e.position))<0?c.normal={x:l.axis.x,y:l.axis.y}:c.normal={x:-l.axis.x,y:-l.axis.y},c.tangent=s.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var v=r._findSupports(e,t,c.normal),y=[];if(n.contains(e.vertices,v[0])&&y.push(v[0]),n.contains(e.vertices,v[1])&&y.push(v[1]),y.length<2){var _=r._findSupports(t,e,s.neg(c.normal));n.contains(t.vertices,_[0])&&y.push(_[0]),y.length<2&&n.contains(t.vertices,_[1])&&y.push(_[1])}return y.length<1&&(y=[v[0]]),c.supports=y,c},r._overlapAxes=function(e,t,i){for(var n,o,a=s._temp[0],l=s._temp[1],c={overlap:Number.MAX_VALUE},h=0;h<i.length;h++){if(o=i[h],r._projectToAxis(a,e,o),r._projectToAxis(l,t,o),(n=Math.min(a.max-l.min,l.max-a.min))<=0)return c.overlap=n,c;n<c.overlap&&(c.overlap=n,c.axis=o,c.axisNumber=h)}return c},r._projectToAxis=function(e,t,i){for(var r=s.dot(t[0],i),n=r,o=1;o<t.length;o+=1){var a=s.dot(t[o],i);n<a?n=a:a<r&&(r=a)}e.min=r,e.max=n},r._findSupports=function(e,t,i){for(var r,n,o,a,l=Number.MAX_VALUE,c=s._temp[0],h=t.vertices,d=e.position,u=0;u<h.length;u++)n=h[u],c.x=n.x-d.x,c.y=n.y-d.y,(r=-s.dot(i,c))<l&&(l=r,o=n);return n=h[0<=o.index-1?o.index-1:h.length-1],c.x=n.x-d.x,c.y=n.y-d.y,l=-s.dot(i,c),a=n,n=h[(o.index+1)%h.length],c.x=n.x-d.x,c.y=n.y-d.y,(r=-s.dot(i,c))<l&&(a=n),[o,a]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vertices"),s=e("../geometry/Vector"),o=e("../core/Sleeping"),a=e("../geometry/Bounds"),l=e("../geometry/Axes"),c=e("../core/Common");r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,n=s.magnitude(s.sub(i,r));t.length=void 0!==t.length?t.length:n,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(0<t.length?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var o={visible:!0,lineWidth:2,strokeStyle:"currentColorfff",type:"line",anchors:!0};return 0===t.length&&.1<t.stiffness?(o.type="pin",o.anchors=!1):t.stiffness<.9&&(o.type="spring"),t.render=c.extend(o,t.render),t},r.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],r=i.constraintImpulse;i.isStatic||0===r.x&&0===r.y&&0===r.angle||(i.position.x+=r.x,i.position.y+=r.y,i.angle+=r.angle)}},r.solveAll=function(e,t){for(var i=0;i<e.length;i+=1){var n=e[i],s=!n.bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(s||o)&&r.solve(e[i],t)}for(i=0;i<e.length;i+=1)s=!(n=e[i]).bodyA||n.bodyA&&n.bodyA.isStatic,o=!n.bodyB||n.bodyB&&n.bodyB.isStatic,s||o||r.solve(e[i],t)},r.solve=function(e,t){var i=e.bodyA,n=e.bodyB,o=e.pointA,a=e.pointB;if(i||n){i&&!i.isStatic&&(s.rotate(o,i.angle-e.angleA,o),e.angleA=i.angle),n&&!n.isStatic&&(s.rotate(a,n.angle-e.angleB,a),e.angleB=n.angle);var l=o,c=a;if(i&&(l=s.add(i.position,o)),n&&(c=s.add(n.position,a)),l&&c){var h=s.sub(l,c),d=s.magnitude(h);d<r._minLength&&(d=r._minLength);var u,f,g,p,m,v=(d-e.length)/d,y=e.stiffness<1?e.stiffness*t:e.stiffness,_=s.mult(h,v*y),x=(i?i.inverseMass:0)+(n?n.inverseMass:0),b=x+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(e.damping){var w=s.create();g=s.div(h,d),m=s.sub(n&&s.sub(n.position,n.positionPrev)||w,i&&s.sub(i.position,i.positionPrev)||w),p=s.dot(g,m)}i&&!i.isStatic&&(f=i.inverseMass/x,i.constraintImpulse.x-=_.x*f,i.constraintImpulse.y-=_.y*f,i.position.x-=_.x*f,i.position.y-=_.y*f,e.damping&&(i.positionPrev.x-=e.damping*g.x*p*f,i.positionPrev.y-=e.damping*g.y*p*f),u=s.cross(o,_)/b*r._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle-=u,i.angle-=u),n&&!n.isStatic&&(f=n.inverseMass/x,n.constraintImpulse.x+=_.x*f,n.constraintImpulse.y+=_.y*f,n.position.x+=_.x*f,n.position.y+=_.y*f,e.damping&&(n.positionPrev.x+=e.damping*g.x*p*f,n.positionPrev.y+=e.damping*g.y*p*f),u=s.cross(a,_)/b*r._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle+=u,n.angle+=u)}}},r.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],c=i.constraintImpulse;if(!(i.isStatic||0===c.x&&0===c.y&&0===c.angle)){o.set(i,!1);for(var h=0;h<i.parts.length;h++){var d=i.parts[h];n.translate(d.vertices,c),0<h&&(d.position.x+=c.x,d.position.y+=c.y),0!==c.angle&&(n.rotate(d.vertices,c.angle,i.position),l.rotate(d.axes,c.angle),0<h&&s.rotateAbout(d.position,c.angle,i.position,d.position)),a.update(d.bounds,d.vertices,i.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vertices"),s=e("../core/Sleeping"),o=e("../core/Mouse"),a=e("../core/Events"),l=e("../collision/Detector"),c=e("./Constraint"),h=e("../body/Composite"),d=e("../core/Common"),u=e("../geometry/Bounds");r.create=function(e,t){var i=(e?e.mouse:null)||(t?t.mouse:null);i||(e&&e.render&&e.render.canvas?i=o.create(e.render.canvas):t&&t.element?i=o.create(t.element):(i=o.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var n={type:"mouseConstraint",mouse:i,element:null,body:null,constraint:c.create({label:"Mouse Constraint",pointA:i.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},s=d.extend(n,t);return a.on(e,"beforeUpdate",function(){var t=h.allBodies(e.world);r.update(s,t),r._triggerEvents(s)}),s},r.update=function(e,t){var i=e.mouse,r=e.constraint,o=e.body;if(0===i.button){if(r.bodyB)s.set(r.bodyB,!1),r.pointA=i.position;else for(var c=0;c<t.length;c++)if(o=t[c],u.contains(o.bounds,i.position)&&l.canCollide(o.collisionFilter,e.collisionFilter))for(var h=1<o.parts.length?1:0;h<o.parts.length;h++){var d=o.parts[h];if(n.contains(d.vertices,i.position)){r.pointA=i.position,r.bodyB=e.body=o,r.pointB={x:i.position.x-o.position.x,y:i.position.y-o.position.y},r.angleB=o.angle,s.set(o,!1),a.trigger(e,"startdrag",{mouse:i,body:o});break}}}else r.bodyB=e.body=null,r.pointB=null,o&&a.trigger(e,"enddrag",{mouse:i,body:o})},r._triggerEvents=function(e){var t=e.mouse,i=t.sourceEvents;i.mousemove&&a.trigger(e,"mousemove",{mouse:t}),i.mousedown&&a.trigger(e,"mousedown",{mouse:t}),i.mouseup&&a.trigger(e,"mouseup",{mouse:t}),o.clearSourceEvents(t)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(e,t,i){(function(i){var r={};t.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r.extend=function(e,t){var i,n;n="boolean"==typeof t?(i=2,t):(i=1,!0);for(var s=i;s<arguments.length;s++){var o=arguments[s];if(o)for(var a in o)n&&o[a]&&o[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=o[a]:(e[a]=e[a]||{},r.extend(e[a],n,o[a])):e[a]=o[a]}return e},r.clone=function(e,t){return r.extend({},t,e)},r.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},r.values=function(e){var t=[];if(Object.keys){for(var i=Object.keys(e),r=0;r<i.length;r++)t.push(e[i[r]]);return t}for(var n in e)t.push(e[n]);return t},r.get=function(e,t,i,r){t=t.split(".").slice(i,r);for(var n=0;n<t.length;n+=1)e=e[t[n]];return e},r.set=function(e,t,i,n,s){var o=t.split(".").slice(n,s);return r.get(e,t,0,-1)[o[o.length-1]]=i},r.shuffle=function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(r.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},r.choose=function(e){return e[Math.floor(r.random()*e.length)]},r.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},r.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isFunction=function(e){return"function"==typeof e},r.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},r.isString=function(e){return"[object String]"===toString.call(e)},r.clamp=function(e,t,i){return e<t?t:i<e?i:e},r.sign=function(e){return e<0?-1:1},r.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-r._nowStartTime},r.random=function(e,i){return i=void 0!==i?i:1,(e=void 0!==e?e:0)+t()*(i-e)};var t=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},r.logLevel=1,r.log=function(){console&&0<r.logLevel&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&0<r.logLevel&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&0<r.logLevel&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.nextId=function(){return r._nextId++},r.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},r.map=function(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r+=1)i.push(t(e[r]));return i},r.topologicalSort=function(e){var t=[],i=[],n=[];for(var s in e)i[s]||n[s]||r._topologicalSort(s,i,n,e,t);return t},r._topologicalSort=function(e,t,i,n,s){var o=n[e]||[];i[e]=!0;for(var a=0;a<o.length;a+=1){var l=o[a];i[l]||t[l]||r._topologicalSort(l,t,i,n,s)}i[e]=!1,t[e]=!0,s.push(e)},r.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var i=arguments[t];i._chained?e.push.apply(e,i._chained):e.push(i)}var r=function(){for(var t,i=new Array(arguments.length),r=0,n=arguments.length;r<n;r++)i[r]=arguments[r];for(r=0;r<e.length;r+=1){var s=e[r].apply(t,i);void 0!==s&&(t=s)}return t};return r._chained=e,r},r.chainPathBefore=function(e,t,i){return r.set(e,t,r.chain(i,r.get(e,t)))},r.chainPathAfter=function(e,t,i){return r.set(e,t,r.chain(r.get(e,t),i))},r._requireGlobal=function(t,r){return("undefined"!=typeof window?window[t]:void 0!==i?i[t]:null)||e(r)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,i){var r={};t.exports=r;var n=e("../body/World"),s=e("./Sleeping"),o=e("../collision/Resolver"),a=e("../render/Render"),l=e("../collision/Pairs"),c=(e("./Metrics"),e("../collision/Grid")),h=e("./Events"),d=e("../body/Composite"),u=e("../constraint/Constraint"),f=e("./Common"),g=e("../body/Body");r.create=function(e,t){t=(t=f.isElement(e)?t:e)||{},((e=f.isElement(e)?e:null)||t.render)&&f.warn("Engine.create: engine.render is deprecated (see docs)");var i={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},r=f.extend(i,t);if(e||r.render){var s={element:e,controller:a};r.render=f.extend(s,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=t.world||n.create(r.world),r.pairs=l.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},r.update=function(e,t,i){t=t||1e3/60,i=i||1;var n,a,c=e.world,f=e.timing,g=e.broadphase;f.timestamp+=t*f.timeScale;var p={timestamp:f.timestamp};h.trigger(e,"beforeUpdate",p);var m=d.allBodies(c),v=d.allConstraints(c);for(e.enableSleeping&&s.update(m,f.timeScale),r._bodiesApplyGravity(m,c.gravity),r._bodiesUpdate(m,t,f.timeScale,i,c.bounds),u.preSolveAll(m),n=0;n<e.constraintIterations;n++)u.solveAll(v,f.timeScale);u.postSolveAll(m),a=g.controller?(c.isModified&&g.controller.clear(g),g.controller.update(g,m,e,c.isModified),g.pairsList):m,c.isModified&&d.setModified(c,!1,!1,!0);var y=g.detector(a,e),_=e.pairs,x=f.timestamp;for(l.update(_,y,x),l.removeOld(_,x),e.enableSleeping&&s.afterCollisions(_.list,f.timeScale),0<_.collisionStart.length&&h.trigger(e,"collisionStart",{pairs:_.collisionStart}),o.preSolvePosition(_.list),n=0;n<e.positionIterations;n++)o.solvePosition(_.list,f.timeScale);for(o.postSolvePosition(m),u.preSolveAll(m),n=0;n<e.constraintIterations;n++)u.solveAll(v,f.timeScale);for(u.postSolveAll(m),o.preSolveVelocity(_.list),n=0;n<e.velocityIterations;n++)o.solveVelocity(_.list,f.timeScale);return 0<_.collisionActive.length&&h.trigger(e,"collisionActive",{pairs:_.collisionActive}),0<_.collisionEnd.length&&h.trigger(e,"collisionEnd",{pairs:_.collisionEnd}),r._bodiesClearForces(m),h.trigger(e,"afterUpdate",p),e},r.merge=function(e,t){if(f.extend(e,t),t.world){e.world=t.world,r.clear(e);for(var i=d.allBodies(e.world),n=0;n<i.length;n++){var o=i[n];s.set(o,!1),o.id=f.nextId()}}},r.clear=function(e){var t=e.world;l.clear(e.pairs);var i=e.broadphase;if(i.controller){var r=d.allBodies(t);i.controller.clear(i),i.controller.update(i,r,e,!0)}},r._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.force.x=0,i.force.y=0,i.torque=0}},r._bodiesApplyGravity=function(e,t){var i=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==i)for(var r=0;r<e.length;r++){var n=e[r];n.isStatic||n.isSleeping||(n.force.y+=n.mass*t.y*i,n.force.x+=n.mass*t.x*i)}},r._bodiesUpdate=function(e,t,i,r,n){for(var s=0;s<e.length;s++){var o=e[s];o.isStatic||o.isSleeping||g.update(o,t,i,r)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,i){var r={};t.exports=r;var n=e("./Common");r.on=function(e,t,i){for(var r,n=t.split(" "),s=0;s<n.length;s++)r=n[s],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(i);return i},r.off=function(e,t,i){if(t){"function"==typeof t&&(i=t,t=n.keys(e.events).join(" "));for(var r=t.split(" "),s=0;s<r.length;s++){var o=e.events[r[s]],a=[];if(i&&o)for(var l=0;l<o.length;l++)o[l]!==i&&a.push(o[l]);e.events[r[s]]=a}}else e.events={}},r.trigger=function(e,t,i){var r,s,o,a;if(e.events){i||(i={}),r=t.split(" ");for(var l=0;l<r.length;l++)if(s=r[l],o=e.events[s]){(a=n.clone(i,!1)).name=s,a.source=e;for(var c=0;c<o.length;c++)o[c].apply(e,[a])}}}},{"./Common":14}],17:[function(e,t,i){var r={};t.exports=r;var n=e("./Plugin"),s=e("./Common");r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){n.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),s.chainPathAfter(r,e,t)}},{"./Common":14,"./Plugin":20}],18:[function(e,t,i){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,i){var r={};t.exports=r;var n=e("../core/Common");r.create=function(e){var t={};return e||n.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.getElementById("touch-container"),t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=t.element.getAttribute("data-pixel-ratio")||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var i=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var i=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var i=r._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(t,t.element),t},r.setElement=function(e,t){var i={passive:!1};(e.element=t).addEventListener("mousemove",e.mousemove,i),t.addEventListener("mousedown",e.mousedown,i),t.addEventListener("mouseup",e.mouseup,i),t.addEventListener("mousewheel",e.mousewheel,i),t.addEventListener("DOMMouseScroll",e.mousewheel,i),t.addEventListener("touchmove",e.mousemove,i),t.addEventListener("touchstart",e.mousedown,i),t.addEventListener("touchend",e.mouseup,i)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r._getRelativeMousePosition=function(e,t,i){var r,n,s=t.getBoundingClientRect(),o=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:o.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:o.scrollTop,c=e.changedTouches;return n=c?(r=c[0].pageX-s.left-a,c[0].pageY-s.top-l):(r=e.pageX-s.left-a,e.pageY-s.top-l),{x:r/(t.clientWidth/(t.width||t.clientWidth)*i),y:n/(t.clientHeight/(t.height||t.clientHeight)*i)}}},{"../core/Common":14}],20:[function(e,t,i){var r={};t.exports=r;var n=e("./Common");r._registry={},r.register=function(e){if(r.isPlugin(e)||n.warn("Plugin.register:",r.toString(e),"does not implement all required fields."),e.name in r._registry){var t=r._registry[e.name],i=r.versionParse(e.version).number,s=r.versionParse(t.version).number;s<i?(n.warn("Plugin.register:",r.toString(t),"was upgraded to",r.toString(e)),r._registry[e.name]=e):i<s?n.warn("Plugin.register:",r.toString(t),"can not be downgraded to",r.toString(e)):e!==t&&n.warn("Plugin.register:",r.toString(e),"is already registered to different plugin object")}else r._registry[e.name]=e;return e},r.resolve=function(e){return r._registry[r.dependencyParse(e).name]},r.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},r.isPlugin=function(e){return e&&e.name&&e.version&&e.install},r.isUsed=function(e,t){return-1<e.used.indexOf(t)},r.isFor=function(e,t){var i=e.for&&r.dependencyParse(e.for);return!e.for||t.name===i.name&&r.versionSatisfies(t.version,i.range)},r.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var i=r.dependencies(e),s=n.topologicalSort(i),o=[],a=0;a<s.length;a+=1)if(s[a]!==e.name){var l=r.resolve(s[a]);l?r.isUsed(e,l.name)||(r.isFor(l,e)||(n.warn("Plugin.use:",r.toString(l),"is for",l.for,"but installed on",r.toString(e)+"."),l._warned=!0),l.install?l.install(e):(n.warn("Plugin.use:",r.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(o.push("Ã°Å¸âÂ¶ "+r.toString(l)),delete l._warned):o.push("Ã¢Åâ¦ "+r.toString(l)),e.used.push(l.name)):o.push("Ã¢ÂÅ "+s[a])}0<o.length&&n.info(o.join("  "))}else n.warn("Plugin.use:",r.toString(e),"does not specify any dependencies to install.")},r.dependencies=function(e,t){var i=r.dependencyParse(e),s=i.name;if(!(s in(t=t||{}))){e=r.resolve(e)||e,t[s]=n.map(e.uses||[],function(t){r.isPlugin(t)&&r.register(t);var s=r.dependencyParse(t),o=r.resolve(t);return o&&!r.versionSatisfies(o.version,s.range)?(n.warn("Plugin.dependencies:",r.toString(o),"does not satisfy",r.toString(s),"used by",r.toString(i)+"."),o._warned=!0,e._warned=!0):o||(n.warn("Plugin.dependencies:",r.toString(t),"used by",r.toString(i),"could not be resolved."),e._warned=!0),s.name});for(var o=0;o<t[s].length;o+=1)r.dependencies(t[s][o],t);return t}},r.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},r.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=e.split("-");e=t[0];var i=isNaN(Number(e[0])),r=i?e.substr(1):e,s=n.map(r.split("."),function(e){return Number(e)});return{isRange:i,version:r,range:e,operator:i?e[0]:"",parts:s,prerelease:t[1],number:1e8*s[0]+1e4*s[1]+s[2]}},r.versionSatisfies=function(e,t){t=t||"*";var i=r.versionParse(t),n=i.parts,s=r.versionParse(e),o=s.parts;if(i.isRange){if("*"===i.operator||"*"===e)return!0;if("~"===i.operator)return o[0]===n[0]&&o[1]===n[1]&&o[2]>=n[2];if("^"===i.operator)return 0<n[0]?o[0]===n[0]&&s.number>=i.number:0<n[1]?o[1]===n[1]&&o[2]>=n[2]:o[2]===n[2]}return e===t||"*"===e}},{"./Common":14}],21:[function(e,t,i){var r={};t.exports=r;var n=e("./Events"),s=e("./Engine"),o=e("./Common");!function(){var e,t,i;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e||(e=function(e){i=setTimeout(function(){e(o.now())},1e3/60)},t=function(){clearTimeout(i)}),r.create=function(e){var t=o.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},r.run=function(t,i){return void 0!==t.positionIterations&&(i=t,t=r.create()),function n(s){t.frameRequestId=e(n),s&&t.enabled&&r.tick(t,i,s)}(),t},r.tick=function(e,t,i){var r,o=t.timing,a=1,l={timestamp:o.timestamp};n.trigger(e,"beforeTick",l),n.trigger(t,"beforeTick",l),e.isFixed?r=e.delta:(r=i-e.timePrev||e.delta,e.timePrev=i,e.deltaHistory.push(r),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),a=(r=(r=(r=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:r)>e.deltaMax?e.deltaMax:r)/e.delta,e.delta=r),0!==e.timeScalePrev&&(a*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(a=0),e.timeScalePrev=o.timeScale,e.correction=a,e.frameCounter+=1,1e3<=i-e.counterTimestamp&&(e.fps=e.frameCounter*((i-e.counterTimestamp)/1e3),e.counterTimestamp=i,e.frameCounter=0),n.trigger(e,"tick",l),n.trigger(t,"tick",l),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),n.trigger(e,"beforeUpdate",l),s.update(t,r,a),n.trigger(e,"afterUpdate",l),t.render&&t.render.controller&&(n.trigger(e,"beforeRender",l),n.trigger(t,"beforeRender",l),t.render.controller.world(t.render),n.trigger(e,"afterRender",l),n.trigger(t,"afterRender",l)),n.trigger(e,"afterTick",l),n.trigger(t,"afterTick",l)},r.stop=function(e){t(e.frameRequestId)},r.start=function(e,t){r.run(e,t)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,i){var r={};t.exports=r;var n=e("./Events");r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(e,t){for(var i=t*t*t,n=0;n<e.length;n++){var s=e[n],o=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,o),l=Math.max(s.motion,o);s.motion=r._minBias*a+(1-r._minBias)*l,0<s.sleepThreshold&&s.motion<r._motionSleepThreshold*i?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&r.set(s,!0)):0<s.sleepCounter&&(s.sleepCounter-=1)}else r.set(s,!1)}},r.afterCollisions=function(e,t){for(var i=t*t*t,n=0;n<e.length;n++){var s=e[n];if(s.isActive){var o=s.collision,a=o.bodyA.parent,l=o.bodyB.parent;if(!(a.isSleeping&&l.isSleeping||a.isStatic||l.isStatic)&&(a.isSleeping||l.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:l,h=c===a?l:a;!c.isStatic&&h.motion>r._motionWakeThreshold*i&&r.set(c,!1)}}}},r.set=function(e,t){var i=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,i||n.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,i&&n.trigger(e,"sleepEnd"))}},{"./Events":16}],23:[function(e,t,i){var r={};t.exports=r;var n,s=e("../geometry/Vertices"),o=e("../core/Common"),a=e("../body/Body"),l=e("../geometry/Bounds"),c=e("../geometry/Vector");r.rectangle=function(e,t,i,r,n){n=n||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:s.fromPath("L 0 0 L "+i+" 0 L "+i+" "+r+" L 0 "+r)};if(n.chamfer){var c=n.chamfer;l.vertices=s.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete n.chamfer}return a.create(o.extend({},l,n))},r.trapezoid=function(e,t,i,r,n,l){l=l||{};var c,h=i*(n*=.5),d=h+(1-2*n)*i,u=d+h;c=n<.5?"L 0 0 L "+h+" "+-r+" L "+d+" "+-r+" L "+u+" 0":"L 0 0 L "+d+" "+-r+" L "+u+" 0";var f={label:"Trapezoid Body",position:{x:e,y:t},vertices:s.fromPath(c)};if(l.chamfer){var g=l.chamfer;f.vertices=s.chamfer(f.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete l.chamfer}return a.create(o.extend({},f,l))},r.circle=function(e,t,i,n,s){n=n||{};var a={label:"Circle Body",circleRadius:i};s=s||25;var l=Math.ceil(Math.max(10,Math.min(s,i)));return l%2==1&&(l+=1),r.polygon(e,t,l,i,o.extend({},a,n))},r.polygon=function(e,t,i,n,l){if(l=l||{},i<3)return r.circle(e,t,n,l);for(var c=2*Math.PI/i,h="",d=.5*c,u=0;u<i;u+=1){var f=d+u*c,g=Math.cos(f)*n,p=Math.sin(f)*n;h+="L "+g.toFixed(3)+" "+p.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:e,y:t},vertices:s.fromPath(h)};if(l.chamfer){var v=l.chamfer;m.vertices=s.chamfer(m.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete l.chamfer}return a.create(o.extend({},m,l))},r.fromVertices=function(e,t,i,r,h,d,u){var f,g,p,m,v,y,_,x,b;for(n||(n=o._requireGlobal("decomp","poly-decomp")),r=r||{},g=[],h=void 0!==h&&h,d=void 0!==d?d:.01,u=void 0!==u?u:10,n||o.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),o.isArray(i[0])||(i=[i]),x=0;x<i.length;x+=1)if(m=i[x],(p=s.isConvex(m))||!n)m=p?s.clockwiseSort(m):s.hull(m),g.push({position:{x:e,y:t},vertices:m});else{var w=m.map(function(e){return[e.x,e.y]});n.makeCCW(w),!1!==d&&n.removeCollinearPoints(w,d);var S=n.quickDecomp(w);for(v=0;v<S.length;v++){var C=S[v].map(function(e){return{x:e[0],y:e[1]}});0<u&&s.area(C)<u||g.push({position:s.centre(C),vertices:C})}}for(v=0;v<g.length;v++)g[v]=a.create(o.extend(g[v],r));if(h)for(v=0;v<g.length;v++){var A=g[v];for(y=v+1;y<g.length;y++){var k=g[y];if(l.overlaps(A.bounds,k.bounds)){var M=A.vertices,P=k.vertices;for(_=0;_<A.vertices.length;_++)for(b=0;b<k.vertices.length;b++){var R=c.magnitudeSquared(c.sub(M[(_+1)%M.length],P[b])),E=c.magnitudeSquared(c.sub(M[_],P[(b+1)%P.length]));R<5&&E<5&&(M[_].isInternal=!0,P[b].isInternal=!0)}}}}return 1<g.length?(f=a.create(o.extend({parts:g.slice(0)},r)),a.setPosition(f,{x:e,y:t}),f):g[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,i){var r={};t.exports=r;var n=e("../body/Composite"),s=e("../constraint/Constraint"),o=e("../core/Common"),a=e("../body/Body"),l=e("./Bodies");r.stack=function(e,t,i,r,s,o,l){for(var c,h=n.create({label:"Stack"}),d=e,u=t,f=0,g=0;g<r;g++){for(var p=0,m=0;m<i;m++){var v=l(d,u,m,g,c,f);if(v){var y=v.bounds.max.y-v.bounds.min.y,_=v.bounds.max.x-v.bounds.min.x;p<y&&(p=y),a.translate(v,{x:.5*_,y:.5*y}),d=v.bounds.max.x+s,n.addBody(h,v),c=v,f+=1}else d+=s}u+=p+o,d=e}return h},r.chain=function(e,t,i,r,a,l){for(var c=e.bodies,h=1;h<c.length;h++){var d=c[h-1],u=c[h],f=d.bounds.max.y-d.bounds.min.y,g=d.bounds.max.x-d.bounds.min.x,p=u.bounds.max.y-u.bounds.min.y,m={bodyA:d,pointA:{x:g*t,y:f*i},bodyB:u,pointB:{x:(u.bounds.max.x-u.bounds.min.x)*r,y:p*a}},v=o.extend(m,l);n.addConstraint(e,s.create(v))}return e.label+=" Chain",e},r.mesh=function(e,t,i,r,a){var l,c,h,d,u,f=e.bodies;for(l=0;l<i;l++){for(c=1;c<t;c++)h=f[c-1+l*t],d=f[c+l*t],n.addConstraint(e,s.create(o.extend({bodyA:h,bodyB:d},a)));if(0<l)for(c=0;c<t;c++)h=f[c+(l-1)*t],d=f[c+l*t],n.addConstraint(e,s.create(o.extend({bodyA:h,bodyB:d},a))),r&&0<c&&(u=f[c-1+(l-1)*t],n.addConstraint(e,s.create(o.extend({bodyA:u,bodyB:d},a)))),r&&c<t-1&&(u=f[c+1+(l-1)*t],n.addConstraint(e,s.create(o.extend({bodyA:u,bodyB:d},a))))}return e.label+=" Mesh",e},r.pyramid=function(e,t,i,n,s,o,l){return r.stack(e,t,i,n,s,o,function(t,r,o,c,h,d){var u=Math.min(n,Math.ceil(i/2)),f=h?h.bounds.max.x-h.bounds.min.x:0;if(!(u<c||o<(c=u-c)||i-1-c<o))return 1===d&&a.translate(h,{x:(o+(i%2==1?1:-1))*f,y:0}),l(e+(h?o*f:0)+o*s,r,o,c,h,d)})},r.newtonsCradle=function(e,t,i,r,o){for(var a=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var h=l.circle(e+c*(1.9*r),t+o,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=s.create({pointA:{x:e+c*(1.9*r),y:t},bodyB:h});n.addBody(a,h),n.addConstraint(a,d)}return a},r.car=function(e,t,i,r,o){var c=a.nextGroup(!0),h=.5*-i+20,d=.5*i-20,u=n.create({label:"Car"}),f=l.rectangle(e,t,i,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),g=l.circle(e+h,t+0,o,{collisionFilter:{group:c},friction:.8}),p=l.circle(e+d,t+0,o,{collisionFilter:{group:c},friction:.8}),m=s.create({bodyB:f,pointB:{x:h,y:0},bodyA:g,stiffness:1,length:0}),v=s.create({bodyB:f,pointB:{x:d,y:0},bodyA:p,stiffness:1,length:0});return n.addBody(u,f),n.addBody(u,g),n.addBody(u,p),n.addConstraint(u,m),n.addConstraint(u,v),u},r.softBody=function(e,t,i,n,s,a,c,h,d,u){d=o.extend({inertia:1/0},d),u=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},u);var f=r.stack(e,t,i,n,s,a,function(e,t){return l.circle(e,t,h,d)});return r.mesh(f,i,n,c,u),f.label="Soft Body",f}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vector"),s=e("../core/Common");r.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var r=(i+1)%e.length,o=n.normalise({x:e[r].y-e[i].y,y:e[i].x-e[r].x}),a=0===o.y?1/0:o.x/o.y;t[a=a.toFixed(3).toString()]=o}return s.values(t)},r.rotate=function(e,t){if(0!==t)for(var i=Math.cos(t),r=Math.sin(t),n=0;n<e.length;n++){var s,o=e[n];s=o.x*i-o.y*r,o.y=o.x*r+o.y*i,o.x=s}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,i){var r={};(t.exports=r).create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(t,e),t},r.update=function(e,t,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var n=t[r];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}i&&(0<i.x?e.max.x+=i.x:e.min.x+=i.x,0<i.y?e.max.y+=i.y:e.min.y+=i.y)},r.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},r.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},r.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},r.shift=function(e,t){var i=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+i,e.min.y=t.y,e.max.y=t.y+r}},{}],27:[function(e,t,i){var r={};t.exports=r,e("../geometry/Bounds");var n=e("../core/Common");r.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,s,o,a,l,c,h,d,u,f,g,p=[],m=0,v=0,y=0;t=t||15;var _=function(e,t,i){var r=i%2==1&&1<i;if(!u||e!=u.x||t!=u.y){g=u&&r?(f=u.x,u.y):f=0;var n={x:f+e,y:g+t};!r&&u||(u=n),p.push(n),v=f+e,y=g+t}},x=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":v=e.x,y=e.y;break;case"H":v=e.x;break;case"V":y=e.y}_(v,y,e.pathSegType)}};for(r._svgPathToAbsolute(e),o=e.getTotalLength(),c=[],i=0;i<e.pathSegList.numberOfItems;i+=1)c.push(e.pathSegList.getItem(i));for(h=c.concat();m<o;){if((l=c[e.getPathSegAtLength(m)])!=d){for(;h.length&&h[0]!=l;)x(h.shift());d=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=e.getPointAtLength(m),_(a.x,a.y,0)}m+=t}for(i=0,s=h.length;i<s;++i)x(h[i]);return p},r._svgPathToAbsolute=function(e){for(var t,i,r,n,s,o,a=e.pathSegList,l=0,c=0,h=a.numberOfItems,d=0;d<h;++d){var u=a.getItem(d),f=u.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in u&&(l=u.x),"y"in u&&(c=u.y);else switch("x1"in u&&(r=l+u.x1),"x2"in u&&(s=l+u.x2),"y1"in u&&(n=c+u.y1),"y2"in u&&(o=c+u.y2),"x"in u&&(l+=u.x),"y"in u&&(c+=u.y),f){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(l,c),d);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(l,c),d);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),d);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),d);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,r,n,s,o),d);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,s,o),d);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,r,n),d);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),d);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(l,c,u.r1,u.r2,u.angle,u.largeArcFlag,u.sweepFlag),d);break;case"z":case"Z":l=t,c=i}"M"!=f&&"m"!=f||(t=l,i=c)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,i){var r={};(t.exports=r).create=function(e,t){return{x:e||0,y:t||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,t,i){var r=Math.cos(t),n=Math.sin(t);i||(i={});var s=e.x*r-e.y*n;return i.y=e.x*n+e.y*r,i.x=s,i},r.rotateAbout=function(e,t,i,r){var n=Math.cos(t),s=Math.sin(t);r||(r={});var o=i.x+((e.x-i.x)*n-(e.y-i.y)*s);return r.y=i.y+((e.x-i.x)*s+(e.y-i.y)*n),r.x=o,r},r.normalise=function(e){var t=r.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.cross=function(e,t){return e.x*t.y-e.y*t.x},r.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)},r.add=function(e,t,i){return i||(i={}),i.x=e.x+t.x,i.y=e.y+t.y,i},r.sub=function(e,t,i){return i||(i={}),i.x=e.x-t.x,i.y=e.y-t.y,i},r.mult=function(e,t){return{x:e.x*t,y:e.y*t}},r.div=function(e,t){return{x:e.x/t,y:e.y/t}},r.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},{}],29:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Vector"),s=e("../core/Common");r.create=function(e,t){for(var i=[],r=0;r<e.length;r++){var n=e[r],s={x:n.x,y:n.y,index:r,body:t,isInternal:!1};i.push(s)}return i},r.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(e,t,r){i.push({x:parseFloat(t),y:parseFloat(r)})}),r.create(i,t)},r.centre=function(e){for(var t,i,s,o=r.area(e,!0),a={x:0,y:0},l=0;l<e.length;l++)s=(l+1)%e.length,t=n.cross(e[l],e[s]),i=n.mult(n.add(e[l],e[s]),t),a=n.add(a,i);return n.div(a,6*o)},r.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return n.div(t,e.length)},r.area=function(e,t){for(var i=0,r=e.length-1,n=0;n<e.length;n++)i+=(e[r].x-e[n].x)*(e[r].y+e[n].y),r=n;return t?i/2:Math.abs(i)/2},r.inertia=function(e,t){for(var i,r,s=0,o=0,a=e,l=0;l<a.length;l++)r=(l+1)%a.length,s+=(i=Math.abs(n.cross(a[r],a[l])))*(n.dot(a[r],a[r])+n.dot(a[r],a[l])+n.dot(a[l],a[l])),o+=i;return t/6*(s/o)},r.translate=function(e,t,i){var r;if(i)for(r=0;r<e.length;r++)e[r].x+=t.x*i,e[r].y+=t.y*i;else for(r=0;r<e.length;r++)e[r].x+=t.x,e[r].y+=t.y;return e},r.rotate=function(e,t,i){if(0!==t){for(var r=Math.cos(t),n=Math.sin(t),s=0;s<e.length;s++){var o=e[s],a=o.x-i.x,l=o.y-i.y;o.x=i.x+(a*r-l*n),o.y=i.y+(a*n+l*r)}return e}},r.contains=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=e[(i+1)%e.length];if(0<(t.x-r.x)*(n.y-r.y)+(t.y-r.y)*(r.x-n.x))return!1}return!0},r.scale=function(e,t,i,s){if(1===t&&1===i)return e;var o,a;s=s||r.centre(e);for(var l=0;l<e.length;l++)o=e[l],a=n.sub(o,s),e[l].x=s.x+a.x*t,e[l].y=s.y+a.y*i;return e},r.chamfer=function(e,t,i,r,o){t="number"==typeof t?[t]:t||[8],i=void 0!==i?i:-1,r=r||2,o=o||14;for(var a=[],l=0;l<e.length;l++){var c=e[0<=l-1?l-1:e.length-1],h=e[l],d=e[(l+1)%e.length],u=t[l<t.length?l:t.length-1];if(0!==u){var f=n.normalise({x:h.y-c.y,y:c.x-h.x}),g=n.normalise({x:d.y-h.y,y:h.x-d.x}),p=Math.sqrt(2*Math.pow(u,2)),m=n.mult(s.clone(f),u),v=n.normalise(n.mult(n.add(f,g),.5)),y=n.sub(h,n.mult(v,p)),_=i;-1===i&&(_=1.75*Math.pow(u,.32)),(_=s.clamp(_,r,o))%2==1&&(_+=1);for(var x=Math.acos(n.dot(f,g))/_,b=0;b<_;b++)a.push(n.add(n.rotate(m,x*b),y))}else a.push(h)}return a},r.clockwiseSort=function(e){var t=r.mean(e);return e.sort(function(e,i){return n.angle(t,e)-n.angle(t,i)}),e},r.isConvex=function(e){var t,i,r,n,s=0,o=e.length;if(o<3)return null;for(t=0;t<o;t++)if(r=(t+2)%o,n=(e[i=(t+1)%o].x-e[t].x)*(e[r].y-e[i].y),(n-=(e[i].y-e[t].y)*(e[r].x-e[i].x))<0?s|=1:0<n&&(s|=2),3===s)return!1;return 0!==s||null},r.hull=function(e){var t,i,r=[],s=[];for((e=e.slice(0)).sort(function(e,t){var i=e.x-t.x;return 0!==i?i:e.y-t.y}),i=0;i<e.length;i+=1){for(t=e[i];2<=s.length&&n.cross3(s[s.length-2],s[s.length-1],t)<=0;)s.pop();s.push(t)}for(i=e.length-1;0<=i;i-=1){for(t=e[i];2<=r.length&&n.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}return r.pop(),s.pop(),r.concat(s)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,i){var r=t.exports=e("../core/Matter");r.Body=e("../body/Body"),r.Composite=e("../body/Composite"),r.World=e("../body/World"),r.Contact=e("../collision/Contact"),r.Detector=e("../collision/Detector"),r.Grid=e("../collision/Grid"),r.Pairs=e("../collision/Pairs"),r.Pair=e("../collision/Pair"),r.Query=e("../collision/Query"),r.Resolver=e("../collision/Resolver"),r.SAT=e("../collision/SAT"),r.Constraint=e("../constraint/Constraint"),r.MouseConstraint=e("../constraint/MouseConstraint"),r.Common=e("../core/Common"),r.Engine=e("../core/Engine"),r.Events=e("../core/Events"),r.Mouse=e("../core/Mouse"),r.Runner=e("../core/Runner"),r.Sleeping=e("../core/Sleeping"),r.Plugin=e("../core/Plugin"),r.Bodies=e("../factory/Bodies"),r.Composites=e("../factory/Composites"),r.Axes=e("../geometry/Axes"),r.Bounds=e("../geometry/Bounds"),r.Svg=e("../geometry/Svg"),r.Vector=e("../geometry/Vector"),r.Vertices=e("../geometry/Vertices"),r.Render=e("../render/Render"),r.RenderPixi=e("../render/RenderPixi"),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,i){var r={};t.exports=r;var n=e("../core/Common"),s=e("../body/Composite"),o=e("../geometry/Bounds"),a=e("../core/Events"),l=e("../collision/Grid"),c=e("../geometry/Vector"),h=e("../core/Mouse");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(n.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){var t={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},s=n.extend(t,e);return s.canvas&&(s.canvas.width=s.options.width||s.canvas.width,s.canvas.height=s.options.height||s.canvas.height),s.mouse=e.mouse,s.engine=e.engine,s.canvas=s.canvas||i(s.options.width,s.options.height),s.context=s.canvas.getContext("2d"),s.textures={},s.bounds=s.bounds||{min:{x:0,y:0},max:{x:s.canvas.width,y:s.canvas.height}},1!==s.options.pixelRatio&&r.setPixelRatio(s,s.options.pixelRatio),n.isElement(s.element)?s.element.appendChild(s.canvas):s.canvas.parentNode||n.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),s},r.run=function(t){!function i(n){t.frameRequestId=e(i),r.world(t)}()},r.stop=function(e){t(e.frameRequestId)},r.setPixelRatio=function(e,t){var i=e.options,r=e.canvas;"auto"===t&&(t=d(r)),i.pixelRatio=t,r.setAttribute("data-pixel-ratio",t),r.width=i.width*t,r.height=i.height*t,r.style.width=i.width+"px",r.style.height=i.height+"px",e.context.scale(t,t)},r.lookAt=function(e,t,i,r){r=void 0===r||r,t=n.isArray(t)?t:[t],i=i||{x:0,y:0};for(var s={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},o=0;o<t.length;o+=1){var a=t[o],l=a.bounds?a.bounds.min:a.min||a.position||a,c=a.bounds?a.bounds.max:a.max||a.position||a;l&&c&&(l.x<s.min.x&&(s.min.x=l.x),c.x>s.max.x&&(s.max.x=c.x),l.y<s.min.y&&(s.min.y=l.y),c.y>s.max.y&&(s.max.y=c.y))}var d=s.max.x-s.min.x+2*i.x,u=s.max.y-s.min.y+2*i.y,f=e.canvas.height,g=e.canvas.width/f,p=d/u,m=1,v=1;g<p?v=p/g:m=g/p,e.options.hasBounds=!0,e.bounds.min.x=s.min.x,e.bounds.max.x=s.min.x+d*m,e.bounds.min.y=s.min.y,e.bounds.max.y=s.min.y+u*v,r&&(e.bounds.min.x+=.5*d-d*m*.5,e.bounds.max.x+=.5*d-d*m*.5,e.bounds.min.y+=.5*u-u*v*.5,e.bounds.max.y+=.5*u-u*v*.5),e.bounds.min.x-=i.x,e.bounds.max.x-=i.x,e.bounds.min.y-=i.y,e.bounds.max.y-=i.y,e.mouse&&(h.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),h.setOffset(e.mouse,e.bounds.min))},r.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,r=t/e.options.width,n=i/e.options.height;e.context.scale(1/r,1/n),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},r.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},r.world=function(e){var t,i=e.engine,n=i.world,d=e.canvas,u=e.context,g=e.options,p=s.allBodies(n),m=s.allConstraints(n),v=g.wireframes?g.wireframeBackground:g.background,y=[],_=[],x={timestamp:i.timing.timestamp};if(a.trigger(e,"beforeRender",x),e.currentBackground!==v&&f(e,v),u.globalCompositeOperation="source-in",u.fillStyle="transparent",u.fillRect(0,0,d.width,d.height),u.globalCompositeOperation="source-over",g.hasBounds){for(t=0;t<p.length;t++){var b=p[t];o.overlaps(b.bounds,e.bounds)&&y.push(b)}for(t=0;t<m.length;t++){var w=m[t],S=w.bodyA,C=w.bodyB,A=w.pointA,k=w.pointB;S&&(A=c.add(S.position,w.pointA)),C&&(k=c.add(C.position,w.pointB)),A&&k&&(o.contains(e.bounds,A)||o.contains(e.bounds,k))&&_.push(w)}r.startViewTransform(e),e.mouse&&(h.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),h.setOffset(e.mouse,e.bounds.min))}else _=m,y=p;!g.wireframes||i.enableSleeping&&g.showSleeping?r.bodies(e,y,u):(g.showConvexHulls&&r.bodyConvexHulls(e,y,u),r.bodyWireframes(e,y,u)),g.showBounds&&r.bodyBounds(e,y,u),(g.showAxes||g.showAngleIndicator)&&r.bodyAxes(e,y,u),g.showPositions&&r.bodyPositions(e,y,u),g.showVelocity&&r.bodyVelocity(e,y,u),g.showIds&&r.bodyIds(e,y,u),g.showSeparations&&r.separations(e,i.pairs.list,u),g.showCollisions&&r.collisions(e,i.pairs.list,u),g.showVertexNumbers&&r.vertexNumbers(e,y,u),g.showMousePosition&&r.mousePosition(e,e.mouse,u),r.constraints(_,u),g.showBroadphase&&i.broadphase.controller===l&&r.grid(e,i.broadphase,u),g.showDebug&&r.debug(e,u),g.hasBounds&&r.endViewTransform(e),a.trigger(e,"afterRender",x)},r.debug=function(e,t){var i=t,r=e.engine,n=r.world,o=r.metrics,a=e.options;if(s.allBodies(n),500<=r.timing.timestamp-(e.debugTimestamp||0)){var l="";o.timing&&(l+="fps: "+Math.round(o.timing.fps)+"    "),e.debugString=l,e.debugTimestamp=r.timing.timestamp}if(e.debugString){i.font="12px Arial",a.wireframes?i.fillStyle="rgba(255,255,255,0.5)":i.fillStyle="rgba(0,0,0,0)";for(var c=e.debugString.split("\n"),h=0;h<c.length;h++)i.fillText(c[h],50,50+18*h)}},r.constraints=function(e,t){for(var i=t,r=0;r<e.length;r++){var s=e[r];if(s.render.visible&&s.pointA&&s.pointB){var o,a,l=s.bodyA,h=s.bodyB;if(o=l?c.add(l.position,s.pointA):s.pointA,"pin"===s.render.type)i.beginPath(),i.arc(o.x,o.y,3,0,2*Math.PI),i.closePath();else{if(a=h?c.add(h.position,s.pointB):s.pointB,i.beginPath(),i.moveTo(o.x,o.y),"spring"===s.render.type)for(var d,u=c.sub(a,o),f=c.perp(c.normalise(u)),g=Math.ceil(n.clamp(s.length/5,12,20)),p=1;p<g;p+=1)d=p%2==0?1:-1,i.lineTo(o.x+u.x*(p/g)+f.x*d*4,o.y+u.y*(p/g)+f.y*d*4);i.lineTo(a.x,a.y)}s.render.lineWidth&&(i.lineWidth=s.render.lineWidth,i.strokeStyle=s.render.strokeStyle,i.stroke()),s.render.anchors&&(i.fillStyle=s.render.strokeStyle,i.beginPath(),i.arc(o.x,o.y,3,0,2*Math.PI),i.arc(a.x,a.y,3,0,2*Math.PI),i.closePath(),i.fill())}}},r.bodyShadows=function(e,t,i){for(var r=i,n=(e.engine,0);n<t.length;n++){var s=t[n];if(s.render.visible){if(s.circleRadius)r.beginPath(),r.arc(s.position.x,s.position.y,s.circleRadius,0,2*Math.PI),r.closePath();else{r.beginPath(),r.moveTo(s.vertices[0].x,s.vertices[0].y);for(var o=1;o<s.vertices.length;o++)r.lineTo(s.vertices[o].x,s.vertices[o].y);r.closePath()}var a=s.position.x-.5*e.options.width,l=s.position.y-.2*e.options.height,c=Math.abs(a)+Math.abs(l);r.shadowColor="rgba(0,0,0,0.15)",r.shadowOffsetX=.05*a,r.shadowOffsetY=.05*l,r.shadowBlur=1+12*Math.min(1,c/1e3),r.fill(),r.shadowColor=null,r.shadowOffsetX=null,r.shadowOffsetY=null,r.shadowBlur=null}}},r.bodies=function(e,t,i){var r,n,s,o,a=i,l=(e.engine,e.options),c=l.showInternalEdges||!l.wireframes;for(s=0;s<t.length;s++)if((r=t[s]).render.visible)for(o=1<r.parts.length?1:0;o<r.parts.length;o++)if((n=r.parts[o]).render.visible){if(l.showSleeping&&r.isSleeping?a.globalAlpha=.5*n.render.opacity:1!==n.render.opacity&&(a.globalAlpha=n.render.opacity),n.render.sprite&&n.render.sprite.texture&&!l.wireframes){var h=n.render.sprite,d=u(e,h.texture);a.translate(n.position.x,n.position.y),a.rotate(n.angle),a.drawImage(d,d.width*-h.xOffset*h.xScale,d.height*-h.yOffset*h.yScale,d.width*h.xScale,d.height*h.yScale),a.rotate(-n.angle),a.translate(-n.position.x,-n.position.y)}else{if(n.circleRadius)a.beginPath(),a.arc(n.position.x,n.position.y,n.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(n.vertices[0].x,n.vertices[0].y);for(var f=1;f<n.vertices.length;f++)!n.vertices[f-1].isInternal||c?a.lineTo(n.vertices[f].x,n.vertices[f].y):a.moveTo(n.vertices[f].x,n.vertices[f].y),n.vertices[f].isInternal&&!c&&a.moveTo(n.vertices[(f+1)%n.vertices.length].x,n.vertices[(f+1)%n.vertices.length].y);a.lineTo(n.vertices[0].x,n.vertices[0].y),a.closePath()}l.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=n.render.fillStyle,n.render.lineWidth&&(a.lineWidth=n.render.lineWidth,a.strokeStyle=n.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},r.bodyWireframes=function(e,t,i){var r,n,s,o,a,l=i,c=e.options.showInternalEdges;for(l.beginPath(),s=0;s<t.length;s++)if((r=t[s]).render.visible)for(a=1<r.parts.length?1:0;a<r.parts.length;a++){for(n=r.parts[a],l.moveTo(n.vertices[0].x,n.vertices[0].y),o=1;o<n.vertices.length;o++)!n.vertices[o-1].isInternal||c?l.lineTo(n.vertices[o].x,n.vertices[o].y):l.moveTo(n.vertices[o].x,n.vertices[o].y),n.vertices[o].isInternal&&!c&&l.moveTo(n.vertices[(o+1)%n.vertices.length].x,n.vertices[(o+1)%n.vertices.length].y);l.lineTo(n.vertices[0].x,n.vertices[0].y)}l.lineWidth=1,l.strokeStyle="#bbb",l.stroke()},r.bodyConvexHulls=function(e,t,i){var r,n,s,o=i;for(o.beginPath(),n=0;n<t.length;n++)if((r=t[n]).render.visible&&1!==r.parts.length){for(o.moveTo(r.vertices[0].x,r.vertices[0].y),s=1;s<r.vertices.length;s++)o.lineTo(r.vertices[s].x,r.vertices[s].y);o.lineTo(r.vertices[0].x,r.vertices[0].y)}o.lineWidth=1,o.strokeStyle="rgba(255,255,255,0.2)",o.stroke()},r.vertexNumbers=function(e,t,i){var r,n,s,o=i;for(r=0;r<t.length;r++){var a=t[r].parts;for(s=1<a.length?1:0;s<a.length;s++){var l=a[s];for(n=0;n<l.vertices.length;n++)o.fillStyle="rgba(255,255,255,0.2)",o.fillText(r+"_"+n,l.position.x+.8*(l.vertices[n].x-l.position.x),l.position.y+.8*(l.vertices[n].y-l.position.y))}}},r.mousePosition=function(e,t,i){var r=i;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},r.bodyBounds=function(e,t,i){var r=i,n=(e.engine,e.options);r.beginPath();for(var s=0;s<t.length;s++)if(t[s].render.visible)for(var o=t[s].parts,a=1<o.length?1:0;a<o.length;a++){var l=o[a];r.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}n.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},r.bodyAxes=function(e,t,i){var r,n,s,o,a=i,l=(e.engine,e.options);for(a.beginPath(),n=0;n<t.length;n++){var c=t[n],h=c.parts;if(c.render.visible)if(l.showAxes)for(s=1<h.length?1:0;s<h.length;s++)for(r=h[s],o=0;o<r.axes.length;o++){var d=r.axes[o];a.moveTo(r.position.x,r.position.y),a.lineTo(r.position.x+20*d.x,r.position.y+20*d.y)}else for(s=1<h.length?1:0;s<h.length;s++)for(r=h[s],o=0;o<r.axes.length;o++)a.moveTo(r.position.x,r.position.y),a.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}l.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},r.bodyPositions=function(e,t,i){var r,n,s,o,a=i,l=(e.engine,e.options);for(a.beginPath(),s=0;s<t.length;s++)if((r=t[s]).render.visible)for(o=0;o<r.parts.length;o++)n=r.parts[o],a.arc(n.position.x,n.position.y,3,0,2*Math.PI,!1),a.closePath();for(l.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0)",a.fill(),a.beginPath(),s=0;s<t.length;s++)(r=t[s]).render.visible&&(a.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},r.bodyVelocity=function(e,t,i){var r=i;r.beginPath();for(var n=0;n<t.length;n++){var s=t[n];s.render.visible&&(r.moveTo(s.position.x,s.position.y),r.lineTo(s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},r.bodyIds=function(e,t,i){var r,n,s=i;for(r=0;r<t.length;r++)if(t[r].render.visible){var o=t[r].parts;for(n=1<o.length?1:0;n<o.length;n++){var a=o[n];s.font="12px Arial",s.fillStyle="rgba(255,255,255,0.5)",s.fillText(a.id,a.position.x+10,a.position.y-10)}}},r.collisions=function(e,t,i){var r,n,s,o,a=i,l=e.options;for(a.beginPath(),s=0;s<t.length;s++)if((r=t[s]).isActive)for(n=r.collision,o=0;o<r.activeContacts.length;o++){var c=r.activeContacts[o].vertex;a.rect(c.x-1.5,c.y-1.5,3.5,3.5)}for(l.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),s=0;s<t.length;s++)if((r=t[s]).isActive&&(n=r.collision,0<r.activeContacts.length)){var h=r.activeContacts[0].vertex.x,d=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(h=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,d=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),n.bodyB===n.supports[0].body||!0===n.bodyA.isStatic?a.moveTo(h-8*n.normal.x,d-8*n.normal.y):a.moveTo(h+8*n.normal.x,d+8*n.normal.y),a.lineTo(h,d)}l.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},r.separations=function(e,t,i){var r,n,s,o,a,l=i,c=e.options;for(l.beginPath(),a=0;a<t.length;a++)if((r=t[a]).isActive){s=(n=r.collision).bodyA;var h=1;(o=n.bodyB).isStatic||s.isStatic||(h=.5),o.isStatic&&(h=0),l.moveTo(o.position.x,o.position.y),l.lineTo(o.position.x-n.penetration.x*h,o.position.y-n.penetration.y*h),h=1,o.isStatic||s.isStatic||(h=.5),s.isStatic&&(h=0),l.moveTo(s.position.x,s.position.y),l.lineTo(s.position.x+n.penetration.x*h,s.position.y+n.penetration.y*h)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},r.grid=function(e,t,i){var r=i;e.options.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var s=n.keys(t.buckets),o=0;o<s.length;o++){var a=s[o];if(!(t.buckets[a].length<2)){var l=a.split(/C|R/);r.rect(.5+parseInt(l[1],10)*t.bucketWidth,.5+parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}r.lineWidth=1,r.stroke()},r.inspector=function(e,t){e.engine;var i,r=e.selected,n=e.render,s=n.options;if(s.hasBounds){var o=n.bounds.max.x-n.bounds.min.x,a=n.bounds.max.y-n.bounds.min.y,l=o/n.options.width,c=a/n.options.height;t.scale(1/l,1/c),t.translate(-n.bounds.min.x,-n.bounds.min.y)}for(var h=0;h<r.length;h++){var d=r[h].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":i=d.bounds,t.beginPath(),t.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var u=d.pointA;d.bodyA&&(u=d.pointB),t.beginPath(),t.arc(u.x,u.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",i=e.selectBounds,t.beginPath(),t.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),s.hasBounds&&t.setTransform(1,0,0,1,0,0)};var i=function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},d=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},u=function(e,t){var i=e.textures[t];return i||((i=e.textures[t]=new Image).src=t,i)},f=function(e,t){var i=t;/(jpg|gif|png)$/.test(t)&&(i="url("+t+")"),e.canvas.style.background=i,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,i){var r={};t.exports=r;var n=e("../geometry/Bounds"),s=e("../body/Composite"),o=e("../core/Common"),a=e("../core/Events"),l=e("../geometry/Vector");!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){o.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:r,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},i=o.extend(t,e),n=!i.options.wireframes&&"transparent"===i.options.background;return i.pixiOptions=i.pixiOptions||{view:i.canvas,transparent:n,antialias:!0,backgroundColor:e.background},i.mouse=e.mouse,i.engine=e.engine,i.renderer=i.renderer||new PIXI.WebGLRenderer(i.options.width,i.options.height,i.pixiOptions),i.container=i.container||new PIXI.Container,i.spriteContainer=i.spriteContainer||new PIXI.Container,i.canvas=i.canvas||i.renderer.view,i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.options.width,y:i.options.height}},a.on(i.engine,"beforeUpdate",function(){r.clear(i)}),i.textures={},i.sprites={},i.primitives={},i.container.addChild(i.spriteContainer),o.isElement(i.element)?i.element.appendChild(i.canvas):o.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),i.canvas.oncontextmenu=function(){return!1},i.canvas.onselectstart=function(){return!1},i},r.run=function(t){!function i(n){t.frameRequestId=e(i),r.world(t)}()},r.stop=function(e){t(e.frameRequestId)},r.clear=function(e){for(var t=e.container,i=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;i.children[0];)i.removeChild(i.children[0]);var r=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},(e.sprites["bg-0"]=r)&&t.addChildAt(r,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},r.setBackground=function(e,t){if(e.currentBackground!==t){var i=t.indexOf&&-1!==t.indexOf("#"),r=e.sprites["bg-0"];if(i){var n=o.colorToNumber(t);e.renderer.backgroundColor=n,r&&e.container.removeChild(r)}else if(!r){var s=h(e,t);(r=e.sprites["bg-0"]=new PIXI.Sprite(s)).position.x=0,r.position.y=0,e.container.addChildAt(r,0)}e.currentBackground=t}},r.world=function(e){var t,i=e.engine.world,o=e.renderer,a=e.container,c=e.options,h=s.allBodies(i),d=s.allConstraints(i),u=[];c.wireframes?r.setBackground(e,c.wireframeBackground):r.setBackground(e,c.background);var f=e.bounds.max.x-e.bounds.min.x,g=e.bounds.max.y-e.bounds.min.y,p=f/e.options.width,m=g/e.options.height;if(c.hasBounds){for(t=0;t<h.length;t++){var v=h[t];v.render.sprite.visible=n.overlaps(v.bounds,e.bounds)}for(t=0;t<d.length;t++){var y=d[t],_=y.bodyA,x=y.bodyB,b=y.pointA,w=y.pointB;_&&(b=l.add(_.position,y.pointA)),x&&(w=l.add(x.position,y.pointB)),b&&w&&(n.contains(e.bounds,b)||n.contains(e.bounds,w))&&u.push(y)}a.scale.set(1/p,1/m),a.position.set(-e.bounds.min.x*(1/p),-e.bounds.min.y*(1/m))}else u=d;for(t=0;t<h.length;t++)r.body(e,h[t]);for(t=0;t<u.length;t++)r.constraint(e,u[t]);o.render(a)},r.constraint=function(e,t){e.engine;var i=t.bodyA,r=t.bodyB,n=t.pointA,s=t.pointB,a=e.container,l=t.render,c="c-"+t.id,h=e.primitives[c];h||(h=e.primitives[c]=new PIXI.Graphics),l.visible&&t.pointA&&t.pointB?(-1===o.indexOf(a.children,h)&&a.addChild(h),h.clear(),h.beginFill(0,0),h.lineStyle(l.lineWidth,o.colorToNumber(l.strokeStyle),1),i?h.moveTo(i.position.x+n.x,i.position.y+n.y):h.moveTo(n.x,n.y),r?h.lineTo(r.position.x+s.x,r.position.y+s.y):h.lineTo(s.x,s.y),h.endFill()):h.clear()},r.body=function(e,t){e.engine;var r=t.render;if(r.visible)if(r.sprite&&r.sprite.texture){var n="b-"+t.id,s=e.sprites[n],a=e.spriteContainer;s||(s=e.sprites[n]=i(e,t)),-1===o.indexOf(a.children,s)&&a.addChild(s),s.position.x=t.position.x,s.position.y=t.position.y,s.rotation=t.angle,s.scale.x=r.sprite.xScale||1,s.scale.y=r.sprite.yScale||1}else{var l="b-"+t.id,h=e.primitives[l],d=e.container;h||((h=e.primitives[l]=c(e,t)).initialAngle=t.angle),-1===o.indexOf(d.children,h)&&d.addChild(h),h.position.x=t.position.x,h.position.y=t.position.y,h.rotation=t.angle-h.initialAngle}};var i=function(e,t){var i=t.render.sprite.texture,r=h(e,i),n=new PIXI.Sprite(r);return n.anchor.x=t.render.sprite.xOffset,n.anchor.y=t.render.sprite.yOffset,n},c=function(e,t){var i,r=t.render,n=e.options,s=new PIXI.Graphics,a=o.colorToNumber(r.fillStyle),l=o.colorToNumber(r.strokeStyle),c=o.colorToNumber(r.strokeStyle),h=o.colorToNumber("#bbb"),d=o.colorToNumber("#CD5C5C");s.clear();for(var u=1<t.parts.length?1:0;u<t.parts.length;u++){i=t.parts[u],n.wireframes?(s.beginFill(0,0),s.lineStyle(1,h,1)):(s.beginFill(a,1),s.lineStyle(r.lineWidth,l,1)),s.moveTo(i.vertices[0].x-t.position.x,i.vertices[0].y-t.position.y);for(var f=1;f<i.vertices.length;f++)s.lineTo(i.vertices[f].x-t.position.x,i.vertices[f].y-t.position.y);s.lineTo(i.vertices[0].x-t.position.x,i.vertices[0].y-t.position.y),s.endFill(),(n.showAngleIndicator||n.showAxes)&&(s.beginFill(0,0),n.wireframes?s.lineStyle(1,d,1):s.lineStyle(1,c),s.moveTo(i.position.x-t.position.x,i.position.y-t.position.y),s.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2-t.position.x,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2-t.position.y),s.endFill())}return s},h=function(e,t){var i=e.textures[t];return i||(i=e.textures[t]=PIXI.Texture.fromImage(t)),i}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)});var mouse,debug=/debug/i.test(window.location.href),vector=new Two.Vector,entities=[],symbols=[],cascadeScalar=5,symbolScalar=1.33,copy=[],two=new Two({type:Two.Types.canvas,fullscreen:!0}).appendTo(document.querySelector("#interactive__homepage")),dimensions={width:two.width,height:two.height},runner=Matter.Runner.create(),solver=Matter.Engine.create();solver.world.gravity.y=1;var bounds={thickness:50,properties:{isStatic:!0}};bounds.left=createBoundary(bounds.thickness,two.height+bounds.thickness),bounds.right=createBoundary(bounds.thickness,two.height+bounds.thickness),bounds.bottom=createBoundary(two.width+bounds.thickness,bounds.thickness),Matter.World.add(solver.world,[bounds.left.entity,bounds.right.entity,bounds.bottom.entity]);var defaultStyles={size:getFontSize(),weight:300,color:"currentcolor",leading:getFontSize(),family:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",margin:{top:3,left:6,right:6,bottom:3}};function setup(){setupCopy(),setupSymbols(),addSlogan(),resize(),mouse=addMouseInteraction(),two.bind("resize",resize),window.addEventListener("deviceorientation",function(e){var t=void 0!==window.orientation?window.orientation:0,i=solver.world.gravity;0===t?(i.x=clamp(e.gamma,-90,90)/90,i.y=clamp(e.beta,-90,90)/90):180===t?(i.x=clamp(e.gamma,-90,90)/90,i.y=clamp(-e.beta,-90,90)/90):90===t?(i.x=clamp(e.beta,-90,90)/90,i.y=clamp(-e.gamma,-90,90)/90):-90===t&&(i.x=clamp(-e.beta,-90,90)/90,i.y=clamp(e.gamma,-90,90)/90)},!1),two.playing=!0,Matter.Runner.run(runner,solver),Matter.Events.on(solver,"afterUpdate",update)}function setupCopy(){for(var e=document.querySelector("#interactive__text").childNodes,t=0;t<e.length;t++){var i=e[t];copy=copy.concat(r(i))}function r(e){var t,i,n,s,o=[],a={};if(0<e.childNodes.length){switch(e.tagName.toLowerCase()){case"em":a.style="italic";break;case"span":break;case"b":case"strong":a.weight=600}for(o.push({styles:a,value:[]}),i=0;i<e.childNodes.length;i++)t=r(e.childNodes[i]),o[0].value=o[0].value.concat(t)}else for(t=e.textContent.split(/\s+/i),n=0;n<t.length;n++)(s=t[n])&&o.push(s);return o}}function setupSymbols(){symbols.index=0;for(var e=document.querySelectorAll("#interactive__images > *"),t=0;t<e.length;t++){var i=e[t].getAttribute("svg-src"),r=new Two.Group,n=new Two.Texture(i,symbolLoaded(r)),s=new Two.Sprite(n);s.scale=.5,r.add(s),symbols.push(r)}}function symbolLoaded(e){return function(){symbols.isReady=!0,e.rect=e.getBoundingClientRect(),e.rect.ratio=e.rect.width/e.rect.height,e.isReady=!0}}function resize(){var e=bounds.thickness,t=1.25*two.width,i=1.25*two.height;vector.x=two.width/2-two.width/2-e/2,vector.y=two.height/2,Matter.Body.setPosition(bounds.left.entity,vector),Matter.Body.scale(bounds.left.entity,1/bounds.left.entity.scale.x,1/bounds.left.entity.scale.y),Matter.Body.scale(bounds.left.entity,e,i),bounds.left.entity.scale.x=e,bounds.left.entity.scale.y=i,vector.x=two.width/2+two.width/2+e/2,vector.y=two.height/2,Matter.Body.setPosition(bounds.right.entity,vector),Matter.Body.scale(bounds.right.entity,1/bounds.right.entity.scale.x,1/bounds.right.entity.scale.y),Matter.Body.scale(bounds.right.entity,e,i),bounds.right.entity.scale.x=e,bounds.right.entity.scale.y=i,vector.x=two.width/2,vector.y=two.height+e/2,Matter.Body.setPosition(bounds.bottom.entity,vector),Matter.Body.scale(bounds.bottom.entity,1/bounds.bottom.entity.scale.x,1/bounds.bottom.entity.scale.y),Matter.Body.scale(bounds.bottom.entity,t,e),bounds.bottom.entity.scale.x=t,bounds.bottom.entity.scale.y=e,two.renderer.domElement.setAttribute("data-pixel-ratio",two.renderer.ratio);for(var r=getFontSize(),n=.8*r,s=0;s<two.scene.children.length;s++){var o=two.scene.children[s];if(o.isWord||o.isLetter||o.isSymbol){var a,l=o.text,c=o.rectangle,h=o.entity;l?(l.size=r,l.leading=n,a=l.getBoundingClientRect(!0)):(a={width:o.rect.width*(r*symbolScalar)/300,height:o.rect.height*(r*symbolScalar)/300},o.destinationScale=r*symbolScalar/300),c.width=a.width,c.height=a.height,Matter.Body.scale(h,1/h.scale.x,1/h.scale.y),Matter.Body.scale(h,a.width,a.height),vector.x=two.width*h.position.x/dimensions.width,vector.y=two.height*h.position.y/dimensions.height,h.scale.set(a.width,a.height),Matter.Body.setPosition(h,vector)}}dimensions.width=two.width,dimensions.height=two.height}function update(){for(var e=0;e<entities.length;e++){var t=entities[e],i=t.object;if(t.object.position.copy(t.position),t.object.rotation=t.angle,i.isSymbol){var r=i.destinationScale-i.scale;r<.01&&-.01<r?i.scale=i.destinationScale:i.scale+=.66*(i.destinationScale-i.scale)}}two.render()}function addSlogan(){for(var e,t,i,r,n,s,o=defaultStyles.margin.left,a=defaultStyles.leading,l=[{width:defaultStyles.margin.right,index:0}],c=l.index=0;c<copy.length;c++){var h=copy[c],d=new Two.Group,u=new Two.Text("",0,0,defaultStyles);if(d.isWord=!0,h.value)for(var f in u.value=h.value.join(" "),h.styles)u[f]=h.styles[f];else u.value=h;e=o+(i=u.getBoundingClientRect(!0)).width/2,t=a+i.height/2,r=o+i.width,two.width<r&&(l[l.index].width+=defaultStyles.margin.right,l.index++,l.push({width:defaultStyles.margin.left,index:c}),o=defaultStyles.margin.left,a+=defaultStyles.leading+defaultStyles.margin.top+defaultStyles.margin.bottom,e=o+i.width/2,t=a+i.height/2),d.translation.x=e,d.translation.y=t,u.translation.y=14;var g=new Two.Rectangle(0,0,i.width,i.height);g.stroke="rgb(green)",g.noFill(),g.opacity=.75,g.visible=debug;var p=Matter.Bodies.rectangle(e,t,1,1);Matter.Body.scale(p,i.width,i.height),Matter.Body.rotate(p,Math.random()*Math.PI/16-Math.PI/32),p.scale=new Two.Vector(i.width,i.height),p.object=d,entities.push(p);var m=i.width+defaultStyles.margin.left+defaultStyles.margin.right;o+=m,l[l.index].width+=m,d.text=u,d.rectangle=g,d.entity=p,d.add(u,g),two.add(d)}s=Math.max(t-two.height,0);for(var v=0;v<l.length;v++){var y=l[v],_=l[v+1],x=entities.length;n=Math.max(two.width-y.width,0),n*=Math.random(),_&&(x=_.index);for(var b=y.index;b<x;b++)p=entities[b],vector.x=p.position.x+n,vector.y=p.position.y-s,Matter.Body.setPosition(p,vector);lastIndex=y.index}Matter.World.add(solver.world,entities)}function addMouseInteraction(){var e=document.getElementById("touch-container"),t=0,i=!1,r=!1,n=null;e.querySelector("header");e.addEventListener("click",function(e){var t,s;console.log("Clicked at",e.clientX,e.clientY),e.clientX,t=e.clientY,s=document.querySelector("nav").getBoundingClientRect(),r=t<s.bottom,i=!1,n=null,function(e){r||n||!symbols.isReady||injectSymbol({x:e.clientX,y:e.clientY})}(e)}),e.addEventListener("dblclick",function(e){r||(n&&(cascade({x:e.clientX,y:e.clientY}),explode(n)),n=null)},!1);var s=Matter.MouseConstraint.create(solver,{constraint:{stiffness:.2}});return Matter.Events.on(s,"startdrag",function(e){if(!r&&(n=e.source.body,i)){var o=Date.now();o-t<=300&&n&&(cascade(s.mouse.position),explode(n)),t=o}}),Matter.World.add(solver.world,s),s}function explode(e){if(!e.object.isSymbol){var t=e.object,i=t.text.value.split(""),r=t.text.getBoundingClientRect(!0),n=e.angle,s=[],o=getIndex(e);0<=o&&entities.splice(o,1);for(var a=0;a<i.length;a++){var l=(a+.5)/i.length,c=i[a],h=new Two.Group;h.isLetter=!0;var d=t.text.clone();d.value=c;var u=d.getBoundingClientRect(!0),f=l*r.width-r.width/2,g=t.position.x+f*Math.cos(n),p=t.position.y+f*Math.sin(n);h.translation.x=g,h.translation.y=p,d.translation.y=14;var m=new Two.Rectangle(0,0,u.width,u.height);m.stroke="rgb(green)",m.noFill(),m.opacity=.75,m.visible=debug,e=Matter.Bodies.rectangle(g,p,1,1),Matter.Body.scale(e,u.width,u.height),Matter.Body.rotate(e,n),Matter.Body.setMass(e,2.5);var v=l*Math.PI*2;vector.x=.33*Math.cos(v),vector.y=.33*Math.sin(v),Matter.Body.applyForce(e,e.position,vector),e.scale=new Two.Vector(u.width,u.height),e.object=h,entities.push(e),s.push(e),h.text=d,h.rectangle=m,h.entity=e,h.add(d,m),two.add(h)}Matter.World.remove(solver.world,t.entity),t.remove(),Two.Utils.release(t),Matter.World.add(solver.world,s)}}function injectSymbol(e){var t=getFontSize()*symbolScalar,i=getNextSymbol(),r=i.clone(),n=[];r.isSymbol=!0,r.symbol=getPathFromSVG(r),r.symbol.scale=.5;var s=e.x,o=e.y,a={width:i.rect.width*(t*symbolScalar)/300,height:i.rect.height*(t*symbolScalar)/300};r.scale=0,r.destinationScale=t*symbolScalar/300,r.rect=i.rect,r.position.set(s,o);var l=new Two.Rectangle(0,0,i.rect.width,i.rect.height);l.stroke="rgb(green)",l.noFill(),l.opacity=.75,l.visible=debug;var c=Math.random()*Math.PI/16-Math.PI/32,h=Matter.Bodies.rectangle(s,o,1,1);Matter.Body.scale(h,a.width,a.height),Matter.Body.rotate(h,c),Matter.Body.setMass(h,2.5),h.scale=new Two.Vector(a.width,a.height),h.object=r,entities.push(h),n.push(h),r.rectangle=l,r.entity=h,r.add(l),two.add(r),Matter.World.add(solver.world,n)}function getPathFromSVG(e){for(var t=0;t<e.children.length;t++){var i=e.children[t];if(/path/i.test(i._renderer.type))return i}return null}function getNextSymbol(){var e=symbols[symbols.index];return symbols.index=(symbols.index+1)%symbols.length,e.isReady?e:getNextSymbol()}function cascade(e){for(var t=0;t<entities.length;t++){var i=entities[t],r=i.position.x-e.x,n=i.position.y-e.y,s=Math.atan2(n,r),o=Math.sqrt(r*r+n+n),a=cascadeScalar/o;a||(a=1),vector.x=a*Math.cos(s),vector.y=a*Math.sin(s),Matter.Body.applyForce(i,i.position,vector)}}function release(e){vector.x=0,vector.y=0,Matter.Body.setStatic(e,!1),Matter.Body.applyForce(e,e.position,vector)}function createBoundary(e,t){var i=two.makeRectangle(0,0,e,t);i.visible=debug;var r=Matter.Bodies.rectangle(0,0,1,1,bounds.properties);return Matter.Body.scale(r,e,t),r.position=i.position,r.scale=new Two.Vector(e,t),i.entity=r,i}function getIndex(e){for(var t=0;t<entities.length;t++)if(entities[t].id===e.id)return t;return-1}function getFontSize(){var e=two.width,t=(two.height,two.height/two.width);return two.width,two.height,2<t?.14*e:1.75<t&&t<2.01?.13*e:1.5<t&&t<1.76?.12*e:1.25<t&&t<1.51?.11*e:1<t&&t<1.26?.105*e:.9<t&&t<1.01?.095*e:.7<t&&t<.91?.085*e:.6<t&&t<.71?.08*e:.5<t&&t<.61?.075*e:.45<t&&t<.51?.07*e:.4<t&&t<.46?.065*e:.35<t&&t<.41?.06*e:.3<t&&t<.36?.055*e:.25<t&&t<.31?.05*e:.2<t&&t<.26?.045*e:.1<t&&t<.11?.032*e:.03*e}function clamp(e,t,i){return Math.min(Math.max(e,t),i)}setup()</script></body></html></div></div></article></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".page-transition-overlay"),t=document.body;setTimeout(()=>{e.classList.add("fade-out"),t.classList.add("loaded"),setTimeout(()=>{e.remove()},1e3)},100)})</script><script defer="defer" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "e8fdac6a36f74464bcf2d55fbb7f0ca2"}'></script></body></html><script src="/js/device-detection.4dba43d7.js"></script><script src="/js/code-sandbox.c73cbc88.js"></script><script defer="defer" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "e8fdac6a36f74464bcf2d55fbb7f0ca2"}'></script><script>document.body.classList.add("loaded")</script></body></html>