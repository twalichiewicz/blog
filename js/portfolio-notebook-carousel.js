!function(){"use strict";class t{constructor(){this.container=document.querySelector(".portfolio-featured-grid"),this.container&&(window.innerWidth<=768||"ontouchstart"in window)&&(this.notebooks=Array.from(this.container.querySelectorAll(".portfolio-item-wrapper")),0!==this.notebooks.length&&(this.isScrolling=!1,this.scrollTimeout=null,this.currentActiveIndex=-1,this.scrollEndDelay=150,this.init()))}init(){this.container.classList.add("notebook-carousel-mobile"),document.body.classList.add("notebook-carousel-active");const t=document.getElementById("projectsContent");t&&t.classList.add("has-notebook-carousel"),setTimeout(()=>{const t=this.container.getBoundingClientRect(),e=getComputedStyle(this.container);this.containerInfo={height:t.height,scrollHeight:this.container.scrollHeight,canScroll:this.container.scrollHeight>t.height,overflow:e.overflow,overflowY:e.overflowY,position:e.position},this.setupCarousel()},100)}setupCarousel(){this.container.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0}),this.setupIntersectionObserver(),this.checkInitialNotebook()}checkInitialNotebook(){const t=this.container.getBoundingClientRect(),e=t.top+t.height/2;this.notebooks.forEach((t,o)=>{const i=t.getBoundingClientRect(),s=i.top+i.height/2;Math.abs(s-e)<50&&this.activateNotebook(o)})}setupIntersectionObserver(){this.observer&&this.observer.disconnect();const t={root:this.container,rootMargin:"-33.33% 0px -33.33% 0px",threshold:.5};this.observer=new IntersectionObserver(t=>{this.isScrolling||t.forEach(t=>{const e=this.notebooks.indexOf(t.target);t.isIntersecting&&e!==this.currentActiveIndex&&this.activateNotebook(e)})},t),this.notebooks.forEach(t=>{this.observer.observe(t)})}handleScroll(){this.isScrolling||(this.isScrolling=!0,this.deactivateAllNotebooks()),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1,this.snapToNearestNotebook()},this.scrollEndDelay)}snapToNearestNotebook(){const t=this.container.getBoundingClientRect(),e=t.top+t.height/2;let o=null,i=1/0,s=-1;this.notebooks.forEach((t,n)=>{const c=t.getBoundingClientRect(),r=c.top+c.height/2,l=Math.abs(r-e);l<i&&(i=l,o=t,s=n)}),o&&(o.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{this.checkActiveNotebook()},300))}checkActiveNotebook(){const t=this.container.getBoundingClientRect(),e=t.top+t.height/2,o=t.height/3;this.notebooks.forEach((t,i)=>{const s=t.getBoundingClientRect(),n=s.top+s.height/2;Math.abs(n-e)<o/2&&i!==this.currentActiveIndex&&this.activateNotebook(i)})}activateNotebook(t){this.notebooks.forEach((e,o)=>{e.classList.remove("carousel-active","carousel-dimmed"),o!==t&&e.classList.add("carousel-dimmed")}),this.notebooks[t].classList.add("carousel-active"),this.currentActiveIndex=t}deactivateAllNotebooks(){this.notebooks.forEach(t=>{t.classList.remove("carousel-active","carousel-dimmed")}),this.currentActiveIndex=-1}destroy(){this.container.classList.remove("notebook-carousel-mobile"),document.body.classList.remove("notebook-carousel-active");const t=document.getElementById("projectsContent");t&&t.classList.remove("has-notebook-carousel"),this.deactivateAllNotebooks(),this.observer&&this.observer.disconnect(),this.scrollTimeout&&clearTimeout(this.scrollTimeout)}}function e(){new t}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(e,100)}):setTimeout(e,100),document.addEventListener("contentLoaded",()=>{setTimeout(e,100)}),document.addEventListener("portfolio-loaded",()=>{setTimeout(e,100)}),window.addEventListener("load",()=>{document.querySelector(".portfolio-featured-grid.notebook-carousel-mobile")||setTimeout(e,100)})}();