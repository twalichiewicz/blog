!function(t){"use strict";const e=new class{constructor(){this.sounds=new Map,this.enabled=!0,this.volume=.5,this.initialized=!1}init(){if(this.initialized)return;const e=localStorage.getItem("sound-effects-enabled");this.enabled=null===e||"true"===e;const o=localStorage.getItem("sound-effects-volume");this.volume=null!==o?parseFloat(o):.5,this.preloadCommonSounds(),this.initialized=!0,t.events.emit("sound-effects:initialized")}loadSound(t,e,o=["mp3","ogg","m4a"]){const l=new Audio;for(const t of o){const o=l.canPlayType(`audio/${"m4a"===t?"mp4":t}`);if("probably"===o||"maybe"===o){l.src=`${e}.${t}`;break}}return l.src||(l.src=`${e}.mp3`),l.preload="auto",l.volume=this.volume,l.addEventListener("error",t=>{}),this.sounds.set(t,l),l}play(t,e=null){if(!this.enabled)return;const o=this.sounds.get(t);if(o)try{o.currentTime=0,o.volume=null!==e?e:this.volume;const t=o.play();void 0!==t&&t.catch(t=>{})}catch(t){}}setEnabled(e){this.enabled=e,localStorage.setItem("sound-effects-enabled",e.toString()),t.events.emit("sound-effects:toggle",{enabled:e})}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),localStorage.setItem("sound-effects-volume",this.volume.toString()),this.sounds.forEach(t=>{t.volume=this.volume}),t.events.emit("sound-effects:volume-change",{volume:this.volume})}isEnabled(){return this.enabled}getVolume(){return this.volume}preloadCommonSounds(){this.loadSound("toggle","/media/toggleSound",["mp3","ogg","m4a"]),this.loadSound("buttonDown","/media/button-press-down",["mp3","m4a"]),this.loadSound("buttonUp","/media/button-press-up",["mp3","m4a"]),this.loadSound("smallClick","/media/smallClick",["mp3"]),this.loadSound("slider","/media/slider",["mp3"])}playButton(){this.play("smallClick")}playSmallClick(){this.play("smallClick")}playToggle(){this.play("toggle")}playSlider(){this.play("slider")}playButtonDown(){this.play("buttonDown")}playButtonUp(){this.play("buttonUp")}};t.utils.sound=e,t.registerModule("sound-effects",e)}(window.SD||(window.SD={}));