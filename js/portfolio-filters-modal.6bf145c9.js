!function(){"use strict";let e=new Map,t=new Map;function l(){const l=document.getElementById("openFiltersModal"),r=document.getElementById("filtersModal"),s=r?.querySelector(".filters-modal-close"),c=r?.querySelector(".filters-modal-backdrop"),a=r?.querySelector(".filters-apply"),f=r?.querySelector(".filter-clear");l&&r&&(l.addEventListener("click",()=>{!function(l){window.portfolioFilters&&window.portfolioFilters.getActiveFilters&&(t=new Map(window.portfolioFilters.getActiveFilters()),e=new Map(t)),i(),l.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const o=l.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');o?.focus()}(r),d("smallClick")}),s?.addEventListener("click",()=>{o(r),d("smallClick")}),c?.addEventListener("click",()=>{o(r)}),a?.addEventListener("click",()=>{window.portfolioFilters&&window.portfolioFilters.setActiveFilters&&window.portfolioFilters.setActiveFilters(e),window.dispatchEvent(new CustomEvent("portfolio-filters-changed",{detail:{filters:e}})),o(r),d("smallClick")}),f?.addEventListener("click",()=>{!function(){e.clear();const t=document.getElementById("filtersModal"),l=t?.querySelectorAll(".filter-pill");l?.forEach(e=>e.classList.remove("active")),n()}(),d("smallClick")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&"false"===r.getAttribute("aria-hidden")&&o(r)}),r.querySelectorAll(".filter-pill").forEach(t=>{t.addEventListener("click",()=>{!function(t){const l=t.dataset.filter,o=t.dataset.category;e.has(o)||e.set(o,new Set);const i=e.get(o);i.has(l)?(i.delete(l),t.classList.remove("active")):(i.add(l),t.classList.add("active")),n()}(t),d("toggleSound")})}))}function o(l){l.setAttribute("aria-hidden","true"),document.body.style.overflow="",e=new Map(t),i(),document.getElementById("openFiltersModal")?.focus()}function i(){const t=document.getElementById("filtersModal"),l=t?.querySelectorAll(".filter-pill");l?.forEach(t=>{const l=t.dataset.filter,o=t.dataset.category,i=e.get(o)?.has(l)||!1;t.classList.toggle("active",i)}),n()}function n(){const t=document.getElementById("filtersModal"),l=t?.querySelector(".filter-clear");if(!l)return;const o=Array.from(e.values()).some(e=>e.size>0);l.disabled=!o}function d(e){window.soundEffects&&window.soundEffects.play&&window.soundEffects.play(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l(),window.addEventListener("portfolio-loaded",l)}();