!function(){"use strict";let e=new Map;function t(){const t=document.querySelectorAll(".filter-pill"),n=document.querySelector(".filter-clear"),r=document.querySelectorAll(".portfolio-item-wrapper");t.length&&r.length&&(t.forEach(t=>{t.addEventListener("click",()=>function(t){const i=t.dataset.filter,n=t.dataset.category;if(!n||!i)return;e.has(n)||e.set(n,new Set);const r=e.get(n);r.has(i)?(r.delete(i),t.classList.remove("active")):(r.add(i),t.classList.add("active")),0===r.size&&e.delete(n),window.soundEffects&&window.soundEffects.play&&window.soundEffects.play("toggle"),o(),l(),window.dispatchEvent(new Event("portfolio-filters-applied"))}(t))}),n&&(n.addEventListener("click",i),l()))}function o(){document.querySelectorAll(".portfolio-item-wrapper").forEach(t=>{let o=!0;for(const[i,l]of e){if(0===l.size)continue;const e=(t.dataset[i]||"").split(" ").filter(e=>e);if(!Array.from(l).some(t=>e.includes(t))){o=!1;break}}o?t.classList.remove("filtered-out"):t.classList.add("filtered-out")}),n()}function i(){e.clear(),document.querySelectorAll(".filter-pill.active").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".portfolio-item-wrapper").forEach(e=>{e.classList.remove("filtered-out")}),window.soundEffects&&window.soundEffects.play&&window.soundEffects.play("smallClick"),l(),n(),window.dispatchEvent(new Event("portfolio-updated")),window.dispatchEvent(new Event("portfolio-filters-applied"))}function l(){const t=document.querySelector(".filter-clear");if(!t)return;const o=e.size>0;t.disabled=!o}function n(){document.querySelectorAll(".portfolio-item-wrapper").length,document.querySelectorAll(".portfolio-item-wrapper:not(.filtered-out)").length}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),document.addEventListener("blog:content-loaded",t),document.addEventListener("portfolio:loaded",t),window.addEventListener("portfolio-filters-changed",t=>{t.detail&&t.detail.filters&&(e=new Map(t.detail.filters),o())}),window.portfolioFilters={getActiveFilters:()=>e,setActiveFilters:t=>{e=new Map(t),o()}}}();