import{initSectionAnimations,initColumnTitleScrollDetection}from"./utils/animations.js";import{initializeSoundEffects}from"./utils/sound-effects.js";import{initResponsiveTables}from"./components/responsive-tables.js";let impactCharacterModulePromise=null,impactLiquidModulePromise=null;const impactLiquidState={isOpen:!1,isTransitioning:!1,closePromise:null,activeTarget:null,coveredTarget:null,mountTarget:null,isEmbedded:!1,keydownHandler:null,resizeHandler:null,viewportMode:null};function loadImpactCharacterModule(){return impactCharacterModulePromise||(impactCharacterModulePromise=import("./components/impact-character.js")),impactCharacterModulePromise}function startImpactCharacter(){return loadImpactCharacterModule().then(e=>e.startImpactCharacter?.()).catch(()=>{})}function stopImpactCharacter(){impactCharacterModulePromise&&impactCharacterModulePromise.then(e=>e.stopImpactCharacter?.()).catch(()=>{})}function loadImpactLiquidModule(){return impactLiquidModulePromise||(impactLiquidModulePromise=import("./components/impact-liquid.js")),impactLiquidModulePromise}function startImpactLiquidOverlay(e){return loadImpactLiquidModule().then(t=>t.startImpactLiquidOverlay?.(e)).catch(()=>null)}function stopImpactLiquidOverlay(){return impactLiquidModulePromise?impactLiquidModulePromise.then(e=>e.stopImpactLiquidOverlay?.()).catch(()=>{}):Promise.resolve()}function initNotebookHoverSounds(){let e=null;function t(){document.querySelectorAll(".portfolio-featured-grid .portfolio-item-wrapper").forEach(e=>{e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",n),e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",n)})}function o(){window.innerWidth>768&&(e&&clearTimeout(e),e=setTimeout(()=>{window.playBookSound?window.playBookSound():window.soundEffects&&window.soundEffects.play&&window.soundEffects.play("book")},300))}function n(){e&&(clearTimeout(e),e=null)}!function e(){window.soundEffects||window.playBookSound?t():setTimeout(e,100)}(),document.addEventListener("contentLoaded",t),document.addEventListener("portfolio-loaded",t)}function initMobileExpandableHeader(){const e=document.querySelector(".mobile-expand-button"),t=document.querySelector(".profile-header"),o=document.querySelector(".mobile-expandable-content"),n=document.querySelector(".blog-content");if(!e||!t||!o)return;e.addEventListener("click",function(){const o="true"===t.getAttribute("data-expanded");t.setAttribute("data-expanded",!o),e.setAttribute("aria-expanded",!o),!o&&n&&(n.style.transition="transform 0.3s ease",n.style.transform="translateY(0)",setTimeout(()=>{n.style.transition="",n.style.transform=""},300)),window.playButtonSound&&window.playButtonSound()});const i=function(o){"true"===t.getAttribute("data-expanded")&&!t.contains(o.target)&&(t.setAttribute("data-expanded","false"),e.setAttribute("aria-expanded","false"))};document.addEventListener("click",i),t._outsideClickHandler=i}document.addEventListener("DOMContentLoaded",function(){initializeSoundEffects();const e=new URLSearchParams(window.location.search);if("404"===e.get("error")&&!window._404ToastShown){window._404ToastShown=!0,e.get("path");const t=()=>{if(window.SD&&window.SD.ui&&window.SD.ui.showToast){window.SD.ui.showToast("<strong>404</strong><br>That page isn't found","info",5e3),e.delete("error"),e.delete("path");const t=window.location.pathname+(e.toString()?"?"+e.toString():"")+window.location.hash;window.history.replaceState({},"",t)}else setTimeout(t,100)};setTimeout(t,300)}initMobileExpandableHeader(),initSectionAnimations({sectionSelector:".section",blogPostSelector:".blog-post",portfolioItemSelector:".portfolio-item"}),initColumnTitleScrollDetection({postsContentId:"postsContent",projectsContentId:"projectsContent"}),initResponsiveTables(),document.addEventListener("contentLoaded",initResponsiveTables),document.addEventListener("portfolio-loaded",initResponsiveTables),initNotebookHoverSounds()});const mobileActionState={active:!1,currentType:null,isTransitioning:!1,headerHost:null,contentHost:null,impactInlineWrapper:null,impactInlineHeaderPlaceholder:null,impactInlineContentPlaceholder:null,contentInnerWrapperPlaceholder:null,blogContent:null,contentInnerWrapper:null,tabsWrapper:null,tabsElement:null,tabsBacking:null,contentWrapper:null,impactToggle:null,contactToggle:null,cachedNodes:{},keydownHandler:null,rollCleanupTimeout:null,rollOutTimeout:null,impactTimers:[]},mobileContactMenuState={isOpen:!1,menu:null,wrapper:null,profileHeader:null,outsideClickHandler:null,keydownHandler:null,scrollHandler:null,openScrollTop:0,headerHeight:0};function isMobileActionViewport(){return window.innerWidth<=768}function getPageScrollTop(){const e=document.scrollingElement||document.documentElement,t=window.pageYOffset||e.scrollTop||document.body.scrollTop||0;return Math.max(0,t)}function getHeaderHeight(){const e=document.querySelector(".blog-header")||document.querySelector(".profile-header");return e&&e.getBoundingClientRect().height||0}function getMobileActionTimings(){const e=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;return{transition:e?0:640,fade:e?0:280,rollFade:e?0:480,darkTransition:e?0:520}}function clearImpactModeTimers(){mobileActionState.impactTimers.length&&(mobileActionState.impactTimers.forEach(e=>window.clearTimeout(e)),mobileActionState.impactTimers=[])}function scheduleImpactModeTimer(e,t){const o=window.setTimeout(()=>{mobileActionState.impactTimers=mobileActionState.impactTimers.filter(e=>e!==o),e()},t);return mobileActionState.impactTimers.push(o),o}function setImpactModeActive(e){document.body&&(document.body.classList.toggle("impact-mode",e),document.body.classList.toggle("dark-mode-forced",e))}function setImpactInlineActive(e){document.body&&document.body.classList.toggle("impact-inline-active",e)}function ensureMobileActionElements(){return mobileActionState.blogContent&&document.contains(mobileActionState.blogContent)||(mobileActionState.blogContent=document.querySelector(".blog-content")),mobileActionState.contentInnerWrapper&&(document.contains(mobileActionState.contentInnerWrapper)||mobileActionState.contentInnerWrapperPlaceholder)||(mobileActionState.contentInnerWrapper=document.querySelector(".content-inner-wrapper")),mobileActionState.headerHost&&document.contains(mobileActionState.headerHost)||(mobileActionState.headerHost=document.querySelector(".mobile-action-header")),mobileActionState.contentHost&&document.contains(mobileActionState.contentHost)||(mobileActionState.contentHost=document.querySelector(".mobile-action-content")),mobileActionState.tabsWrapper&&document.contains(mobileActionState.tabsWrapper)||(mobileActionState.tabsWrapper=document.querySelector(".tabs-wrapper")),mobileActionState.tabsElement&&document.contains(mobileActionState.tabsElement)||(mobileActionState.tabsElement=document.querySelector(".mobile-tabs")),mobileActionState.tabsBacking&&document.contains(mobileActionState.tabsBacking)||(mobileActionState.tabsBacking=document.querySelector(".mobile-tabs-backing")),mobileActionState.contentWrapper&&document.contains(mobileActionState.contentWrapper)||(mobileActionState.contentWrapper=document.querySelector(".content-wrapper")),mobileActionState.impactToggle&&document.contains(mobileActionState.impactToggle)||(mobileActionState.impactToggle=document.querySelector(".mobile-impact-button")),mobileActionState.contactToggle&&document.contains(mobileActionState.contactToggle)||(mobileActionState.contactToggle=document.querySelector(".mobile-contact-button")),Boolean(mobileActionState.headerHost&&mobileActionState.contentHost&&mobileActionState.tabsWrapper&&mobileActionState.contentWrapper)}function detachContentInnerWrapper(){const{blogContent:e,contentInnerWrapper:t}=mobileActionState;if(!e||!t)return!1;if(t.parentElement!==e)return!1;if(mobileActionState.contentInnerWrapperPlaceholder)return!0;const o=document.createElement("div");return o.style.display="none",o.dataset.placeholder="content-inner-wrapper",e.insertBefore(o,t),mobileActionState.contentInnerWrapperPlaceholder=o,t.remove(),!0}function restoreContentInnerWrapper(){const{blogContent:e,contentInnerWrapper:t,contentInnerWrapperPlaceholder:o}=mobileActionState;return!!(e&&t&&o)&&!!o.parentElement&&(o.parentElement.insertBefore(t,o),o.remove(),mobileActionState.contentInnerWrapperPlaceholder=null,!0)}function ensureImpactInlineWrapper(){const e=mobileActionState.blogContent;if(!e)return null;if(!mobileActionState.impactInlineWrapper||!document.contains(mobileActionState.impactInlineWrapper)){const t=document.createElement("div");t.className="impact-inline-wrapper",t.setAttribute("aria-hidden","true"),mobileActionState.contentInnerWrapper&&mobileActionState.contentInnerWrapper.parentElement===e?e.insertBefore(t,mobileActionState.contentInnerWrapper):e.insertBefore(t,e.firstChild),mobileActionState.impactInlineWrapper=t}return mobileActionState.impactInlineWrapper}function promoteImpactInlineHosts(){const e=ensureImpactInlineWrapper();if(!e)return!1;const{headerHost:t,contentHost:o}=mobileActionState;if(!t||!o)return!1;if(!mobileActionState.impactInlineHeaderPlaceholder||!document.contains(mobileActionState.impactInlineHeaderPlaceholder)){const e=document.createElement("div");e.style.display="none",e.dataset.placeholder="mobile-action-header",t.parentElement?.insertBefore(e,t),mobileActionState.impactInlineHeaderPlaceholder=e}if(!mobileActionState.impactInlineContentPlaceholder||!document.contains(mobileActionState.impactInlineContentPlaceholder)){const e=document.createElement("div");e.style.display="none",e.dataset.placeholder="mobile-action-content",o.parentElement?.insertBefore(e,o),mobileActionState.impactInlineContentPlaceholder=e}return t.parentElement!==e&&e.appendChild(t),o.parentElement!==e&&e.appendChild(o),e.setAttribute("aria-hidden","false"),!0}function restoreImpactInlineHosts(){const e=mobileActionState.impactInlineWrapper;e&&e.setAttribute("aria-hidden","true");const{headerHost:t,contentHost:o}=mobileActionState,n=mobileActionState.impactInlineHeaderPlaceholder;t&&n?.parentElement&&(n.parentElement.insertBefore(t,n),n.remove()),mobileActionState.impactInlineHeaderPlaceholder=null;const i=mobileActionState.impactInlineContentPlaceholder;o&&i?.parentElement&&(i.parentElement.insertBefore(o,i),i.remove()),mobileActionState.impactInlineContentPlaceholder=null}function syncMobileTabsBacking(){const{tabsWrapper:e,tabsElement:t,tabsBacking:o}=mobileActionState;if(!e||!t||!o)return;const n=t.getBoundingClientRect();if(!n.width||!n.height)return;const i=e.getBoundingClientRect(),a=n.left-i.left,l=n.top-i.top;e.style.setProperty("--mobile-tabs-left",`${a}px`),e.style.setProperty("--mobile-tabs-top",`${l}px`),e.style.setProperty("--mobile-tabs-width",`${n.width}px`),e.style.setProperty("--mobile-tabs-height",`${n.height}px`)}function startMobileTabsRoll({fadeOut:e=!1,direction:t="forward"}={}){const o=mobileActionState.tabsElement;if(!o?.classList.contains("has-slider-element"))return;syncMobileTabsBacking(),mobileActionState.tabsWrapper&&(mobileActionState.tabsWrapper.classList.add("is-rolling"),mobileActionState.tabsWrapper.classList.remove("is-rolling-out")),o.classList.add("is-rolling"),o.classList.toggle("is-rolling-back","back"===t),mobileActionState.rollCleanupTimeout&&(clearTimeout(mobileActionState.rollCleanupTimeout),mobileActionState.rollCleanupTimeout=null),mobileActionState.rollOutTimeout&&(clearTimeout(mobileActionState.rollOutTimeout),mobileActionState.rollOutTimeout=null);const{transition:n,rollFade:i}=getMobileActionTimings(),a=n+(e?i:0);return 0===n?(e?mobileActionState.tabsWrapper?.classList.add("is-rolling-out"):mobileActionState.tabsWrapper?.classList.remove("is-rolling"),o.classList.remove("is-rolling","is-rolling-back"),a):(e&&(mobileActionState.rollOutTimeout=window.setTimeout(()=>{mobileActionState.tabsWrapper?.classList.add("is-rolling-out")},n)),mobileActionState.rollCleanupTimeout=window.setTimeout(()=>{mobileActionState.tabsWrapper?.classList.remove("is-rolling"),e&&mobileActionState.tabsWrapper?.classList.remove("is-rolling-out"),o.classList.remove("is-rolling","is-rolling-back"),mobileActionState.rollCleanupTimeout=null},a),a)}function resetMobileTabsRollState(){mobileActionState.rollCleanupTimeout&&(clearTimeout(mobileActionState.rollCleanupTimeout),mobileActionState.rollCleanupTimeout=null),mobileActionState.rollOutTimeout&&(clearTimeout(mobileActionState.rollOutTimeout),mobileActionState.rollOutTimeout=null),mobileActionState.tabsWrapper?.classList.remove("is-rolling","is-rolling-out"),mobileActionState.tabsElement?.classList.remove("is-rolling","is-rolling-back")}function ensureMobileContactMenuElements(){return mobileContactMenuState.menu&&document.contains(mobileContactMenuState.menu)||(mobileContactMenuState.menu=document.querySelector(".mobile-contact-menu")),mobileContactMenuState.wrapper&&document.contains(mobileContactMenuState.wrapper)||(mobileContactMenuState.wrapper=document.querySelector(".mobile-contact-menu-wrapper")),mobileContactMenuState.profileHeader&&document.contains(mobileContactMenuState.profileHeader)||(mobileContactMenuState.profileHeader=document.querySelector(".profile-header")),mobileActionState.contactToggle&&document.contains(mobileActionState.contactToggle)||(mobileActionState.contactToggle=document.querySelector(".mobile-contact-button")),mobileActionState.impactToggle&&document.contains(mobileActionState.impactToggle)||(mobileActionState.impactToggle=document.querySelector(".mobile-impact-button")),Boolean(mobileContactMenuState.menu&&mobileContactMenuState.wrapper&&mobileContactMenuState.profileHeader)}function setContactMenuExpanded(e){mobileActionState.contactToggle&&mobileActionState.contactToggle.setAttribute("aria-expanded",e?"true":"false")}function openMobileContactMenu(){return!!isMobileActionViewport()&&!!ensureMobileContactMenuElements()&&(mobileContactMenuState.isOpen||(mobileContactMenuState.isOpen=!0,mobileContactMenuState.profileHeader.classList.add("is-contact-menu-open"),mobileContactMenuState.menu.classList.add("is-open"),mobileContactMenuState.menu.setAttribute("aria-hidden","false"),mobileContactMenuState.openScrollTop=getPageScrollTop(),mobileContactMenuState.headerHeight=getHeaderHeight(),mobileContactMenuState.menu.querySelectorAll(".mobile-contact-option").forEach(e=>{e.removeAttribute("tabindex")}),setMobileActionToggleState("contact"),setContactMenuExpanded(!0),mobileContactMenuState.outsideClickHandler||(mobileContactMenuState.outsideClickHandler=e=>{mobileContactMenuState.isOpen&&(mobileContactMenuState.wrapper?.contains(e.target)||closeMobileContactMenu())},document.addEventListener("click",mobileContactMenuState.outsideClickHandler)),mobileContactMenuState.keydownHandler||(mobileContactMenuState.keydownHandler=e=>{"Escape"===e.key&&closeMobileContactMenu()},document.addEventListener("keydown",mobileContactMenuState.keydownHandler)),mobileContactMenuState.scrollHandler||(mobileContactMenuState.scrollHandler=()=>{if(!mobileContactMenuState.isOpen)return;const e=getPageScrollTop(),t=mobileContactMenuState.headerHeight||getHeaderHeight();t<=0||e-mobileContactMenuState.openScrollTop>=t&&closeMobileContactMenu()},window.addEventListener("scroll",mobileContactMenuState.scrollHandler,{passive:!0}))),!0)}function closeMobileContactMenu(){return!!mobileContactMenuState.isOpen&&(mobileContactMenuState.isOpen=!1,mobileContactMenuState.profileHeader?.classList.remove("is-contact-menu-open"),mobileContactMenuState.menu?.classList.remove("is-open"),mobileContactMenuState.menu?.setAttribute("aria-hidden","true"),mobileContactMenuState.menu?.querySelectorAll(".mobile-contact-option").forEach(e=>{e.setAttribute("tabindex","-1")}),setContactMenuExpanded(!1),setMobileActionToggleState(mobileActionState.active?mobileActionState.currentType:null),mobileContactMenuState.outsideClickHandler&&(document.removeEventListener("click",mobileContactMenuState.outsideClickHandler),mobileContactMenuState.outsideClickHandler=null),mobileContactMenuState.keydownHandler&&(document.removeEventListener("keydown",mobileContactMenuState.keydownHandler),mobileContactMenuState.keydownHandler=null),mobileContactMenuState.scrollHandler&&(window.removeEventListener("scroll",mobileContactMenuState.scrollHandler),mobileContactMenuState.scrollHandler=null),mobileContactMenuState.openScrollTop=0,mobileContactMenuState.headerHeight=0,!0)}function toggleMobileContactMenu(){return mobileContactMenuState.isOpen?closeMobileContactMenu():openMobileContactMenu()}function getModalNodes(e){if(mobileActionState.cachedNodes[e])return mobileActionState.cachedNodes[e];const t=document.getElementById(`${e}-modal`);if(!t)return null;const o=t.querySelector(`.${e}-modal-sheet`),n=t.querySelector(`.${e}-modal-header`);if(!o||!n)return null;const i={modal:t,sheet:o,header:n};return mobileActionState.cachedNodes[e]=i,i}function mountMobileActionNodes(e){const t=getModalNodes(e);if(!t)return!1;const{modal:o,sheet:n,header:i}=t;return o.classList.contains("active")&&(o.classList.remove("active"),o.style.display="none",document.body.style.overflow=""),n.parentElement!==mobileActionState.contentHost&&mobileActionState.contentHost.appendChild(n),i.parentElement!==mobileActionState.headerHost&&mobileActionState.headerHost.appendChild(i),mobileActionState.headerHost.dataset.mode=e,mobileActionState.contentHost.dataset.mode=e,!0}function restoreMobileActionNodes(e){const t=getModalNodes(e);if(!t)return;const{modal:o,sheet:n,header:i}=t;n.parentElement!==o&&o.appendChild(n),i.parentElement!==n&&n.insertBefore(i,n.firstChild)}function showMobileActionHosts(){const{headerHost:e,contentHost:t}=mobileActionState;e&&t&&(e.style.display="block",t.style.display="block",e.setAttribute("aria-hidden","false"),t.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{e.classList.add("is-visible"),t.classList.add("is-visible")}))}function hideMobileActionHosts(e){const{headerHost:t,contentHost:o}=mobileActionState;if(!t||!o)return void("function"==typeof e&&e());t.classList.remove("is-visible"),o.classList.remove("is-visible"),t.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true");const{fade:n}=getMobileActionTimings();window.setTimeout(()=>{t.style.display="none",o.style.display="none","function"==typeof e&&e()},n)}function runImpactInlineEnhancements(){const e=getMobileActionTimings().fade;window.setTimeout(()=>{mobileActionState.active&&"impact"===mobileActionState.currentType&&(initImpactGridAnimations(),fitTextInTiles(),startImpactCharacter())},e)}function attachMobileActionKeydown(){mobileActionState.keydownHandler||(mobileActionState.keydownHandler=e=>{"Escape"===e.key&&closeMobileAction()},document.addEventListener("keydown",mobileActionState.keydownHandler))}function detachMobileActionKeydown(){mobileActionState.keydownHandler&&(document.removeEventListener("keydown",mobileActionState.keydownHandler),mobileActionState.keydownHandler=null)}function updateMobileActionLabel(e,t){if(!e)return;const o=e.dataset.labelDefault,n=e.dataset.labelActive;(o||n)&&e.setAttribute("aria-label",t?n||o:o||n)}function setMobileActionToggleState(e){const{impactToggle:t,contactToggle:o}=mobileActionState;if(!t||!o)return;const n="impact"===e,i="contact"===e,a=Boolean(e),l=(e,t)=>{e&&(t?(e.setAttribute("disabled","true"),e.setAttribute("aria-disabled","true")):(e.removeAttribute("disabled"),e.removeAttribute("aria-disabled")))};t.classList.toggle("is-active",n),t.classList.toggle("is-muted",a&&!n),t.setAttribute("aria-pressed",n?"true":"false"),updateMobileActionLabel(t,n),l(t,a&&!n),o.classList.toggle("is-active",i),o.classList.toggle("is-muted",a&&!i),o.setAttribute("aria-pressed",i?"true":"false"),updateMobileActionLabel(o,i),l(o,a&&!i);const c=document.querySelector(".profile-header");c&&c.classList.toggle("is-impact-open",n)}function openMobileAction(e){if(!isMobileActionViewport())return!1;if(!ensureMobileActionElements())return!1;if(mobileContactMenuState.isOpen&&closeMobileContactMenu(),mobileActionState.isTransitioning)return!0;if(mobileActionState.active){if(mobileActionState.currentType===e)return closeMobileAction(),!0;const t=mobileActionState.currentType;return mobileActionState.isTransitioning=!0,setMobileActionToggleState(e),"impact"===e?(clearImpactModeTimers(),setImpactModeActive(!0),promoteImpactInlineHosts(),setImpactInlineActive(!0),detachContentInnerWrapper()):"impact"===t&&(stopImpactCharacter(),clearImpactModeTimers(),restoreContentInnerWrapper(),restoreImpactInlineHosts(),setImpactInlineActive(!1),setImpactModeActive(!1)),hideMobileActionHosts(()=>{if(restoreMobileActionNodes(mobileActionState.currentType),!mountMobileActionNodes(e))return"impact"===e?(restoreContentInnerWrapper(),restoreImpactInlineHosts(),setImpactInlineActive(!1),setImpactModeActive(!1)):"impact"===t&&(clearImpactModeTimers(),setImpactModeActive(!0),promoteImpactInlineHosts(),setImpactInlineActive(!0),detachContentInnerWrapper()),mountMobileActionNodes(t)&&(showMobileActionHosts(),"impact"===t&&runImpactInlineEnhancements()),setMobileActionToggleState(t),void(mobileActionState.isTransitioning=!1);showMobileActionHosts(),mobileActionState.currentType=e,mobileActionState.isTransitioning=!1,"impact"===e&&runImpactInlineEnhancements()}),!0}clearImpactModeTimers(),setMobileActionToggleState(e),mobileActionState.isTransitioning=!0;const t=getMobileActionTimings(),o=()=>{let o=t.transition;if(mobileActionState.tabsElement?.classList.contains("has-slider-element")){const e=startMobileTabsRoll({fadeOut:!0});void 0!==e&&(o=e)}mobileActionState.contentWrapper&&mobileActionState.contentWrapper.classList.add("is-fading");const n=()=>{if(mobileActionState.tabsElement&&(mobileActionState.tabsElement.style.display="none"),mobileActionState.contentWrapper&&(mobileActionState.contentWrapper.style.display="none"),"impact"===e&&(promoteImpactInlineHosts(),setImpactInlineActive(!0),detachContentInnerWrapper()),!mountMobileActionNodes(e))return mobileActionState.tabsElement&&(mobileActionState.tabsElement.style.display=""),setMobileActionToggleState(null),resetMobileTabsRollState(),mobileActionState.contentWrapper&&(mobileActionState.contentWrapper.style.display="",mobileActionState.contentWrapper.classList.remove("is-fading")),"impact"===e&&(restoreContentInnerWrapper(),restoreImpactInlineHosts(),setImpactInlineActive(!1),setImpactModeActive(!1)),void(mobileActionState.isTransitioning=!1);showMobileActionHosts(),mobileActionState.active=!0,mobileActionState.currentType=e,mobileActionState.isTransitioning=!1,attachMobileActionKeydown(),"impact"===e&&runImpactInlineEnhancements()};"impact"===e?scheduleImpactModeTimer(n,o):window.setTimeout(n,o)};return"impact"===e?(setImpactModeActive(!0),t.darkTransition>0?scheduleImpactModeTimer(o,t.darkTransition):o()):(restoreContentInnerWrapper(),setImpactInlineActive(!1),restoreImpactInlineHosts(),setImpactModeActive(!1),o()),!0}function closeMobileAction(){if(!mobileActionState.active||mobileActionState.isTransitioning)return!1;const e="impact"===mobileActionState.currentType;return e&&(stopImpactCharacter(),clearImpactModeTimers()),mobileActionState.isTransitioning=!0,setMobileActionToggleState(null),hideMobileActionHosts(()=>{e&&(restoreContentInnerWrapper(),restoreImpactInlineHosts(),setImpactInlineActive(!1)),restoreMobileActionNodes(mobileActionState.currentType),mobileActionState.currentType=null,mobileActionState.active=!1,mobileActionState.tabsElement&&(mobileActionState.tabsElement.style.display=""),mobileActionState.contentWrapper&&(mobileActionState.contentWrapper.style.display="");const t=startMobileTabsRoll({direction:"back"});if(e){const e="number"==typeof t?t:getMobileActionTimings().transition;0===e?setImpactModeActive(!1):scheduleImpactModeTimer(()=>{setImpactModeActive(!1)},e)}requestAnimationFrame(()=>{mobileActionState.contentWrapper&&mobileActionState.contentWrapper.classList.remove("is-fading"),window.mobileTabs&&"function"==typeof window.mobileTabs.updateSlider&&requestAnimationFrame(()=>{window.mobileTabs.updateSlider()}),mobileActionState.isTransitioning=!1}),detachMobileActionKeydown()}),!0}function extractImpactTileValue(e){if(!e)return"";let t="";return e.childNodes.forEach(e=>{if(e.nodeType===Node.TEXT_NODE)return void(t+=e.textContent||"");if(e.nodeType!==Node.ELEMENT_NODE)return;const o=e;o.classList?.contains("counter")&&o.dataset?.target?t+=String(o.dataset.target):t+=o.textContent||""}),t.replace(/\s+/g," ").trim()}function collectImpactLiquidStats(){const e=[{value:"$30M+",label:"Commercial Engine",detail:"Directly enabled new ARR and secured at-risk enterprise revenue through strategic UX interventions and rapid crisis resolution."},{value:"100+",label:"Platform Transformation",detail:"Spearheaded the unification of a 100+ product ecosystem, achieving a 5x increase in developer velocity and standardized design-to-code pipelines."},{value:"250x",label:"Velocity Shift",detail:"Re-engineered core publishing workflows, collapsing legacy 3-week cycles into under 2 hours to enable real-time business agility."},{value:"$9.2M",label:"Efficiency Architect",detail:"Delivered $9.2M in annual operational savings by optimizing engineering workflows and automating over 15,000 daily manual tasks."},{value:"85%",label:"Proactive Problem Solving",detail:"Reduced the global support burden by 85% by identifying and designing out systemic friction points before they reached the customer."},{value:"12TB",label:"Infrastructure Optimization",detail:"Led a design-for-efficiency initiative that eliminated 12TB of redundant data storage, lowering cloud overhead and improving platform performance."},{value:"50K+",label:"Full-Stack Leadership",detail:"Shipped over 50,000 lines of production-ready code, proving that design leadership can directly accelerate the build."},{value:"22%",label:"Market-Leading Conversion",detail:"Engineered a high-performance user journey that achieved a 22% conversion rate, doubling the industry standard of 12%."},{value:"85%",label:"Best-in-Class Retention",detail:"Cultivated an ecosystem that maintains an 85% user retention rate, significantly outperforming competitors in the enterprise space."},{value:"$1.3M",label:"Customer-Centric Savings",detail:"Developed cost-saving features that directly returned $1.3M to users, strengthening brand trust and long-term loyalty."},{value:"5+ yrs",label:"Design Longevity",detail:"Created a suite of strategic tools with an average lifespan of 5+ years, proving the durability and long-term ROI of the design vision."}];if(e.length)return e;const t=document.getElementById("impact-modal");if(!t)return null;const o=Array.from(t.querySelectorAll(".impact-tile")).map(e=>{const t=e.querySelector(".tile-value"),o=extractImpactTileValue(t)||t?.textContent?.trim(),n=e.querySelector(".tile-label")?.textContent?.trim(),i=e.querySelector(".tile-detail")?.textContent?.trim();return o?{value:o,label:n,detail:i}:null}).filter(Boolean);return o.length?o:null}function getImpactLiquidTargets(){const e=isMobileActionViewport()?null:document.querySelector(".blog-content"),t=e&&document.contains(e)?e:null,o=Boolean(t),n=document.body||null;return{isEmbedded:o,host:t,mountTarget:o?t:n,coveredTarget:o?t:n,activeTarget:o?t:n}}function setImpactLiquidActive(e,t){e?.classList&&e.classList.toggle("impact-liquid-active",t)}function clearImpactLiquidCovered(e){e?.classList&&e.classList.remove("impact-liquid-covered")}function getImpactLiquidCloseAnchor(){let e=null;const t=document.querySelector(".profile-header .mobile-impact-button"),o=document.querySelector(".profile-header .mobile-buttons-container");if(t&&"function"==typeof t.getBoundingClientRect){const n=t.getBoundingClientRect(),i=o&&"function"==typeof o.getBoundingClientRect?o.getBoundingClientRect():n,a=n.width,l=Math.max(n.width,i.right-n.left);e={top:n.top,left:n.left,collapsedWidth:a,expandedWidth:l,height:n.height}}return e}function getDesktopImpactToggle(){return document.querySelector(".impact-report-btn")}function setDesktopImpactToggleState(e){const t=getDesktopImpactToggle();if(!t)return;const o=t.dataset.textDefault||t.textContent?.trim()||"Stats",n=t.dataset.textActive||o;t.classList.toggle("is-active",e),t.setAttribute("aria-pressed",e?"true":"false"),updateMobileActionLabel(t,e),t.textContent=e?n:o}function getImpactViewportMode(){return isMobileActionViewport()?"mobile":"desktop"}function attachImpactLiquidKeydown(){impactLiquidState.keydownHandler||(impactLiquidState.keydownHandler=e=>{"Escape"===e.key&&closeImpactLiquidExperience()},document.addEventListener("keydown",impactLiquidState.keydownHandler))}function detachImpactLiquidKeydown(){impactLiquidState.keydownHandler&&(document.removeEventListener("keydown",impactLiquidState.keydownHandler),impactLiquidState.keydownHandler=null)}function attachImpactLiquidResize(){impactLiquidState.resizeHandler||(impactLiquidState.resizeHandler=()=>{if(!impactLiquidState.isOpen)return;const e=getImpactViewportMode();impactLiquidState.viewportMode&&impactLiquidState.viewportMode!==e&&closeImpactLiquidExperience()},window.addEventListener("resize",impactLiquidState.resizeHandler))}function detachImpactLiquidResize(){impactLiquidState.resizeHandler&&(window.removeEventListener("resize",impactLiquidState.resizeHandler),impactLiquidState.resizeHandler=null)}async function openImpactLiquidExperience(){if(impactLiquidState.isTransitioning||impactLiquidState.isOpen)return!0;impactLiquidState.isTransitioning=!0,mobileContactMenuState.isOpen&&closeMobileContactMenu();const e=getImpactLiquidTargets();return impactLiquidState.mountTarget=e.mountTarget,impactLiquidState.coveredTarget=e.coveredTarget,impactLiquidState.activeTarget=e.activeTarget,impactLiquidState.isEmbedded=e.isEmbedded,clearImpactLiquidCovered(impactLiquidState.coveredTarget),setImpactLiquidActive(impactLiquidState.activeTarget,!0),impactLiquidState.isOpen=!0,setDesktopImpactToggleState(!0),impactLiquidState.viewportMode=getImpactViewportMode(),attachImpactLiquidResize(),await startImpactLiquidOverlay({stats:collectImpactLiquidStats(),closeAnchor:e.isEmbedded?null:getImpactLiquidCloseAnchor(),onRequestClose:()=>{closeImpactLiquidExperience()},mountTarget:impactLiquidState.mountTarget,coveredTarget:impactLiquidState.coveredTarget,applyChromeTint:!e.isEmbedded})?(attachImpactLiquidKeydown(),impactLiquidState.isTransitioning=!1,!0):(impactLiquidState.isOpen=!1,impactLiquidState.isTransitioning=!1,setDesktopImpactToggleState(!1),detachImpactLiquidKeydown(),detachImpactLiquidResize(),impactLiquidState.viewportMode=null,setImpactLiquidActive(impactLiquidState.activeTarget,!1),clearImpactLiquidCovered(impactLiquidState.coveredTarget),impactLiquidState.mountTarget=null,impactLiquidState.coveredTarget=null,impactLiquidState.activeTarget=null,impactLiquidState.isEmbedded=!1,!1)}function closeImpactLiquidExperience(){if(!impactLiquidState.isOpen)return Promise.resolve(!1);if(impactLiquidState.closePromise)return impactLiquidState.closePromise;impactLiquidState.isTransitioning=!0,setDesktopImpactToggleState(!1);const{activeTarget:e,coveredTarget:t}=impactLiquidState;return impactLiquidState.closePromise=stopImpactLiquidOverlay().then(()=>{impactLiquidState.isOpen=!1,setImpactLiquidActive(e,!1),clearImpactLiquidCovered(t)}).finally(()=>{impactLiquidState.isTransitioning=!1,impactLiquidState.closePromise=null,detachImpactLiquidKeydown(),detachImpactLiquidResize(),impactLiquidState.viewportMode=null,impactLiquidState.mountTarget=null,impactLiquidState.coveredTarget=null,impactLiquidState.activeTarget=null,impactLiquidState.isEmbedded=!1}),impactLiquidState.closePromise}function openImpactModal(e){e&&e.stopPropagation(),mobileContactMenuState.isOpen&&closeMobileContactMenu(),window.playToggleSound&&window.playToggleSound(),impactLiquidState.isOpen?closeImpactLiquidExperience():openImpactLiquidExperience()}function closeImpactModal(){if(window.playSmallClickSound&&window.playSmallClickSound(),impactLiquidState.isOpen)return void closeImpactLiquidExperience();if(isPartyMode&&togglePartyMode(),closeMobileAction())return;const e=document.getElementById("impact-modal");e&&(stopImpactCharacter(),e.classList.remove("active"),setTimeout(()=>{e.style.display="none",document.body.style.overflow=""},300),document.removeEventListener("keydown",handleImpactModalKeydown))}function handleImpactModalKeydown(e){"Escape"===e.key&&closeImpactModal()}let resizeTimeout,isPartyMode=!1,audioContext=null,audioAnalyser=null,audioSource=null,animationFrame=null,scrollInterval=null;function togglePartyMode(){const e=document.getElementById("impact-audio"),t=document.querySelector(".impact-modal-party-mode"),o=document.querySelector(".impact-grid");if(e&&t)if(isPartyMode=!isPartyMode,isPartyMode){if(e.loop=!0,e.play(),t.classList.add("playing"),!audioContext)try{audioContext=new(window.AudioContext||window.webkitAudioContext),"suspended"===audioContext.state&&audioContext.resume(),audioAnalyser=audioContext.createAnalyser(),audioSource=audioContext.createMediaElementSource(e),audioSource.connect(audioAnalyser),audioAnalyser.connect(audioContext.destination),audioAnalyser.fftSize=2048,audioAnalyser.smoothingTimeConstant=.8}catch(e){}startBeatAnimations(),o&&o.classList.add("party-mode"),setTimeout(()=>{startAutoScroll()},100)}else e.pause(),e.currentTime=0,t.classList.remove("playing"),stopBeatAnimations(),stopAutoScroll(),o&&o.classList.remove("party-mode")}function startBeatAnimations(){if(!audioAnalyser)return;const e=audioAnalyser.frequencyBinCount,t=new Uint8Array(e),o=setInterval(()=>{const e=document.querySelectorAll(".impact-tile");if(0===e.length)return;const t=e.length,o=new Set,n=Math.random();if(n<.33){const e=Math.floor(t*(.2+.2*Math.random()));for(;o.size<e;)o.add(Math.floor(Math.random()*t))}else if(n<.66){const e=Math.floor(Math.random()*t),n=3+Math.floor(5*Math.random());o.add(e);for(let i=0;i<n&&o.size<t;i++){const n=Math.floor(5*Math.random())-2,i=Math.max(0,Math.min(t-1,e+n));o.add(i)}}else{const e=2+Math.floor(3*Math.random());for(let n=Math.floor(Math.random()*e);n<t;n+=e)o.add(n)}o.forEach(t=>{const o=e[t],n=50*Math.random();setTimeout(()=>{o.classList.add("beat-hover"),setTimeout(()=>o.classList.remove("beat-hover"),200)},n)})},469);window.beatTimer=o,function o(){animationFrame=requestAnimationFrame(o),audioAnalyser.getByteFrequencyData(t);let n=0;for(let o=0;o<e;o++)n+=t[o];const i=n/e/255;document.querySelectorAll(".impact-tile").forEach((e,t)=>{if(!e.classList.contains("beat-hover")){const o=.05*t,n=1+.08*i*Math.sin(.001*Date.now()+o);e.style.transform=`scale(${n})`}})}()}function stopBeatAnimations(){animationFrame&&(cancelAnimationFrame(animationFrame),animationFrame=null),window.beatTimer&&(clearInterval(window.beatTimer),window.beatTimer=null),document.querySelectorAll(".impact-tile").forEach(e=>{e.style.transform="",e.classList.remove("beat-hover")})}function startAutoScroll(){const e=document.querySelector(".impact-grid");if(!e)return;const t=e.scrollHeight>e.clientHeight;let o=e,n=0,i=e.scrollHeight-e.clientHeight;if(!t){const t=document.scrollingElement||document.documentElement;if(!t)return;const a=e.getBoundingClientRect(),l=t.scrollTop,c=l+a.top,r=l+a.bottom,s=window.innerHeight;n=c,i=Math.max(r-s,c),o=t}if(i<=n)return;let a=1;!function e(){if(!isPartyMode)return void stopAutoScroll();const t=o.scrollTop;t>=i-5&&1===a?a=-1:t<=n+5&&-1===a&&(a=1),o.scrollTop+=1*a,animationFrame=requestAnimationFrame(e)}()}function stopAutoScroll(){animationFrame&&(cancelAnimationFrame(animationFrame),animationFrame=null),scrollInterval&&(clearInterval(scrollInterval),scrollInterval=null)}function openContactModal(e){if(e&&e.stopPropagation(),isMobileActionViewport()){const e=mobileContactMenuState.isOpen;if(toggleMobileContactMenu())return void(e&&window.playSmallClickSound?window.playSmallClickSound():!e&&window.playToggleSound&&window.playToggleSound())}window.playToggleSound&&window.playToggleSound();const t=document.getElementById("contact-modal");t&&(t.style.display="flex",document.body.style.overflow="hidden",document.addEventListener("keydown",handleContactModalKeydown),setTimeout(()=>{t.classList.add("active")},10))}function closeContactModal(){if(window.playSmallClickSound&&window.playSmallClickSound(),isMobileActionViewport()&&mobileContactMenuState.isOpen)return void closeMobileContactMenu();if(closeMobileAction())return;const e=document.getElementById("contact-modal");e&&(e.classList.remove("active"),setTimeout(()=>{e.style.display="none",document.body.style.overflow=""},300),document.removeEventListener("keydown",handleContactModalKeydown))}function handleContactModalKeydown(e){"Escape"===e.key&&closeContactModal()}function initImpactGridAnimations(){const e=document.querySelectorAll(".impact-tile");if(!e.length)return;const t=new IntersectionObserver(e=>{e.forEach((e,o)=>{e.isIntersecting&&(setTimeout(()=>{animateTile(e.target)},100*o),t.unobserve(e.target))})},{threshold:.1});e.forEach(e=>t.observe(e))}function animateTile(e){switch(e.dataset.animate){case"counter":animateCounter(e);break;case"scale":animateScale(e);break;case"wave":animateWave(e);break;case"stack":animateStack(e);break;case"pulse":animatePulse(e);break;case"grow":animateGrow(e);break;case"extend":animateExtend(e);break;case"race":animateRace(e);break;case"spark":animateSpark(e);break;case"shine":animateShine(e);break;case"rotate":animateRotate(e)}e.classList.add("animated")}function animateCounter(e){const t=e.querySelector(".counter");if(!t)return;const o=parseFloat(t.dataset.target),n=performance.now();requestAnimationFrame(function e(i){const a=i-n,l=Math.min(a/2e3,1),c=l*o;t.textContent=c.toFixed(c<10?1:0),l<1&&requestAnimationFrame(e)})}function animateScale(e){const t=e.querySelector(".progress-bar");t&&setTimeout(()=>{t.style.width=t.dataset.percent+"%"},300)}function animateWave(e){const t=e.querySelector(".donut-segment");t&&setTimeout(()=>{t.style.strokeDasharray=t.getAttribute("stroke-dasharray")},300)}function animateStack(e){e.querySelectorAll(".stack-item").forEach((e,t)=>{setTimeout(()=>{e.style.opacity="1",e.style.transform="translateX(0)"},300+150*t)})}function animatePulse(e){e.querySelectorAll(".ring").forEach((e,t)=>{setTimeout(()=>{e.style.opacity=e.classList.contains("ring-1")?"1":e.classList.contains("ring-2")?"0.7":"0.4",e.style.animation="pulse 2s ease-in-out infinite",e.style.animationDelay=.2*t+"s"},300+200*t)})}function animateGrow(e){e.querySelectorAll(".growth-stage").forEach((e,t)=>{setTimeout(()=>{e.style.transform="scaleY(1)"},300+200*t)})}function animateExtend(e){const t=e.querySelector(".calendar-bar");t&&setTimeout(()=>{t.classList.add("is-filled")},300)}function animateRace(e){e.querySelectorAll(".velocity-bar").forEach((e,t)=>{setTimeout(()=>{e.classList.add("is-active")},300+300*t)})}function animateSpark(e){e.querySelectorAll(".innovation-item").forEach((e,t)=>{setTimeout(()=>{e.classList.add("is-active")},300+150*t)})}function animateShine(e){e.style.animation="shine 3s ease-in-out infinite"}function animateRotate(e){const t=e.querySelector(".globe-dots");t&&(t.style.animation="rotateGlobe 20s linear infinite")}function fitTextInTiles(){const e=document.querySelectorAll(".impact-tile"),t=window.innerWidth<=768;e.forEach(e=>{const o=e.querySelector(".tile-inner"),n=e.querySelector(".tile-mobile-content"),i=Boolean(t&&n&&"contents"!==window.getComputedStyle(n).display&&n.getBoundingClientRect().width>0&&n.getBoundingClientRect().height>0),a=i?n:o,l=i?.5:.6,c=i?.4:.25,r=e.querySelector(".tile-value");r&&"none"!==window.getComputedStyle(r).display&&fitTextToContainer(r,a||e,l,{isMobile:t,compact:i});const s=e.querySelector(".tile-label");s&&"none"!==window.getComputedStyle(s).display&&fitTextToContainer(s,a||e,c,{isMobile:t,compact:i});const d=e.querySelector(".chart-number");d&&fitTextToContainer(d,e.querySelector(".chart-container"),.5,{isMobile:t})})}function fitTextToContainer(e,t,o=.8,n={}){if(!e||!t)return;const{isMobile:i=!1,compact:a=!1}=n,l=t.getBoundingClientRect(),c=2*parseInt(window.getComputedStyle(t).paddingLeft),r=l.width-c,s=l.height*o;e.style.fontSize="";let d=parseFloat(window.getComputedStyle(e).fontSize),m=10,u=Math.min(72,3*d),p=d;for(;u-m>.5;){const t=(m+u)/2;e.style.fontSize=t+"px";const o=e.getBoundingClientRect(),n=o.width,i=o.height;n<=r&&i<=s?(p=t,m=t):u=t}if(e.style.fontSize=.95*p+"px",i&&a){const t=parseFloat(e.style.fontSize);e.classList.contains("tile-value")?t>14?e.style.fontSize="14px":t<12&&(e.style.fontSize="12px"):e.classList.contains("tile-label")&&(t>9?e.style.fontSize="9px":t<8&&(e.style.fontSize="8px"))}}window.openImpactModal=openImpactModal,window.closeImpactModal=closeImpactModal,window.togglePartyMode=togglePartyMode,window.openContactModal=openContactModal,window.closeContactModal=closeContactModal;const handleWindowResize=()=>{clearTimeout(resizeTimeout),resizeTimeout=setTimeout(()=>{if(mobileActionState.active&&!isMobileActionViewport())return void closeMobileAction();const e=document.getElementById("impact-modal");(mobileActionState.active&&"impact"===mobileActionState.currentType||e&&"flex"===e.style.display)&&fitTextInTiles()},250)};window.addEventListener("resize",handleWindowResize),window._impactModalResizeHandler=handleWindowResize;